<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Requests 2.10.0 文档</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/badge_only.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.10.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="top" title="None" href="index.html#document-index" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  
<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://docs.python-requests.org/zh_CN/latest/" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'index'
</script>

<script type="text/javascript" src="_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="requests-http">
<h1>Requests: 让 HTTP 服务人类<a class="headerlink" href="#requests-http" title="永久链接至标题">¶</a></h1>
<p>发行版本 v2.10.0. (<a class="reference internal" href="index.html#install"><span>安装说明</span></a>)</p>
<p>Requests 唯一的一个<strong>非转基因</strong>的 Python HTTP 库，人类可以安全享用。</p>
<p><strong>警告</strong>：非专业使用其他 HTTP 库会导致危险的副作用，包括：安全缺陷症、冗余代码症、重新发明轮子症、啃文档症、抑郁、头疼、甚至死亡。</p>
<p>看吧，这就是 Requests 的威力：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/user&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;pass&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;content-type&#39;</span><span class="p">]</span>
<span class="go">&#39;application/json; charset=utf8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">encoding</span>
<span class="go">&#39;utf-8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="go">u&#39;{&quot;type&quot;:&quot;User&quot;...&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="go">{u&#39;private_gists&#39;: 419, u&#39;total_private_repos&#39;: 77, ...}</span>
</pre></div>
</div>
<p>参见 <a class="reference external" href="https://gist.github.com/973705">未使用 Requests 的相似代码</a>.</p>
<p>Requests 允许你发送<strong>纯天然，植物饲养</strong>的 HTTP/1.1 请求，无需手工劳动。你不需要手动为
URL 添加查询字串，也不需要对 POST 数据进行表单编码。Keep-alive 和 HTTP 连接池的功能是
100% 自动化的，一切动力都来自于根植在 Requests 内部的 <a class="reference external" href="https://github.com/shazow/urllib3">urllib3</a>。</p>
<div class="section" id="id1">
<h2>用户见证<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>女王殿下的政府、Amazon、Google、Twilio、Mozilla、Heroku、PayPal、NPR、Obama for America、Transifex、Native Instruments、Washington Post、Twitter、SoundCloud、Kippt、Readability、以及若干不愿公开身份的联邦政府机构都在内部使用。</p>
<dl class="docutils">
<dt><strong>Armin Ronacher</strong></dt>
<dd>Requests 是一个完美的例子，它证明了通过恰到好处的抽象，API 可以写得多么优美。</dd>
<dt><strong>Matt DeBoard</strong></dt>
<dd>我要想个办法，把 &#64;kennethreitz 写的 Python requests 模块做成纹身。一字不漏。</dd>
<dt><strong>Daniel Greenfeld</strong></dt>
<dd>感谢 &#64;kennethreitz 的 Requests 库，刚刚用 10 行代码炸掉了 1200 行意大利面代码。今天真是爽呆了！</dd>
<dt><strong>Kenny Meyers</strong></dt>
<dd>Python HTTP: 疑惑与否，都去用 Requests 吧。简单优美，而且符合 Python 风格。</dd>
</dl>
</div>
<div class="section" id="id2">
<h2>功能特性<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>Requests 完全满足今日 web 的需求。</p>
<ul class="simple">
<li>国际化域名和 URL</li>
<li>Keep-Alive &amp; 连接池</li>
<li>带持久 Cookie 的会话</li>
<li>浏览器式的 SSL 认证</li>
<li>基本/摘要式的身份认证</li>
<li>优雅的 key/value Cookie</li>
<li>自动解压</li>
<li>自动内容解码</li>
<li>Unicode 响应体</li>
<li>文件分块上传</li>
<li>连接超时</li>
<li>流下载</li>
<li>支持 <code class="docutils literal"><span class="pre">.netrc</span></code></li>
<li>分块请求</li>
<li>线程安全</li>
</ul>
<p>Requests 支持 Python 2.6—3.5，而且能在PyPy下完美运行。</p>
</div>
<div class="section" id="id3">
<h2>用户指南<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>这部分文档是以文字为主，从 Requests 的背景讲起，然后对 Requests 的重点功能做了逐一的介绍。</p>
<div class="toctree-wrapper compound">
<span id="document-user/intro"></span><div class="section" id="introduction">
<span id="id1"></span><h3>简介<a class="headerlink" href="#introduction" title="永久链接至标题">¶</a></h3>
<div class="section" id="id2">
<h4>开发哲学<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h4>
<p>Requests 是以 <span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0020"><strong>PEP 20</strong></a> 的箴言为中心开发的</p>
<ol class="arabic simple">
<li>Beautiful is better than ugly.(美丽优于丑陋)</li>
<li>Explicit is better than implicit.(直白优于含蓄)</li>
<li>Simple is better than complex.(简单优于复杂)</li>
<li>Complex is better than complicated.(复杂优于繁琐)</li>
<li>Readability counts.(可读性很重要)</li>
</ol>
<p>对于 Requests 所有的贡献都应牢记这些重要的准则。</p>
</div>
<div class="section" id="apache2">
<span id="id3"></span><h4>Apache2 协议<a class="headerlink" href="#apache2" title="永久链接至标题">¶</a></h4>
<p>现在你找到的许多开源项目都是以 <a class="reference external" href="http://www.opensource.org/licenses/gpl-license.php">GPL 协议</a>发布的。虽然 GPL 有它自己的一席之地，
但在开始你的下一个开源项目时，GPL 应该不再是你的默认选择。</p>
<p>项目发行于 GPL 协议之后，就不能用于任何本身没开源的商业产品中。</p>
<p>MIT、BSD、ISC、Apache2 许可都是优秀的替代品，它们允许你的开源软件自由应用在私有闭源软件中。</p>
<p>Requests 的发布许可为 <a class="reference external" href="http://opensource.org/licenses/Apache-2.0">Apache2 License</a>.</p>
</div>
<div class="section" id="requests">
<h4>Requests 协议<a class="headerlink" href="#requests" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><p>Copyright 2016 Kenneth Reitz</p>
<blockquote>
<div><p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div></blockquote>
</div></blockquote>
</div>
</div>
<span id="document-user/install"></span><div class="section" id="install">
<span id="id1"></span><h3>安装<a class="headerlink" href="#install" title="永久链接至标题">¶</a></h3>
<p>这部分文档包含了 Requests 的安装过程，使用任何软件的第一步就是正确地安装它。</p>
<div class="section" id="pip-install-requests">
<h4>Pip Install Requests<a class="headerlink" href="#pip-install-requests" title="永久链接至标题">¶</a></h4>
<p>要安装 Requests，只要在你的终端中运行这个简单命令即可：</p>
<dl class="docutils">
<dt>::</dt>
<dd>$ pip install requests</dd>
</dl>
<p>如果你没有安装 pip （啧啧），这个 <a class="reference external" href="http://docs.python-guide.org/en/latest/starting/installation/">Python installation guide</a>
可以带你完成这一流程。</p>
</div>
<div class="section" id="id2">
<h4>获得源码<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h4>
<p>Requests 一直在 Github 上积极地开发，你可以一直从<a class="reference external" href="https://github.com/kennethreitz/requests">这里</a>获取到代码。</p>
<p>你可以克隆公共版本库：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>git clone git://github.com/kennethreitz/requests.git
</pre></div>
</div>
<p>也可以下载 <a class="reference external" href="https://github.com/kennethreitz/requests/tarball/master">tarball</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -OL https://github.com/kennethreitz/requests/tarball/master
  # Windows 用户也可选择 zip 包
</pre></div>
</div>
<p>获得代码之后，你就可以轻松的将它嵌入到你的 python 包里，或者安装到你的 site-packages:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ python setup.py install
</pre></div>
</div>
</div>
</div>
<span id="document-user/quickstart"></span><div class="section" id="module-requests.models">
<span id="id1"></span><span id="quickstart"></span><h3>快速上手<a class="headerlink" href="#module-requests.models" title="永久链接至标题">¶</a></h3>
<p>迫不及待了吗？本页内容为如何入门 Requests 提供了很好的指引。其假设你已经安装了 Requests。如果还没有，去<a class="reference internal" href="index.html#install"><span>安装</span></a>一节看看吧。</p>
<p>首先，确认一下：</p>
<ul class="simple">
<li>Requests <a class="reference internal" href="index.html#install"><span>已安装</span></a></li>
<li>Requests <a class="reference internal" href="index.html#updates"><span>是最新的</span></a></li>
</ul>
<p>让我们从一些简单的示例开始吧。</p>
<div class="section" id="id2">
<h4>发送请求<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h4>
<p>使用 Requests 发送网络请求非常简单。</p>
<p>一开始要导入 Requests 模块：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
</pre></div>
</div>
<p>然后，尝试获取某个网页。本例子中，我们来获取 Github 的公共时间线：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com/timeline.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>现在，我们有一个名为 <code class="docutils literal"><span class="pre">r</span></code> 的 <a class="reference internal" href="index.html#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a>
对象。我们可以从这个对象中获取所有我们想要的信息。</p>
<p>Requests 简便的 API 意味着所有 HTTP 请求类型都是显而易见的。例如，你可以这样发送一个
HTTP POST 请求：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/post&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>漂亮，对吧？那么其他 HTTP 请求类型：PUT，DELETE，HEAD 以及 OPTIONS 又是如何的呢？都是一样的简单：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/put&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/delete&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/get&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/get&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>都很不错吧，但这也仅是 Requests 的冰山一角呢。</p>
</div>
<div class="section" id="url">
<h4>传递 URL 参数<a class="headerlink" href="#url" title="永久链接至标题">¶</a></h4>
<p>你也许经常想为 URL 的查询字符串(query string)传递某种数据。如果你是手工构建 URL，那么数据会以键/值对的形式置于 URL 中，跟在一个问号的后面。例如， <code class="docutils literal"><span class="pre">httpbin.org/get?key=val</span></code>。
Requests 允许你使用 <code class="docutils literal"><span class="pre">params</span></code> 关键字参数，以一个字典来提供这些参数。举例来说，如果你想传递
<code class="docutils literal"><span class="pre">key1=value1</span></code> 和 <code class="docutils literal"><span class="pre">key2=value2</span></code> 到 <code class="docutils literal"><span class="pre">httpbin.org/get</span></code> ，那么你可以使用如下代码：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;key1&#39;</span><span class="p">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span><span class="p">:</span> <span class="s1">&#39;value2&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/get&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>
</div>
<p>通过打印输出该 URL，你能看到 URL 已被正确编码：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="go">http://httpbin.org/get?key2=value2&amp;key1=value1</span>
</pre></div>
</div>
<p>注意字典里值为 <code class="docutils literal"><span class="pre">None</span></code> 的键都不会被添加到 URL 的查询字符串里。</p>
<p>你还可以将一个列表作为值传入：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;key1&#39;</span><span class="p">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;value2&#39;</span><span class="p">,</span> <span class="s1">&#39;value3&#39;</span><span class="p">]}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/get&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="go">http://httpbin.org/get?key1=value1&amp;key2=value2&amp;key2=value3</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h4>响应内容<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h4>
<p>我们能读取服务器响应的内容。再次以 GitHub 时间线为例：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com/timeline.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="go">u&#39;[{&quot;repository&quot;:{&quot;open_issues&quot;:0,&quot;url&quot;:&quot;https://github.com/...</span>
</pre></div>
</div>
<p>Requests 会自动解码来自服务器的内容。大多数 unicode 字符集都能被无缝地解码。</p>
<p>请求发出后，Requests 会基于 HTTP 头部对响应的编码作出有根据的推测。当你访问 <code class="docutils literal"><span class="pre">r.text</span></code>
之时，Requests 会使用其推测的文本编码。你可以找出 Requests 使用了什么编码，并且能够使用
<code class="docutils literal"><span class="pre">r.encoding</span></code> 属性来改变它：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">encoding</span>
<span class="go">&#39;utf-8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;ISO-8859-1&#39;</span>
</pre></div>
</div>
<p>如果你改变了编码，每当你访问 <code class="docutils literal"><span class="pre">r.text</span></code> ，Request 都将会使用 <code class="docutils literal"><span class="pre">r.encoding</span></code>
的新值。你可能希望在使用特殊逻辑计算出文本的编码的情况下来修改编码。比如 HTTP 和 XML
自身可以指定编码。这样的话，你应该使用 <code class="docutils literal"><span class="pre">r.content</span></code> 来找到编码，然后设置 <code class="docutils literal"><span class="pre">r.encoding</span></code>
为相应的编码。这样就能使用正确的编码解析 <code class="docutils literal"><span class="pre">r.text</span></code> 了。</p>
<p>在你需要的情况下，Requests 也可以使用定制的编码。如果你创建了自己的编码，并使用
<code class="docutils literal"><span class="pre">codecs</span></code> 模块进行注册，你就可以轻松地使用这个解码器名称作为 <code class="docutils literal"><span class="pre">r.encoding</span></code> 的值，
然后由 Requests 来为你处理编码。</p>
</div>
<div class="section" id="id4">
<h4>二进制响应内容<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h4>
<p>你也能以字节的方式访问请求响应体，对于非文本请求：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">content</span>
<span class="go">b&#39;[{&quot;repository&quot;:{&quot;open_issues&quot;:0,&quot;url&quot;:&quot;https://github.com/...</span>
</pre></div>
</div>
<p>Requests 会自动为你解码 <code class="docutils literal"><span class="pre">gzip</span></code> 和 <code class="docutils literal"><span class="pre">deflate</span></code> 传输编码的响应数据。</p>
<p>例如，以请求返回的二进制数据创建一张图片，你可以使用如下代码：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="json">
<h4>JSON 响应内容<a class="headerlink" href="#json" title="永久链接至标题">¶</a></h4>
<p>Requests 中也有一个内置的 JSON 解码器，助你处理 JSON 数据：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com/timeline.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="go">[{u&#39;repository&#39;: {u&#39;open_issues&#39;: 0, u&#39;url&#39;: &#39;https://github.com/...</span>
</pre></div>
</div>
<p>如果 JSON 解码失败， <code class="docutils literal"><span class="pre">r.json</span></code> 就会抛出一个异常。例如，相应内容是 401 (Unauthorized)，尝试访问 <code class="docutils literal"><span class="pre">r.json</span></code> 将会抛出 <code class="docutils literal"><span class="pre">ValueError:</span> <span class="pre">No</span> <span class="pre">JSON</span> <span class="pre">object</span> <span class="pre">could</span> <span class="pre">be</span> <span class="pre">decoded</span></code> 异常。</p>
</div>
<div class="section" id="id5">
<h4>原始响应内容<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h4>
<p>在罕见的情况下，你可能想获取来自服务器的原始套接字响应，那么你可以访问 <code class="docutils literal"><span class="pre">r.raw</span></code>。
如果你确实想这么干，那请你确保在初始请求中设置了 <code class="docutils literal"><span class="pre">stream=True</span></code>。具体你可以这么做：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com/timeline.json&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">raw</span>
<span class="go">&lt;requests.packages.urllib3.response.HTTPResponse object at 0x101194810&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">raw</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">&#39;\x1f\x8b\x08\x00\x00\x00\x00\x00\x00\x03&#39;</span>
</pre></div>
</div>
<p>但一般情况下，你应该以下面的模式将文本流保存到文件：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">):</span>
        <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</pre></div>
</div>
<p>使用 <code class="docutils literal"><span class="pre">Response.iter_content</span></code> 将会处理大量你直接使用 <code class="docutils literal"><span class="pre">Response.raw</span></code> 不得不处理的。
当流下载时，上面是优先推荐的获取内容方式。</p>
</div>
<div class="section" id="id6">
<h4>定制请求头<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h4>
<p>如果你想为请求添加 HTTP 头部，只要简单地传递一个 <code class="docutils literal"><span class="pre">dict</span></code> 给 <code class="docutils literal"><span class="pre">headers</span></code> 参数就可以了。</p>
<p>例如，在前一个示例中我们没有指定 content-type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.github.com/some/endpoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user-agent&#39;</span><span class="p">:</span> <span class="s1">&#39;my-app/0.0.1&#39;</span><span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</pre></div>
</div>
<p>注意: 定制 header 的优先级低于某些特定的信息源，例如：</p>
<ul class="simple">
<li>如果在 <code class="docutils literal"><span class="pre">.netrc</span></code> 中设置了用户认证信息，使用 <cite>headers=</cite> 设置的授权就不会生效。而如果设置了
<code class="docutils literal"><span class="pre">auth=</span></code> 参数，``.netrc`` 的设置就无效了。</li>
<li>如果被重定向到别的主机，授权 header 就会被删除。</li>
<li>代理授权 header 会被 URL 中提供的代理身份覆盖掉。</li>
<li>在我们能判断内容长度的情况下，header 的 Content-Length 会被改写。</li>
</ul>
<p>更进一步讲，Requests 不会基于定制 header 的具体情况改变自己的行为。只不过在最后的请求中，所有的
header 信息都会被传递进去。</p>
<p>注意: 所有的 header 值必须是 <code class="docutils literal"><span class="pre">string</span></code>、bytestring 或者 unicode。尽管传递 unicode
header 也是允许的，但不建议这样做。</p>
</div>
<div class="section" id="post">
<h4>更加复杂的 POST 请求<a class="headerlink" href="#post" title="永久链接至标题">¶</a></h4>
<p>通常，你想要发送一些编码为表单形式的数据——非常像一个 HTML 表单。要实现这个，只需简单地传递一个字典给 <cite>data</cite> 参数。你的数据字典在发出请求时会自动编码为表单形式：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;key1&#39;</span><span class="p">:</span> <span class="s1">&#39;value1&#39;</span><span class="p">,</span> <span class="s1">&#39;key2&#39;</span><span class="p">:</span> <span class="s1">&#39;value2&#39;</span><span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/post&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  ...</span>
<span class="go">  &quot;form&quot;: {</span>
<span class="go">    &quot;key2&quot;: &quot;value2&quot;,</span>
<span class="go">    &quot;key1&quot;: &quot;value1&quot;</span>
<span class="go">  },</span>
<span class="go">  ...</span>
<span class="go">}</span>
</pre></div>
</div>
<p>很多时候你想要发送的数据并非编码为表单形式的。如果你传递一个 <code class="docutils literal"><span class="pre">string</span></code> 而不是一个 <code class="docutils literal"><span class="pre">dict</span></code>，那么数据会被直接发布出去。</p>
<p>例如，Github API v3 接受编码为 JSON 的 POST/PATCH 数据：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.github.com/some/endpoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;some&#39;</span><span class="p">:</span> <span class="s1">&#39;data&#39;</span><span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">))</span>
</pre></div>
</div>
<p>此处除了可以自行对 <code class="docutils literal"><span class="pre">dict</span></code> 进行编码，你还可以使用 <code class="docutils literal"><span class="pre">json</span></code> 参数直接传递，然后它就会被自动编码。这是 2.4.2 版的新加功能：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.github.com/some/endpoint&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;some&#39;</span><span class="p">:</span> <span class="s1">&#39;data&#39;</span><span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="post-multipart-encoded">
<h4>POST一个多部分编码(Multipart-Encoded)的文件<a class="headerlink" href="#post-multipart-encoded" title="永久链接至标题">¶</a></h4>
<p>Requests 使得上传多部分编码文件变得很简单：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://httpbin.org/post&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;report.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="go">{</span>
<span class="go">  ...</span>
<span class="go">  &quot;files&quot;: {</span>
<span class="go">    &quot;file&quot;: &quot;&lt;censored...binary...data&gt;&quot;</span>
<span class="go">  },</span>
<span class="go">  ...</span>
<span class="go">}</span>
</pre></div>
</div>
<p>你可以显式地设置文件名，文件类型和请求头：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://httpbin.org/post&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;report.xls&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;report.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">),</span> <span class="s1">&#39;application/vnd.ms-excel&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;Expires&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">})}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="go">{</span>
<span class="go">  ...</span>
<span class="go">  &quot;files&quot;: {</span>
<span class="go">    &quot;file&quot;: &quot;&lt;censored...binary...data&gt;&quot;</span>
<span class="go">  },</span>
<span class="go">  ...</span>
<span class="go">}</span>
</pre></div>
</div>
<p>如果你想，你也可以发送作为文件来接收的字符串：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://httpbin.org/post&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;report.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;some,data,to,send</span><span class="se">\n</span><span class="s1">another,row,to,send</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="go">{</span>
<span class="go">  ...</span>
<span class="go">  &quot;files&quot;: {</span>
<span class="go">    &quot;file&quot;: &quot;some,data,to,send\\nanother,row,to,send\\n&quot;</span>
<span class="go">  },</span>
<span class="go">  ...</span>
<span class="go">}</span>
</pre></div>
</div>
<p>如果你发送一个非常大的文件作为 <code class="docutils literal"><span class="pre">multipart/form-data</span></code> 请求，你可能希望将请求做成数据流。默认下 <code class="docutils literal"><span class="pre">requests</span></code> 不支持, 但有个第三方包 <code class="docutils literal"><span class="pre">requests-toolbelt</span></code> 是支持的。你可以阅读
<a class="reference external" href="https://toolbelt.rtfd.org">toolbelt 文档</a> 来了解使用方法。</p>
<p>在一个请求中发送多文件参考 <a class="reference internal" href="index.html#advanced"><span>高级用法</span></a> 一节。</p>
<div class="admonition- admonition">
<p class="first admonition-title">警告</p>
<p class="last">我们强烈建议你用二进制模式(<a class="reference external" href="https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files">binary mode</a>)打开文件。这是因为 Requests 可能会试图为你提供
<code class="docutils literal"><span class="pre">Content-Length</span></code> header，在它这样做的时候，这个值会被设为文件的字节数（<em>bytes</em>）。如果用文本模式(text mode)打开文件，就可能会发生错误。</p>
</div>
</div>
<div class="section" id="id7">
<h4>响应状态码<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h4>
<p>我们可以检测响应状态码：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">200</span>
</pre></div>
</div>
<p>为方便引用，Requests还附带了一个内置的状态码查询对象：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">ok</span>
<span class="go">True</span>
</pre></div>
</div>
<p>如果发送了一个错误请求(一个 4XX 客户端错误，或者 5XX 服务器错误响应)，我们可以通过
<a class="reference internal" href="index.html#requests.Response.raise_for_status" title="requests.Response.raise_for_status"><code class="xref py py-meth docutils literal"><span class="pre">Response.raise_for_status()</span></code></a>
来抛出异常：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bad_r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/status/404&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bad_r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">404</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">bad_r</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;requests/models.py&quot;</span>, line <span class="m">832</span>, in <span class="n">raise_for_status</span>
    <span class="k">raise</span> <span class="n">http_error</span>
<span class="gr">requests.exceptions.HTTPError</span>: <span class="n">404 Client Error</span>
</pre></div>
</div>
<p>但是，由于我们的例子中 <code class="docutils literal"><span class="pre">r</span></code> 的 <code class="docutils literal"><span class="pre">status_code</span></code> 是 <code class="docutils literal"><span class="pre">200</span></code> ，当我们调用
<code class="docutils literal"><span class="pre">raise_for_status()</span></code> 时，得到的是：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="go">None</span>
</pre></div>
</div>
<p>一切都挺和谐哈。</p>
</div>
<div class="section" id="id8">
<h4>响应头<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h4>
<p>我们可以查看以一个 Python 字典形式展示的服务器响应头：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span>
<span class="go">{</span>
<span class="go">    &#39;content-encoding&#39;: &#39;gzip&#39;,</span>
<span class="go">    &#39;transfer-encoding&#39;: &#39;chunked&#39;,</span>
<span class="go">    &#39;connection&#39;: &#39;close&#39;,</span>
<span class="go">    &#39;server&#39;: &#39;nginx/1.0.4&#39;,</span>
<span class="go">    &#39;x-runtime&#39;: &#39;148ms&#39;,</span>
<span class="go">    &#39;etag&#39;: &#39;&quot;e1ca502697e5c9317743dc078f67693f&quot;&#39;,</span>
<span class="go">    &#39;content-type&#39;: &#39;application/json&#39;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>但是这个字典比较特殊：它是仅为 HTTP 头部而生的。根据
<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">RFC 2616</a>，
HTTP 头部是大小写不敏感的。</p>
<p>因此，我们可以使用任意大写形式来访问这些响应头字段：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span>
<span class="go">&#39;application/json&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;content-type&#39;</span><span class="p">)</span>
<span class="go">&#39;application/json&#39;</span>
</pre></div>
</div>
<p>它还有一个特殊点，那就是服务器可以多次接受同一 header，每次都使用不同的值。但 Requests
会将它们合并，这样它们就可以用一个映射来表示出来，参见
<a class="reference external" href="http://tools.ietf.org/html/rfc7230#section-3.2">RFC 7230</a>:</p>
<blockquote>
<div><p>A recipient MAY combine multiple header fields with the same field name
into one &quot;field-name: field-value&quot; pair, without changing the semantics
of the message, by appending each subsequent field value to the combined
field value in order, separated by a comma.</p>
<p>接收者可以合并多个相同名称的 header 栏位，把它们合为一个 &quot;field-name: field-value&quot;
配对，将每个后续的栏位值依次追加到合并的栏位值中，用逗号隔开即可，这样做不会改变信息的语义。</p>
</div></blockquote>
</div>
<div class="section" id="cookie">
<h4>Cookie<a class="headerlink" href="#cookie" title="永久链接至标题">¶</a></h4>
<p>如果某个响应中包含一些 cookie，你可以快速访问它们：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://example.com/some/cookie/setting/url&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">cookies</span><span class="p">[</span><span class="s1">&#39;example_cookie_name&#39;</span><span class="p">]</span>
<span class="go">&#39;example_cookie_value&#39;</span>
</pre></div>
</div>
<p>要想发送你的cookies到服务器，可以使用 <code class="docutils literal"><span class="pre">cookies</span></code> 参数：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://httpbin.org/cookies&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">cookies_are</span><span class="o">=</span><span class="s1">&#39;working&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">cookies</span><span class="o">=</span><span class="n">cookies</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="go">&#39;{&quot;cookies&quot;: {&quot;cookies_are&quot;: &quot;working&quot;}}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h4>重定向与请求历史<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h4>
<p>默认情况下，除了 HEAD, Requests 会自动处理所有重定向。</p>
<p>可以使用响应对象的 <code class="docutils literal"><span class="pre">history</span></code> 方法来追踪重定向。</p>
<p><a class="reference internal" href="index.html#requests.Response.history" title="requests.Response.history"><code class="xref py py-meth docutils literal"><span class="pre">Response.history</span></code></a> 是一个 <a class="reference internal" href="index.html#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> 对象的列表，为了完成请求而创建了这些对象。这个对象列表按照从最老到最近的请求进行排序。</p>
<p>例如，Github 将所有的 HTTP 请求重定向到 HTTPS：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://github.com&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">url</span>
<span class="go">&#39;https://github.com/&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">200</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">history</span>
<span class="go">[&lt;Response [301]&gt;]</span>
</pre></div>
</div>
<p>如果你使用的是GET、OPTIONS、POST、PUT、PATCH 或者 DELETE，那么你可以通过 <code class="docutils literal"><span class="pre">allow_redirects</span></code>
参数禁用重定向处理：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://github.com&#39;</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">301</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">history</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>如果你使用了 HEAD，你也可以启用重定向：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="s1">&#39;http://github.com&#39;</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">url</span>
<span class="go">&#39;https://github.com/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">history</span>
<span class="go">[&lt;Response [301]&gt;]</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h4>超时<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h4>
<p>你可以告诉 requests 在经过以 <code class="docutils literal"><span class="pre">timeout</span></code> 参数设定的秒数时间之后停止等待响应：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://github.com&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">requests.exceptions.Timeout</span>: <span class="n">HTTPConnectionPool(host=&#39;github.com&#39;, port=80): Request timed out. (timeout=0.001)</span>
</pre></div>
</div>
<div class="admonition- admonition">
<p class="first admonition-title">注意</p>
<p class="last"><code class="docutils literal"><span class="pre">timeout</span></code> 仅对连接过程有效，与响应体的下载无关。 <code class="docutils literal"><span class="pre">timeout</span></code> 并不是整个下载响应的时间限制，而是如果服务器在 <code class="docutils literal"><span class="pre">timeout</span></code> 秒内没有应答，将会引发一个异常（更精确地说，是在
<code class="docutils literal"><span class="pre">timeout</span></code> 秒内没有从基础套接字上接收到任何字节的数据时）</p>
</div>
</div>
<div class="section" id="id11">
<h4>错误与异常<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h4>
<p>遇到网络问题（如：DNS 查询失败、拒绝连接等）时，Requests 会抛出一个
<code class="xref py py-class docutils literal"><span class="pre">ConnectionError</span></code> 异常。</p>
<p>如果 HTTP 请求返回了不成功的状态码， <a class="reference internal" href="index.html#requests.Response.raise_for_status" title="requests.Response.raise_for_status"><code class="xref py py-meth docutils literal"><span class="pre">Response.raise_for_status()</span></code></a>
会抛出一个 <code class="xref py py-class docutils literal"><span class="pre">HTTPError</span></code> 异常。</p>
<p>若请求超时，则抛出一个 <code class="xref py py-class docutils literal"><span class="pre">Timeout</span></code> 异常。</p>
<p>若请求超过了设定的最大重定向次数，则会抛出一个 <code class="xref py py-class docutils literal"><span class="pre">TooManyRedirects</span></code> 异常。</p>
<p>所有Requests显式抛出的异常都继承自 <code class="xref py py-class docutils literal"><span class="pre">requests.exceptions.RequestException</span></code> 。</p>
<hr class="docutils" />
<p>准备好学习更多内容了吗？去 <a class="reference internal" href="index.html#advanced"><span>高级用法</span></a> 一节看看吧。</p>
</div>
</div>
<span id="document-user/advanced"></span><div class="section" id="advanced">
<span id="id1"></span><h3>高级用法<a class="headerlink" href="#advanced" title="永久链接至标题">¶</a></h3>
<p>本篇文档涵盖了 Requests 的一些高级特性。</p>
<div class="section" id="session-objects">
<span id="id2"></span><h4>会话对象<a class="headerlink" href="#session-objects" title="永久链接至标题">¶</a></h4>
<p>会话对象让你能够跨请求保持某些参数。它也会在同一个 Session 实例发出的所有请求之间保持 cookie，
期间使用 <code class="docutils literal"><span class="pre">urllib3</span></code> 的 <a class="reference external" href="https://urllib3.readthedocs.io/en/latest/pools.html">connection pooling</a> 功能。所以如果你向同一主机发送多个请求，底层的 TCP 连接将会被重用，从而带来显著的性能提升。 (参见 <a class="reference external" href="https://en.wikipedia.org/wiki/HTTP_persistent_connection">HTTP persistent connection</a>).</p>
<p>会话对象具有主要的 Requests API 的所有方法。</p>
<p>我们来跨请求保持一些 cookie:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>

<span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/cookies/set/sessioncookie/123456789&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://httpbin.org/cookies&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="c1"># &#39;{&quot;cookies&quot;: {&quot;sessioncookie&quot;: &quot;123456789&quot;}}&#39;</span>
</pre></div>
</div>
<p>会话也可用来为请求方法提供缺省数据。这是通过为会话对象的属性提供数据来实现的：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;pass&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;x-test&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">})</span>

<span class="c1"># both &#39;x-test&#39; and &#39;x-test2&#39; are sent</span>
<span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/headers&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x-test2&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>任何你传递给请求方法的字典都会与已设置会话层数据合并。方法层的参数覆盖会话的参数。</p>
<p>不过需要注意，就算使用了会话，方法级别的参数也不会被跨请求保持。下面的例子只会和第一个请求发送 cookie
，而非第二个：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/cookies&#39;</span><span class="p">,</span> <span class="n">cookies</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;from-my&#39;</span><span class="p">:</span> <span class="s1">&#39;browser&#39;</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="c1"># &#39;{&quot;cookies&quot;: {&quot;from-my&quot;: &quot;browser&quot;}}&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/cookies&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="c1"># &#39;{&quot;cookies&quot;: {}}&#39;</span>
</pre></div>
</div>
<p>如果你要手动为会话添加 cookie，就使用 <a class="reference internal" href="index.html#api-cookies"><span>Cookie utility 函数</span></a> 来操纵
<a class="reference internal" href="index.html#requests.Session.cookies" title="requests.Session.cookies"><code class="xref py py-attr docutils literal"><span class="pre">Session.cookies</span></code></a>。</p>
<p>会话还可以用作前后文管理器：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/cookies/set/sessioncookie/123456789&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>这样就能确保 <code class="docutils literal"><span class="pre">with</span></code> 区块退出后会话能被关闭，即使发生了异常也一样。</p>
<div class="admonition- admonition">
<p class="first admonition-title">从字典参数中移除一个值</p>
<p class="last">有时你会想省略字典参数中一些会话层的键。要做到这一点，你只需简单地在方法层参数中将那个键的值设置为 <code class="docutils literal"><span class="pre">None</span></code> ，那个键就会被自动省略掉。</p>
</div>
<p>包含在一个会话中的所有数据你都可以直接使用。学习更多细节请阅读 <a class="reference internal" href="index.html#sessionapi"><span>会话 API 文档</span></a>。</p>
</div>
<div class="section" id="request-and-response-objects">
<span id="id3"></span><h4>请求与响应对象<a class="headerlink" href="#request-and-response-objects" title="永久链接至标题">¶</a></h4>
<p>任何时候调用 requests.*() 你都在做两件主要的事情。其一，你在构建一个 <cite>Request</cite> 对象，
该对象将被发送到某个服务器请求或查询一些资源。其二，一旦 <code class="docutils literal"><span class="pre">requests</span></code> 得到一个从
服务器返回的响应就会产生一个 <code class="docutils literal"><span class="pre">Response</span></code> 对象。该响应对象包含服务器返回的所有信息，
也包含你原来创建的 <code class="docutils literal"><span class="pre">Request</span></code> 对象。如下是一个简单的请求，从 Wikipedia 的服务器得到
一些非常重要的信息：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://en.wikipedia.org/wiki/Monty_Python&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>如果想访问服务器返回给我们的响应头部信息，可以这样做：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span>
<span class="go">{&#39;content-length&#39;: &#39;56170&#39;, &#39;x-content-type-options&#39;: &#39;nosniff&#39;, &#39;x-cache&#39;:</span>
<span class="go">&#39;HIT from cp1006.eqiad.wmnet, MISS from cp1010.eqiad.wmnet&#39;, &#39;content-encoding&#39;:</span>
<span class="go">&#39;gzip&#39;, &#39;age&#39;: &#39;3080&#39;, &#39;content-language&#39;: &#39;en&#39;, &#39;vary&#39;: &#39;Accept-Encoding,Cookie&#39;,</span>
<span class="go">&#39;server&#39;: &#39;Apache&#39;, &#39;last-modified&#39;: &#39;Wed, 13 Jun 2012 01:33:50 GMT&#39;,</span>
<span class="go">&#39;connection&#39;: &#39;close&#39;, &#39;cache-control&#39;: &#39;private, s-maxage=0, max-age=0,</span>
<span class="go">must-revalidate&#39;, &#39;date&#39;: &#39;Thu, 14 Jun 2012 12:59:39 GMT&#39;, &#39;content-type&#39;:</span>
<span class="go">&#39;text/html; charset=UTF-8&#39;, &#39;x-cache-lookup&#39;: &#39;HIT from cp1006.eqiad.wmnet:3128,</span>
<span class="go">MISS from cp1010.eqiad.wmnet:80&#39;}</span>
</pre></div>
</div>
<p>然而，如果想得到发送到服务器的请求的头部，我们可以简单地访问该请求，然后是该请求的头部：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span>
<span class="go">{&#39;Accept-Encoding&#39;: &#39;identity, deflate, compress, gzip&#39;,</span>
<span class="go">&#39;Accept&#39;: &#39;*/*&#39;, &#39;User-Agent&#39;: &#39;python-requests/0.13.1&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="prepared-request">
<span id="prepared-requests"></span><h4>准备的请求 （Prepared Request）<a class="headerlink" href="#prepared-request" title="永久链接至标题">¶</a></h4>
<p>当你从 API 或者会话调用中收到一个 <a class="reference internal" href="index.html#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a>
对象时，<code class="docutils literal"><span class="pre">request</span></code> 属性其实是使用了 <code class="docutils literal"><span class="pre">PreparedRequest</span></code>。有时在发送请求之前，你需要对
body 或者 header （或者别的什么东西）做一些额外处理，下面演示了一个简单的做法：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">requests</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">Session</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>
<span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="n">header</span>
<span class="p">)</span>
<span class="n">prepped</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>

<span class="c1"># do something with prepped.body</span>
<span class="c1"># do something with prepped.headers</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">prepped</span><span class="p">,</span>
    <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span>
    <span class="n">verify</span><span class="o">=</span><span class="n">verify</span><span class="p">,</span>
    <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">,</span>
    <span class="n">cert</span><span class="o">=</span><span class="n">cert</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
<span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
</pre></div>
</div>
<p>由于你没有对 <code class="docutils literal"><span class="pre">Request</span></code> 对象做什么特殊事情，你立即准备和修改了 <code class="docutils literal"><span class="pre">PreparedRequest</span></code>
对象，然后把它和别的参数一起发送到 <code class="docutils literal"><span class="pre">requests.*</span></code> 或者 <code class="docutils literal"><span class="pre">Session.*</span></code>。</p>
<p>然而，上述代码会失去 Requests <a class="reference internal" href="index.html#requests.Session" title="requests.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> 对象的一些优势，
尤其 <a class="reference internal" href="index.html#requests.Session" title="requests.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> 级别的状态，例如 cookie 就不会被应用到你的请求上去。要获取一个带有状态的 <a class="reference internal" href="index.html#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a>，
请用 <a class="reference internal" href="index.html#requests.Session.prepare_request" title="requests.Session.prepare_request"><code class="xref py py-meth docutils literal"><span class="pre">Session.prepare_request()</span></code></a> 取代
<a class="reference internal" href="index.html#requests.Request.prepare" title="requests.Request.prepare"><code class="xref py py-meth docutils literal"><span class="pre">Request.prepare()</span></code></a> 的调用，如下所示：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>from requests import Request, Session

s = Session()
req = Request(&#39;GET&#39;,  url,
    data=data
    headers=headers
)

prepped = s.prepare_request(req)

# do something with prepped.body
# do something with prepped.headers

resp = s.send(prepped,
    stream=stream,
    verify=verify,
    proxies=proxies,
    cert=cert,
    timeout=timeout
)

print(resp.status_code)
</pre></div>
</div>
</div>
<div class="section" id="ssl">
<span id="verification"></span><h4>SSL 证书验证<a class="headerlink" href="#ssl" title="永久链接至标题">¶</a></h4>
<p>Requests 可以为 HTTPS 请求验证 SSL 证书，就像 web 浏览器一样。要想检查某个主机的 SSL
证书，你可以使用 <code class="docutils literal"><span class="pre">verify</span></code> 参数:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://kennethreitz.com&#39;</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">requests.exceptions.SSLError: hostname &#39;kennethreitz.com&#39; doesn&#39;t match either of &#39;*.herokuapp.com&#39;, &#39;herokuapp.com&#39;</span>
</pre></div>
</div>
<p>在该域名上我没有设置 SSL，所以失败了。但 Github 设置了 SSL:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com&#39;</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<p>对于私有证书，你也可以传递一个 CA_BUNDLE 文件的路径给 <code class="docutils literal"><span class="pre">verify</span></code>。你也可以设置
<code class="docutils literal"><span class="pre">REQUEST_CA_BUNDLE</span></code> 环境变量。</p>
<p>如果你将 <code class="docutils literal"><span class="pre">verify</span></code> 设置为 False，Requests 也能忽略对 SSL 证书的验证。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://kennethreitz.com&#39;</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<p>默认情况下， <code class="docutils literal"><span class="pre">verify</span></code> 是设置为 True 的。选项 <code class="docutils literal"><span class="pre">verify</span></code> 仅应用于主机证书。</p>
<p>你也可以指定一个本地证书用作客户端证书，可以是单个文件（包含密钥和证书）或一个包含两个文件路径的元组:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://kennethreitz.com&#39;</span><span class="p">,</span> <span class="n">cert</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;/path/server.crt&#39;</span><span class="p">,</span> <span class="s1">&#39;/path/key&#39;</span><span class="p">))</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<p>如果你指定了一个错误路径或一个无效的证书:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://kennethreitz.com&#39;</span><span class="p">,</span> <span class="n">cert</span><span class="o">=</span><span class="s1">&#39;/wrong_path/server.pem&#39;</span><span class="p">)</span>
<span class="go">SSLError: [Errno 336265225] _ssl.c:347: error:140B0009:SSL routines:SSL_CTX_use_PrivateKey_file:PEM lib</span>
</pre></div>
</div>
<div class="admonition- admonition">
<p class="first admonition-title">警告</p>
<p class="last">本地证书的私有 key 必须是解密状态。目前，Requests 不支持使用加密的 key。</p>
</div>
</div>
<div class="section" id="ca">
<span id="ca-certificates"></span><h4>CA 证书<a class="headerlink" href="#ca" title="永久链接至标题">¶</a></h4>
<p>Requests 默认附带了一套它信任的根证书，来自于 <a class="reference external" href="https://hg.mozilla.org/mozilla-central/raw-file/tip/security/nss/lib/ckfw/builtins/certdata.txt">Mozilla trust store</a>。然而它们在每次
Requests 更新时才会更新。这意味着如果你固定使用某一版本的 Requests，你的证书有可能已经
太旧了。</p>
<p>从 Requests 2.4.0 版之后，如果系统中装了 <a class="reference external" href="http://certifi.io/">certifi</a>  包，Requests 会试图使用它里边的
证书。这样用户就可以在不修改代码的情况下更新他们的可信任证书。</p>
<p>为了安全起见，我们建议你经常更新 certifi！</p>
</div>
<div class="section" id="body-content-workflow">
<span id="id4"></span><h4>响应体内容工作流<a class="headerlink" href="#body-content-workflow" title="永久链接至标题">¶</a></h4>
<p>默认情况下，当你进行网络请求后，响应体会立即被下载。你可以通过 <code class="docutils literal"><span class="pre">stream</span></code> 参数覆盖这个行为，推迟下载响应体直到访问 <code class="xref py py-class docutils literal"><span class="pre">Response.content</span></code> 属性：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tarball_url</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/kennethreitz/requests/tarball/master&#39;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tarball_url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>此时仅有响应头被下载下来了，连接保持打开状态，因此允许我们根据条件获取内容：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;content-length&#39;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">TOO_LONG</span><span class="p">:</span>
  <span class="n">content</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span>
  <span class="o">...</span>
</pre></div>
</div>
<p>你可以进一步使用 <a class="reference internal" href="index.html#requests.Response.iter_content" title="requests.Response.iter_content"><code class="xref py py-class docutils literal"><span class="pre">Response.iter_content</span></code></a>
和 <a class="reference internal" href="index.html#requests.Response.iter_lines" title="requests.Response.iter_lines"><code class="xref py py-class docutils literal"><span class="pre">Response.iter_lines</span></code></a>
方法来控制工作流，或者以 <a class="reference internal" href="index.html#requests.Response.raw" title="requests.Response.raw"><code class="xref py py-class docutils literal"><span class="pre">Response.raw</span></code></a>
从底层 urllib3 的 <code class="xref py py-class docutils literal"><span class="pre">urllib3.HTTPResponse</span> <span class="pre">&lt;urllib3.response.HTTPResponse</span></code> 读取。</p>
<p>如果你在请求中把 <code class="docutils literal"><span class="pre">stream</span></code> 设为 <code class="docutils literal"><span class="pre">True</span></code>，Requests 无法将连接释放回连接池，除非你
消耗了所有的数据，或者调用了 <a class="reference internal" href="index.html#requests.Response.close" title="requests.Response.close"><code class="xref py py-class docutils literal"><span class="pre">Response.close</span></code></a>。
这样会带来连接效率低下的问题。如果你发现你在使用 <code class="docutils literal"><span class="pre">stream=True</span></code> 的同时还在部分读取请求的
body（或者完全没有读取 body），那么你就应该考虑使用 <code class="docutils literal"><span class="pre">contextlib.closing</span></code> (<a class="reference external" href="http://docs.python.org/2/library/contextlib.html#contextlib.closing">文档</a>)，
如下所示：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>from contextlib import closing

with closing(requests.get(&#39;http://httpbin.org/get&#39;, stream=True)) as r:
    # 在此处理响应。
</pre></div>
</div>
</div>
<div class="section" id="keep-alive">
<span id="id6"></span><h4>保持活动状态（持久连接）<a class="headerlink" href="#keep-alive" title="永久链接至标题">¶</a></h4>
<p>好消息——归功于 urllib3，同一会话内的持久连接是完全自动处理的！同一会话内你发出的任何请求都会自动复用恰当的连接！</p>
<p>注意：只有所有的响应体数据被读取完毕连接才会被释放为连接池；所以确保将 <code class="docutils literal"><span class="pre">stream</span></code>
设置为 <code class="docutils literal"><span class="pre">False</span></code> 或读取 <code class="docutils literal"><span class="pre">Response</span></code> 对象的 <code class="docutils literal"><span class="pre">content</span></code> 属性。</p>
</div>
<div class="section" id="streaming-uploads">
<span id="id7"></span><h4>流式上传<a class="headerlink" href="#streaming-uploads" title="永久链接至标题">¶</a></h4>
<p>Requests支持流式上传，这允许你发送大的数据流或文件而无需先把它们读入内存。要使用流式上传，仅需为你的请求体提供一个类文件对象即可：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;massive-body&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;http://some.url/streamed&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition- admonition">
<p class="first admonition-title">警告</p>
<p class="last">我们强烈建议你用二进制模式（<a class="reference external" href="https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files">binary mode</a>）打开文件。这是因为 requests 可能会为你提供 header
中的 <code class="docutils literal"><span class="pre">Content-Length</span></code>，在这种情况下该值会被设为文件的<strong>字节数</strong>。如果你用<strong>文本模式</strong>打开文件，就可能碰到错误。</p>
</div>
</div>
<div class="section" id="chunk-encoding">
<span id="id8"></span><h4>块编码请求<a class="headerlink" href="#chunk-encoding" title="永久链接至标题">¶</a></h4>
<p>对于出去和进来的请求，Requests 也支持分块传输编码。要发送一个块编码的请求，仅需为你的请求体提供一个生成器（或任意没有具体长度的迭代器）：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
    <span class="k">yield</span> <span class="s1">&#39;hi&#39;</span>
    <span class="k">yield</span> <span class="s1">&#39;there&#39;</span>

<span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;http://some.url/chunked&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">gen</span><span class="p">())</span>
</pre></div>
</div>
<p>对于分块的编码请求，我们最好使用 <code class="xref py py-meth docutils literal"><span class="pre">Response.iter_content()</span></code>
对其数据进行迭代。在理想情况下，你的 request 会设置 <code class="docutils literal"><span class="pre">stream=True</span></code>，这样你就可以通过调用
<code class="docutils literal"><span class="pre">iter_content</span></code> 并将分块大小参数设为 <code class="docutils literal"><span class="pre">None</span></code>，从而进行分块的迭代。如果你要设置分块的最大体积，你可以把分块大小参数设为任意整数。</p>
</div>
<div class="section" id="post">
<span id="multipart"></span><h4>POST 多个分块编码的文件<a class="headerlink" href="#post" title="永久链接至标题">¶</a></h4>
<p>你可以在一个请求中发送多个文件。例如，假设你要上传多个图像文件到一个 HTML 表单，使用一个多文件 field 叫做 &quot;images&quot;:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;input type=&quot;file&quot; name=&quot;images&quot; multiple=&quot;true&quot; required=&quot;true&quot;/&gt;
</pre></div>
</div>
<p>要实现，只要把文件设到一个元组的列表中，其中元组结构为 <code class="docutils literal"><span class="pre">(form_field_name,</span> <span class="pre">file_info)</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://httpbin.org/post&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">multiple_files</span> <span class="o">=</span> <span class="p">[</span>
<span class="go">        (&#39;images&#39;, (&#39;foo.png&#39;, open(&#39;foo.png&#39;, &#39;rb&#39;), &#39;image/png&#39;)),</span>
<span class="go">        (&#39;images&#39;, (&#39;bar.png&#39;, open(&#39;bar.png&#39;, &#39;rb&#39;), &#39;image/png&#39;))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">multiple_files</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="go">{</span>
<span class="go">  ...</span>
<span class="go">  &#39;files&#39;: {&#39;images&#39;: &#39;data:image/png;base64,iVBORw ....&#39;}</span>
<span class="go">  &#39;Content-Type&#39;: &#39;multipart/form-data; boundary=3131623adb2043caaeb5538cc7aa0b3a&#39;,</span>
<span class="go">  ...</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="admonition- admonition">
<p class="first admonition-title">警告</p>
<p class="last">我们强烈建议你用二进制模式（<a class="reference external" href="https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files">binary mode</a>）打开文件。这是因为 requests 可能会为你提供 header
中的 <code class="docutils literal"><span class="pre">Content-Length</span></code>，在这种情况下该值会被设为文件的<strong>字节数</strong>。如果你用<strong>文本模式</strong>打开文件，就可能碰到错误。</p>
</div>
</div>
<div class="section" id="event-hooks">
<span id="id10"></span><h4>事件挂钩<a class="headerlink" href="#event-hooks" title="永久链接至标题">¶</a></h4>
<p>Requests有一个钩子系统，你可以用来操控部分请求过程，或信号事件处理。</p>
<p>可用的钩子:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">response</span></code>:</dt>
<dd>从一个请求产生的响应</dd>
</dl>
<p>你可以通过传递一个 <code class="docutils literal"><span class="pre">{hook_name:</span> <span class="pre">callback_function}</span></code> 字典给 <code class="docutils literal"><span class="pre">hooks</span></code> 请求参数
为每个请求分配一个钩子函数：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">hooks</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">print_url</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">callback_function</span></code> 会接受一个数据块作为它的第一个参数。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_url</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
<p>若执行你的回调函数期间发生错误，系统会给出一个警告。</p>
<p>若回调函数返回一个值，默认以该值替换传进来的数据。若函数未返回任何东西，
也没有什么其他的影响。</p>
<p>我们来在运行期间打印一些请求方法的参数：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org&#39;</span><span class="p">,</span> <span class="n">hooks</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">print_url</span><span class="p">))</span>
<span class="go">http://httpbin.org</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-auth">
<span id="id11"></span><h4>自定义身份验证<a class="headerlink" href="#custom-auth" title="永久链接至标题">¶</a></h4>
<p>Requests 允许你使用自己指定的身份验证机制。</p>
<p>任何传递给请求方法的 <code class="docutils literal"><span class="pre">auth</span></code> 参数的可调用对象，在请求发出之前都有机会修改请求。</p>
<p>自定义的身份验证机制是作为 <code class="docutils literal"><span class="pre">requests.auth.AuthBase</span></code> 的子类来实现的，也非常容易定义。Requests
在 <code class="docutils literal"><span class="pre">requests.auth</span></code> 中提供了两种常见的的身份验证方案： <code class="docutils literal"><span class="pre">HTTPBasicAuth</span></code> 和 <code class="docutils literal"><span class="pre">HTTPDigestAuth</span></code> 。</p>
<p>假设我们有一个web服务，仅在 <code class="docutils literal"><span class="pre">X-Pizza</span></code> 头被设置为一个密码值的情况下才会有响应。虽然这不太可能，但就以它为例好了。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">AuthBase</span>

<span class="k">class</span> <span class="nc">PizzaAuth</span><span class="p">(</span><span class="n">AuthBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Attaches HTTP Pizza Authentication to the given Request object.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
        <span class="c1"># setup any auth-related data here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="c1"># modify and return the request</span>
        <span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Pizza&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>
        <span class="k">return</span> <span class="n">r</span>
</pre></div>
</div>
<p>然后就可以使用我们的PizzaAuth来进行网络请求:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://pizzabin.org/admin&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">PizzaAuth</span><span class="p">(</span><span class="s1">&#39;kenneth&#39;</span><span class="p">))</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="streaming-requests">
<span id="id12"></span><h4>流式请求<a class="headerlink" href="#streaming-requests" title="永久链接至标题">¶</a></h4>
<p>使用 <a class="reference internal" href="index.html#requests.Response.iter_lines" title="requests.Response.iter_lines"><code class="xref py py-class docutils literal"><span class="pre">requests.Response.iter_lines()</span></code></a> 你可以很方便地对流式 API
（例如 <a class="reference external" href="https://dev.twittercom/docs/streaming-api">Twitter 的流式 API</a> ）
进行迭代。简单地设置 <code class="docutils literal"><span class="pre">stream</span></code> 为 <code class="docutils literal"><span class="pre">True</span></code> 便可以使用 <a class="reference internal" href="index.html#requests.Response.iter_lines" title="requests.Response.iter_lines"><code class="xref py py-class docutils literal"><span class="pre">iter_lines()</span></code></a>
对相应进行迭代：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/stream/20&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_lines</span><span class="p">():</span>

    <span class="c1"># filter out keep-alive new lines</span>
    <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition- admonition">
<p class="first admonition-title">警告</p>
<p><a class="reference internal" href="index.html#requests.Response.iter_lines" title="requests.Response.iter_lines"><code class="xref py py-class docutils literal"><span class="pre">iter_lines()</span></code></a> 不保证重进入时的安全性。多次调用该方法
会导致部分收到的数据丢失。如果你要在多处调用它，就应该使用生成的迭代器对象:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">lines</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_lines</span><span class="p">()</span>
<span class="c1"># Save the first line for later or just skip it</span>

<span class="n">first_line</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="proxies">
<span id="id13"></span><h4>代理<a class="headerlink" href="#proxies" title="永久链接至标题">¶</a></h4>
<p>如果需要使用代理，你可以通过为任意请求方法提供 <code class="docutils literal"><span class="pre">proxies</span></code> 参数来配置单个请求:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">proxies</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;http&quot;</span><span class="p">:</span> <span class="s2">&quot;http://10.10.1.10:3128&quot;</span><span class="p">,</span>
  <span class="s2">&quot;https&quot;</span><span class="p">:</span> <span class="s2">&quot;http://10.10.1.10:1080&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://example.org&quot;</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
</pre></div>
</div>
<p>你也可以通过环境变量 <code class="docutils literal"><span class="pre">HTTP_PROXY</span></code> 和 <code class="docutils literal"><span class="pre">HTTPS_PROXY</span></code> 来配置代理。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ export HTTP_PROXY=&quot;http://10.10.1.10:3128&quot;
$ export HTTPS_PROXY=&quot;http://10.10.1.10:1080&quot;

$ python
&gt;&gt;&gt; import requests
&gt;&gt;&gt; requests.get(&quot;http://example.org&quot;)
</pre></div>
</div>
<p>若你的代理需要使用HTTP Basic Auth，可以使用 <cite>http://user:password&#64;host/</cite> 语法：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">proxies</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;http&quot;</span><span class="p">:</span> <span class="s2">&quot;http://user:pass@10.10.1.10:3128/&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>要为某个特定的连接方式或者主机设置代理，使用 <cite>scheme://hostname</cite> 作为 key，
它会针对指定的主机和连接方式进行匹配。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">proxies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;http://10.20.1.128&#39;</span><span class="p">:</span> <span class="s1">&#39;http://10.10.1.10:5323&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>注意，代理 URL 必须包含连接方式。</p>
<div class="section" id="socks">
<h5>SOCKS<a class="headerlink" href="#socks" title="永久链接至标题">¶</a></h5>
<div class="versionadded">
<p><span class="versionmodified">2.10.0 新版功能.</span></p>
</div>
<p>除了基本的 HTTP 代理，Request 还支持 SOCKS 协议的代理。这是一个可选功能，若要使用，
你需要安装第三方库。</p>
<p>你可以用 <code class="docutils literal"><span class="pre">pip</span></code> 获取依赖:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip install requests<span class="o">[</span>socks<span class="o">]</span>
</pre></div>
</div>
<p>安装好依赖以后，使用 SOCKS 代理和使用 HTTP 代理一样简单：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">proxies</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;http&#39;</span><span class="p">:</span> <span class="s1">&#39;socks5://user:pass@host:port&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https&#39;</span><span class="p">:</span> <span class="s1">&#39;socks5://user:pass@host:port&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="compliance">
<span id="id14"></span><h4>合规性<a class="headerlink" href="#compliance" title="永久链接至标题">¶</a></h4>
<p>Requests 符合所有相关的规范和 RFC，这样不会为用户造成不必要的困难。但这种对规范的考虑导致一些行为对于不熟悉相关规范的人来说看似有点奇怪。</p>
<div class="section" id="id15">
<h5>编码方式<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h5>
<p>当你收到一个响应时，Requests 会猜测响应的编码方式，用于在你调用 <a class="reference internal" href="index.html#requests.Response.text" title="requests.Response.text"><code class="xref py py-attr docutils literal"><span class="pre">Response.text</span></code></a> 方法时对响应进行解码。Requests 首先在 HTTP
头部检测是否存在指定的编码方式，如果不存在，则会使用
<a class="reference external" href="http://pypi.python.org/pypi/charade">charade</a> 来尝试猜测编码方式。</p>
<p>只有当 HTTP 头部不存在明确指定的字符集，并且 <code class="docutils literal"><span class="pre">Content-Type</span></code> 头部字段包含 <code class="docutils literal"><span class="pre">text</span></code> 值之时，
Requests 才不去猜测编码方式。在这种情况下，
<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.7.1">RFC 2616</a>
指定默认字符集必须是 <code class="docutils literal"><span class="pre">ISO-8859-1</span></code> 。Requests 遵从这一规范。如果你需要一种不同的编码方式，你可以手动设置 <a class="reference internal" href="index.html#requests.Response.encoding" title="requests.Response.encoding"><code class="xref py py-attr docutils literal"><span class="pre">Response.encoding</span></code></a> 属性，或使用原始的
<a class="reference internal" href="index.html#requests.Response.content" title="requests.Response.content"><code class="xref py py-attr docutils literal"><span class="pre">Response.content</span></code></a>。</p>
</div>
</div>
<div class="section" id="http">
<span id="http-verbs"></span><h4>HTTP动词<a class="headerlink" href="#http" title="永久链接至标题">¶</a></h4>
<p>Requests 提供了几乎所有HTTP动词的功能：GET、OPTIONS、HEAD、POST、PUT、PATCH、DELETE。以下内容为使用 Requests 中的这些动词以及 Github API 提供了详细示例。</p>
<p>我将从最常使用的动词 GET 开始。HTTP GET 是一个幂等方法，从给定的 URL 返回一个资源。因而，当你试图从一个 web 位置获取数据之时，你应该使用这个动词。一个使用示例是尝试从 Github 上获取关于一个特定 commit 的信息。假设我们想获取Requests的commit <code class="docutils literal"><span class="pre">a050faf</span></code> 的信息。我们可以这样去做：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/repos/kennethreitz/requests/git/commits/a050faf084662f3a352dd1a941f2c7c9f886d4ad&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>我们应该确认 GitHub 是否正确响应。如果正确响应，我们想弄清响应内容是什么类型的。像这样去做：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">ok</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;content-type&#39;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="go">application/json; charset=utf-8</span>
</pre></div>
</div>
<p>可见，GitHub 返回了 JSON 数据，非常好，这样就可以使用 <code class="docutils literal"><span class="pre">r.json</span></code> 方法把这个返回的数据解析成
Python 对象。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">commit_data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">commit_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[u&#39;committer&#39;, u&#39;author&#39;, u&#39;url&#39;, u&#39;tree&#39;, u&#39;sha&#39;, u&#39;parents&#39;, u&#39;message&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">commit_data</span><span class="p">[</span><span class="s1">u&#39;committer&#39;</span><span class="p">]</span>
<span class="go">{u&#39;date&#39;: u&#39;2012-05-10T11:10:50-07:00&#39;, u&#39;email&#39;: u&#39;me@kennethreitz.com&#39;, u&#39;name&#39;: u&#39;Kenneth Reitz&#39;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">commit_data</span><span class="p">[</span><span class="s1">u&#39;message&#39;</span><span class="p">]</span>
<span class="go">makin&#39; history</span>
</pre></div>
</div>
<p>到目前为止，一切都非常简单。嗯，我们来研究一下 GitHub 的 API。我们可以去看看文档，但如果使用 Requests 来研究也许会更有意思一点。我们可以借助 Requests 的 OPTIONS
动词来看看我们刚使用过的 url 支持哪些 HTTP 方法。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">verbs</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verbs</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">500</span>
</pre></div>
</div>
<p>额，这是怎么回事？毫无帮助嘛！原来 GitHub，与许多 API 提供方一样，实际上并未实现
OPTIONS 方法。这是一个恼人的疏忽，但没关系，那我们可以使用枯燥的文档。然而，如果
GitHub 正确实现了 OPTIONS，那么服务器应该在响应头中返回允许用户使用的 HTTP 方法，例如：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">verbs</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="s1">&#39;http://a-good-website.com/api/cats&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">verbs</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;allow&#39;</span><span class="p">]</span>
<span class="go">GET,HEAD,POST,OPTIONS</span>
</pre></div>
</div>
<p>转而去查看文档，我们看到对于提交信息，另一个允许的方法是 POST，它会创建一个新的提交。由于我们正在使用 Requests 代码库，我们应尽可能避免对它发送笨拙的 POST。作为替代，我们来玩玩 GitHub 的 Issue 特性。</p>
<p>本篇文档是回应 Issue #482 而添加的。鉴于该问题已经存在，我们就以它为例。先获取它。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/repos/kennethreitz/requests/issues/482&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">200</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">issue</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">issue</span><span class="p">[</span><span class="s1">u&#39;title&#39;</span><span class="p">])</span>
<span class="go">Feature any http verb in docs</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">issue</span><span class="p">[</span><span class="s1">u&#39;comments&#39;</span><span class="p">])</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Cool，有 3 个评论。我们来看一下最后一个评论。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="s1">u&#39;/comments&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comments</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">comments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[u&#39;body&#39;, u&#39;url&#39;, u&#39;created_at&#39;, u&#39;updated_at&#39;, u&#39;user&#39;, u&#39;id&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">comments</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s1">u&#39;body&#39;</span><span class="p">]</span>
<span class="go">Probably in the &quot;advanced&quot; section</span>
</pre></div>
</div>
<p>嗯，那看起来似乎是个愚蠢之处。我们发表个评论来告诉这个评论者他自己的愚蠢。那么，这个评论者是谁呢？</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">comments</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s1">u&#39;user&#39;</span><span class="p">][</span><span class="s1">u&#39;login&#39;</span><span class="p">]</span>
<span class="go">kennethreitz</span>
</pre></div>
</div>
<p>好，我们来告诉这个叫 Kenneth 的家伙，这个例子应该放在快速上手指南中。根据 GitHub API
文档，其方法是 POST 到该话题。我们来试试看。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">u&quot;body&quot;</span><span class="p">:</span> <span class="s2">u&quot;Sounds great! I&#39;ll get right on it!&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s2">u&quot;https://api.github.com/repos/kennethreitz/requests/issues/482/comments&quot;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">404</span>
</pre></div>
</div>
<p>额，这有点古怪哈。可能我们需要验证身份。那就有点纠结了，对吧？不对。Requests
简化了多种身份验证形式的使用，包括非常常见的 Basic Auth。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auth</span> <span class="o">=</span> <span class="n">HTTPBasicAuth</span><span class="p">(</span><span class="s1">&#39;fake@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;not_a_real_password&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">201</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">content</span><span class="p">[</span><span class="s1">u&#39;body&#39;</span><span class="p">])</span>
<span class="go">Sounds great! I&#39;ll get right on it.</span>
</pre></div>
</div>
<p>太棒了！噢，不！我原本是想说等我一会，因为我得去喂我的猫。如果我能够编辑这条评论那就好了！幸运的是，GitHub 允许我们使用另一个 HTTP 动词 PATCH 来编辑评论。我们来试试。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">content</span><span class="p">[</span><span class="s2">u&quot;id&quot;</span><span class="p">])</span>
<span class="go">5804413</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">u&quot;body&quot;</span><span class="p">:</span> <span class="s2">u&quot;Sounds great! I&#39;ll get right on it once I feed my cat.&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s2">u&quot;https://api.github.com/repos/kennethreitz/requests/issues/comments/5804413&quot;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">200</span>
</pre></div>
</div>
<p>非常好。现在，我们来折磨一下这个叫 Kenneth 的家伙，我决定要让他急得团团转，也不告诉他是我在捣蛋。这意味着我想删除这条评论。GitHub 允许我们使用完全名副其实的 DELETE 方法来删除评论。我们来清除该评论。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">204</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
<span class="go">&#39;204 No Content&#39;</span>
</pre></div>
</div>
<p>很好。不见了。最后一件我想知道的事情是我已经使用了多少限额（ratelimit）。查查看，GitHub
在响应头部发送这个信息，因此不必下载整个网页，我将使用一个 HEAD 请求来获取响应头。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">headers</span>
<span class="gp">...</span>
<span class="go">&#39;x-ratelimit-remaining&#39;: &#39;4995&#39;</span>
<span class="go">&#39;x-ratelimit-limit&#39;: &#39;5000&#39;</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>很好。是时候写个 Python 程序以各种刺激的方式滥用 GitHub 的 API，还可以使用 4995 次呢。</p>
</div>
<div class="section" id="link-headers">
<span id="id16"></span><h4>响应头链接字段<a class="headerlink" href="#link-headers" title="永久链接至标题">¶</a></h4>
<p>许多 HTTP API 都有响应头链接字段的特性，它们使得 API 能够更好地自我描述和自我显露。</p>
<p>GitHub 在 API 中为 <a class="reference external" href="http://developer.github.com/v3/#pagination">分页</a> 使用这些特性，例如:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.github.com/users/kennethreitz/repos?page=1&amp;per_page=10&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;link&#39;</span><span class="p">]</span>
<span class="go">&#39;&lt;https://api.github.com/users/kennethreitz/repos?page=2&amp;per_page=10&gt;; rel=&quot;next&quot;, &lt;https://api.github.com/users/kennethreitz/repos?page=6&amp;per_page=10&gt;; rel=&quot;last&quot;&#39;</span>
</pre></div>
</div>
<p>Requests 会自动解析这些响应头链接字段，并使得它们非常易于使用:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">links</span><span class="p">[</span><span class="s2">&quot;next&quot;</span><span class="p">]</span>
<span class="go">{&#39;url&#39;: &#39;https://api.github.com/users/kennethreitz/repos?page=2&amp;per_page=10&#39;, &#39;rel&#39;: &#39;next&#39;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">links</span><span class="p">[</span><span class="s2">&quot;last&quot;</span><span class="p">]</span>
<span class="go">{&#39;url&#39;: &#39;https://api.github.com/users/kennethreitz/repos?page=7&amp;per_page=10&#39;, &#39;rel&#39;: &#39;last&#39;}</span>
</pre></div>
</div>
</div>
<div class="section" id="transport-adapters">
<span id="id18"></span><h4>传输适配器<a class="headerlink" href="#transport-adapters" title="永久链接至标题">¶</a></h4>
<p>从 v1.0.0 以后，Requests 的内部采用了模块化设计。部分原因是为了实现传输适配器（Transport Adapter），你可以看看关于它的<a class="reference external" href="http://www.kennethreitz.org/essays/the-future-of-python-http">最早描述</a>。传输适配器提供了一个机制，让你可以为 HTTP 服务定义交互方法。尤其是它允许你应用服务前的配置。</p>
<p>Requests 自带了一个传输适配器，也就是 <a class="reference internal" href="index.html#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>。
这个适配器使用了强大的 <a class="reference external" href="https://github.com/shazow/urllib3">urllib3</a>，为 Requests 提供了默认的 HTTP 和 HTTPS 交互。每当 <a class="reference internal" href="index.html#requests.Session" title="requests.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> 被初始化，就会有适配器附着在 <a class="reference internal" href="index.html#requests.Session" title="requests.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>
上，其中一个供 HTTP 使用，另一个供 HTTPS 使用。</p>
<p>Request 允许用户创建和使用他们自己的传输适配器，实现他们需要的特殊功能。创建好以后，传输适配器可以被加载到一个会话对象上，附带着一个说明，告诉会话适配器应该应用在哪个 web
服务上。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;http://www.github.com&#39;</span><span class="p">,</span> <span class="n">MyAdapter</span><span class="p">())</span>
</pre></div>
</div>
<p>这个 mount 调用会注册一个传输适配器的特定实例到一个前缀上面。加载以后，任何使用该会话的 HTTP
请求，只要其 URL 是以给定的前缀开头，该传输适配器就会被使用到。</p>
<p>传输适配器的众多实现细节不在本文档的覆盖范围内，不过你可以看看接下来这个简单的 SSL
用例。更多的用法，你也许该考虑为``requests.adapters.BaseAdapter`` 创建子类。</p>
<div class="section" id="id19">
<h5>示例: 指定的 SSL 版本<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h5>
<p>Requests 开发团队刻意指定了内部库（<a class="reference external" href="https://github.com/shazow/urllib3">urllib3</a>）的默认 SSL 版本。一般情况下这样做没有问题，不过是不是你可能会需要连接到一个服务节点，而该节点使用了和默认不同的 SSL 版本。</p>
<p>你可以使用传输适配器解决这个问题，通过利用 HTTPAdapter 现有的大部分实现，再加上一个
<em>ssl_version</em> 参数并将它传递到 <code class="docutils literal"><span class="pre">urllib3</span></code> 中。我们会创建一个传输适配器，用来告诉
<code class="docutils literal"><span class="pre">urllib3</span></code> 让它使用 SSLv3：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ssl</span>

<span class="kn">from</span> <span class="nn">requests.adapters</span> <span class="kn">import</span> <span class="n">HTTPAdapter</span>
<span class="kn">from</span> <span class="nn">requests.packages.urllib3.poolmanager</span> <span class="kn">import</span> <span class="n">PoolManager</span>


<span class="k">class</span> <span class="nc">Ssl3HttpAdapter</span><span class="p">(</span><span class="n">HTTPAdapter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&quot;Transport adapter&quot; that allows us to use SSLv3.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">init_poolmanager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connections</span><span class="p">,</span> <span class="n">maxsize</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poolmanager</span> <span class="o">=</span> <span class="n">PoolManager</span><span class="p">(</span><span class="n">num_pools</span><span class="o">=</span><span class="n">connections</span><span class="p">,</span>
                                       <span class="n">maxsize</span><span class="o">=</span><span class="n">maxsize</span><span class="p">,</span>
                                       <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
                                       <span class="n">ssl_version</span><span class="o">=</span><span class="n">ssl</span><span class="o">.</span><span class="n">PROTOCOL_SSLv3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="blocking-or-nonblocking">
<span id="id21"></span><h4>阻塞和非阻塞<a class="headerlink" href="#blocking-or-nonblocking" title="永久链接至标题">¶</a></h4>
<p>使用默认的传输适配器，Requests 不提供任何形式的非阻塞 IO。
<a class="reference internal" href="index.html#requests.Response.content" title="requests.Response.content"><code class="xref py py-attr docutils literal"><span class="pre">Response.content</span></code></a> 属性会阻塞，直到整个响应下载完成。如果你需要更多精细控制，该库的数据流功能（见 <a class="reference internal" href="#streaming-requests"><span>流式请求</span></a>）
允许你每次接受少量的一部分响应，不过这些调用依然是阻塞式的。</p>
<p>如果你对于阻塞式 IO 有所顾虑，还有很多项目可以供你使用，它们结合了 Requests 和 Python
的某个异步框架。典型的优秀例子是 <a class="reference external" href="https://github.com/kennethreitz/grequests">grequests</a> 和 <a class="reference external" href="https://github.com/ross/requests-futures">requests-futures</a>。</p>
</div>
<div class="section" id="header">
<h4>Header 排序<a class="headerlink" href="#header" title="永久链接至标题">¶</a></h4>
<p>在某些特殊情况下你也许需要按照次序来提供 header，如果你向 <code class="docutils literal"><span class="pre">headers</span></code> 关键字参数传入一个
<code class="docutils literal"><span class="pre">OrderedDict</span></code>，就可以向提供一个带排序的 header。<strong>然而</strong>，Requests 使用的默认
header 的次序会被优先选择，这意味着如果你在 <code class="docutils literal"><span class="pre">headers</span></code> 关键字参数中覆盖了默认 header，和关键字参数中别的 header 相比，它们也许看上去会是次序错误的。</p>
<p>如果这个对你来说是个问题，那么用户应该考虑在 <a class="reference internal" href="index.html#requests.Session" title="requests.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>
对象上面设置默认 header，只要将 <a class="reference internal" href="index.html#requests.Session.headers" title="requests.Session.headers"><code class="xref py py-data docutils literal"><span class="pre">Session</span></code></a>
设为一个定制的  <code class="docutils literal"><span class="pre">OrderedDict</span></code> 即可。这样就会让它成为优选的次序。</p>
</div>
<div class="section" id="timeout">
<span id="timeouts"></span><h4>超时（timeout）<a class="headerlink" href="#timeout" title="永久链接至标题">¶</a></h4>
<p>为防止服务器不能及时响应，大部分发至外部服务器的请求都应该带着 timeout 参数。如果没有 timeout，你的代码可能会挂起若干分钟甚至更长时间。</p>
<p><strong>连接</strong>超时指的是在你的客户端实现到远端机器端口的连接时（对应的是`connect()`_），Request 会等待的秒数。一个很好的实践方法是把连接超时设为比 3 的倍数略大的一个数值，因为 <a class="reference external" href="http://www.hjp.at/doc/rfc/rfc2988.txt">TCP 数据包重传窗口 (TCP packet retransmission window)</a>
的默认大小是 3。</p>
<p>一旦你的客户端连接到了服务器并且发送了 HTTP 请求，<strong>读取</strong>超时指的就是客户端等待服务器发送请求的时间。（特定地，它指的是客户端要等待服务器发送字节<strong>之间</strong>的时间。在 99.9%
的情况下这指的是服务器发送第一个字节之前的时间）。</p>
<p>如果你制订了一个单一的值作为 timeout，如下所示：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>这一 timeout 值将会用作 <code class="docutils literal"><span class="pre">connect</span></code> 和 <code class="docutils literal"><span class="pre">read</span></code> 二者的 timeout。如果要分别制定，就传入一个元组：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mf">3.05</span><span class="p">,</span> <span class="mi">27</span><span class="p">))</span>
</pre></div>
</div>
<p>如果远端服务器很慢，你可以让 Request 永远等待，传入一个 None 作为 timeout 值，然后就冲咖啡去吧。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-user/authentication"></span><div class="section" id="authentication">
<span id="id1"></span><h3>身份认证<a class="headerlink" href="#authentication" title="永久链接至标题">¶</a></h3>
<p>本篇文档讨论如何配合 Requests 使用多种身份认证方式。</p>
<p>许多 web 服务都需要身份认证，并且也有多种不同的认证类型。
以下，我们会从简单到复杂概述 Requests 中可用的几种身份认证形式。</p>
<div class="section" id="id2">
<h4>基本身份认证<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h4>
<p>许多要求身份认证的web服务都接受 HTTP Basic Auth。这是最简单的一种身份认证，并且 Requests
对这种认证方式的支持是直接开箱即可用。</p>
<p>以 HTTP Basic Auth 发送请求非常简单：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/user&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">HTTPBasicAuth</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;pass&#39;</span><span class="p">))</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<p>事实上，HTTP Basic Auth 如此常见，Requests 就提供了一种简写的使用方式：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/user&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;pass&#39;</span><span class="p">))</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<p>像这样在一个元组中提供认证信息与前一个 <code class="docutils literal"><span class="pre">HTTPBasicAuth</span></code> 例子是完全相同的。</p>
<div class="section" id="netrc">
<h5>netrc 认证<a class="headerlink" href="#netrc" title="永久链接至标题">¶</a></h5>
<p>如果认证方法没有收到 <code class="docutils literal"><span class="pre">auth</span></code> 参数，Requests 将试图从用户的 netrc
文件中获取 URL 的 hostname 需要的认证身份。</p>
<p>如果找到了 hostname 对应的身份，就会以 HTTP Basic Auth 的形式发送请求。</p>
</div>
</div>
<div class="section" id="id3">
<h4>摘要式身份认证<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h4>
<p>另一种非常流行的 HTTP 身份认证形式是摘要式身份认证，Requests 对它的支持也是开箱即可用的：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">requests.auth</span> <span class="kn">import</span> <span class="n">HTTPDigestAuth</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://httpbin.org/digest-auth/auth/user/pass&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">HTTPDigestAuth</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;pass&#39;</span><span class="p">))</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="oauth-1">
<h4>OAuth 1 认证<a class="headerlink" href="#oauth-1" title="永久链接至标题">¶</a></h4>
<p>Oauth 是一种常见的 Web API 认证方式。 <code class="docutils literal"><span class="pre">requests-oauthlib</span></code>
库可以让 Requests 用户简单地创建 OAuth 认证的请求：</p>
<dl class="docutils">
<dt>::</dt>
<dd><div class="first highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">requests_oauthlib</span> <span class="kn">import</span> <span class="n">OAuth1</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.twitter.com/1.1/account/verify_credentials.json&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auth</span> <span class="o">=</span> <span class="n">OAuth1</span><span class="p">(</span><span class="s1">&#39;YOUR_APP_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;YOUR_APP_SECRET&#39;</span><span class="p">,</span>
<span class="go">                  &#39;USER_OAUTH_TOKEN&#39;, &#39;USER_OAUTH_TOKEN_SECRET&#39;)</span>
</pre></div>
</div>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<p>关于 OAuth 工作流程的更多信息，请参见 <a class="reference external" href="http://oauth.net/">OAuth</a> 官方网站。
关于 requests-oauthlib 的文档和用例，请参见 GitHub 的 <a class="reference external" href="https://github.com/requests/requests-oauthlib">requests_oauthlib</a> 代码库。</p>
</div>
<div class="section" id="id4">
<h4>其他身份认证形式<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h4>
<p>Requests 的设计允许其他形式的身份认证用简易的方式插入其中。开源社区的成员时常为更复杂或不那么常用的身份认证形式编写认证处理插件。其中一些最优秀的已被收集在 <a class="reference external" href="https://github.com/requests">Requests organization</a> 页面中，包括:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/requests/requests-kerberos">Kerberos</a></li>
<li><a class="reference external" href="https://github.com/requests/requests-ntlm">NTLM</a></li>
</ul>
<p>如果你想使用其中任何一种身份认证形式，直接去它们的GitHub页面，依照说明进行。</p>
</div>
<div class="section" id="id5">
<h4>新的身份认证形式<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h4>
<p>如果你找不到所需要的身份认证形式的一个良好实现，你也可以自己实现它。Requests 非常易于添加你自己的身份认证形式。</p>
<p>要想自己实现，就从 <a class="reference internal" href="index.html#requests.auth.AuthBase" title="requests.auth.AuthBase"><code class="xref py py-class docutils literal"><span class="pre">requests.auth.AuthBase</span></code></a> 继承一个子类，并实现 <code class="docutils literal"><span class="pre">__call__()</span></code> 方法：</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyAuth</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">AuthBase</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># Implement my authentication</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">r</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://httpbin.org/get&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">MyAuth</span><span class="p">())</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<p>当一个身份认证模块被附加到一个请求上，在设置 request 期间就会调用该模块。因此 <code class="docutils literal"><span class="pre">__call__</span></code>
方法必须完成使得身份认证生效的所有事情。一些身份认证形式会额外地添加钩子来提供进一步的功能。</p>
<p>你可以在 <a class="reference external" href="https://github.com/requests">Requests organization</a> 页面的 <code class="docutils literal"><span class="pre">auth.py</span></code> 文件中找到更多示例。</p>
</div>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>社区指南<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>这部分文档也是文字为主，详细介绍了 Requests 的生态和社区。</p>
<div class="toctree-wrapper compound">
<span id="document-community/faq"></span><div class="section" id="faq">
<span id="id1"></span><h3>常见问题<a class="headerlink" href="#faq" title="永久链接至标题">¶</a></h3>
<p>这部分的文档回答了有关 Requests 的常见问题。</p>
<div class="section" id="id2">
<h4>已编码的数据?<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h4>
<p>Requests 自动解压缩的 gzip 编码的响应体，并在可能的情况下尽可能的将响应内容解码为 unicode.</p>
<p>如果需要的话，你可以直接访问原始响应内容（甚至是套接字）。</p>
</div>
<div class="section" id="user-agent">
<h4>自定义 User-Agent?<a class="headerlink" href="#user-agent" title="永久链接至标题">¶</a></h4>
<p>Requests 允许你使用其它的 HTTP Header 来轻松的覆盖自带的 User-Agent 字符串。</p>
</div>
<div class="section" id="httplib2">
<h4>怎么不使用 Httplib2?<a class="headerlink" href="#httplib2" title="永久链接至标题">¶</a></h4>
<p>Chris Adams 给出了一个很好的总结
<a class="reference external" href="http://news.ycombinator.com/item?id=2884406">Hacker News</a>:</p>
<blockquote>
<div><p>httplib2 是你应该使用 Request 的一个原因，尽管 httplib2 名声在外，但它文档欠佳，而且基本操作要写的代码依旧太多。对于 httplib2 我是很感激的，要写一个现代 HTTP 客户端要跟一吨低级麻烦事打交道，实在是件苦差事。但无论如何，还是直接使用 Requests 吧。Kenneth Reitz 是一个很负责的作者，他能把简单的东西做简单。httplib2 感觉像是一个学术产物，而 Requests 才真的是一个人们可以在生产系统中使用的东西。[1]</p>
<p>免责声明：尽管我名列在 Requests 的 AUTHORS 文件中，但对于 Requests 的优秀状态，我的贡献大约只有 0.0001% 吧。</p>
<p>1. <a class="reference external" href="http://code.google.com/p/httplib2/issues/detail?id=96">http://code.google.com/p/httplib2/issues/detail?id=96</a> 是一个好例子，这个讨厌的 bug 影响了很多人，有人几个月前就写了一个修正，这个修正很有效，我把它放在一个代码分支中，用它处理了几 TB 的数据都没问题，但它花了一年多才进到主分支中，进到
PyPI 则花了更长时间，所以用到 httplib2 的项目花了很长时间才等到问题的解决。</p>
</div></blockquote>
</div>
<div class="section" id="python-3">
<h4>支持 Python 3 吗?<a class="headerlink" href="#python-3" title="永久链接至标题">¶</a></h4>
<p>当然！下面是官方支持的python平台列表:</p>
<ul class="simple">
<li>Python 2.6</li>
<li>Python 2.7</li>
<li>Python 3.3</li>
<li>Python 3.4</li>
<li>Python 3.5</li>
<li>PyPy</li>
</ul>
</div>
<div class="section" id="hostname-doesn-t-match">
<h4>&quot;hostname doesn't match&quot; 错误是怎么回事？<a class="headerlink" href="#hostname-doesn-t-match" title="永久链接至标题">¶</a></h4>
<p>当 <a class="reference internal" href="index.html#verification"><span>SSL certificate verification</span></a> 发现服务器响应的认证和它认为自己连接的主机名不匹配时，就会发生这样的错误。如果你确定服务器的 SSL 设置是正确的（例如你可以用浏览器访问页面），而且你使用的是 Python 2.6 或者 2.7，那么一个可能的解释就是你需要 Server-Name-Indication。</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Server_Name_Indication">Server-Name-Indication</a> 简称 SNI，是一个 SSL 的官方扩展，其中客户端会告诉服务器它连接了哪个主机名。当服务器使用虚拟主机（ <a class="reference external" href="https://en.wikipedia.org/wiki/Virtual_hosting">Virtual Hosting</a>）时这点很重要。这样的服务器会服务多个 SSL 网站，所以它们需要能够针对客户端连接的主机名返回正确的证书。</p>
<p>Python 3 和 Python 2.7.9+ 的 SSL 模块包含了原生的 SNI 支持。更多关于在 Request、SNI 以及 Python &lt; 2.7.9 的信息请参见这个 <a class="reference external" href="https://stackoverflow.com/questions/18578439/using-requests-with-tls-doesnt-give-sni-support/18579484#18579484">Stack Overflow 答案</a>。</p>
</div>
</div>
<span id="document-community/recommended"></span><div class="section" id="recommended">
<span id="id1"></span><h3>推荐的库和扩展<a class="headerlink" href="#recommended" title="永久链接至标题">¶</a></h3>
<p>Requests 拥有很多强大有用的第三方扩展。这里概述了其中最好的几个。</p>
<div class="section" id="certifi-ca-bundle">
<h4>Certifi CA Bundle<a class="headerlink" href="#certifi-ca-bundle" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="http://certifi.io/en/latest/">Certifi</a> 是一个精心准备的根证书集合，用来验证 SSL 证书的可信任度，同时还会验证
TLS 主机的身份。这是一个从 Requests 项目中剥离出来的项目。</p>
</div>
<div class="section" id="cachecontrol">
<h4>CacheControl<a class="headerlink" href="#cachecontrol" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="https://cachecontrol.readthedocs.io/en/latest/">CacheControl</a> 这个扩展能为 Requests 添加完整的 HTTP 缓存功能。这样你的 web
请求的效率会高很多，这个扩展适合在需要大量 web 请求的场合使用。</p>
</div>
<div class="section" id="requests-toolbelt">
<h4>Requests-Toolbelt<a class="headerlink" href="#requests-toolbelt" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="http://toolbelt.readthedocs.io/en/latest/index.html">Requests-Toolbelt</a> 使一些有用工具的集合，有的用户会觉得它们很有用，但 Requests
中不适合将它们包进去。Requests 的核心组积极维护着这个库，它反映了社区用户最想要的一些功能。</p>
</div>
<div class="section" id="requests-oauthlib">
<h4>Requests-OAuthlib<a class="headerlink" href="#requests-oauthlib" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="https://requests-oauthlib.readthedocs.io/en/latest/">requests-oauthlib</a> 使得从 Requests 自动进行 OAuth 跳转变成可能。这对很多使用
OAuth 进行验证的网站都很有用。它还提供了很多小配置，用来对非标准的 OAuth 提供者进行处理。</p>
</div>
<div class="section" id="betamax">
<h4>Betamax<a class="headerlink" href="#betamax" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="https://github.com/sigmavirus24/betamax">Betamax</a> 记录了你的 HTTP 交互，这样就不需要 NSA 费心了。这是一个专为 Python-Requests
设计的模拟录像机。</p>
</div>
</div>
<span id="document-community/out-there"></span><div class="section" id="integrations">
<h3>Integrations<a class="headerlink" href="#integrations" title="永久链接至标题">¶</a></h3>
<div class="section" id="scraperwiki">
<h4>ScraperWiki<a class="headerlink" href="#scraperwiki" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="https://scraperwiki.com/">ScraperWiki</a> is an excellent service that allows
you to run Python, Ruby, and PHP scraper scripts on the web. Now, Requests
v0.6.1 is available to use in your scrapers!</p>
<p>To give it a try, simply:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
</pre></div>
</div>
</div>
<div class="section" id="python-for-ios">
<h4>Python for iOS<a class="headerlink" href="#python-for-ios" title="永久链接至标题">¶</a></h4>
<p>Requests is built into the wonderful <a class="reference external" href="https://itunes.apple.com/us/app/python-2.7-for-ios/id485729872?mt=Python8">Python for iOS</a> runtime!</p>
<p>To give it a try, simply:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="articles-talks">
<h3>Articles &amp; Talks<a class="headerlink" href="#articles-talks" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://gun.io/blog/python-for-the-web/">Python for the Web</a> teaches how to use Python to interact with the web, using Requests.</li>
<li><a class="reference external" href="http://pydanny.blogspot.com/2011/05/python-http-requests-for-humans.html">Daniel Greenfeld's Review of Requests</a></li>
<li><a class="reference external" href="http://python-for-humans.heroku.com">My 'Python for Humans' talk</a> ( <a class="reference external" href="http://codeconf.s3.amazonaws.com/2011/pycodeconf/talks/PyCodeConf2011%20-%20Kenneth%20Reitz.m4a">audio</a> )</li>
<li><a class="reference external" href="http://issackelly.github.com/Consuming-Web-APIs-with-Python-Talk/slides/slides.html">Issac Kelly's 'Consuming Web APIs' talk</a></li>
<li><a class="reference external" href="http://arunsag.wordpress.com/2011/08/17/new-package-python-requests-http-for-humans/">Blog post about Requests via Yum</a></li>
<li><a class="reference external" href="http://habrahabr.ru/blogs/python/126262/">Russian blog post introducing Requests</a></li>
<li><a class="reference external" href="http://www.coglib.com/~icordasc/blog/2014/11/sending-json-in-requests.html">Sending JSON in Requests</a></li>
</ul>
</div>
<span id="document-community/support"></span><div class="section" id="support">
<span id="id1"></span><h3>支持<a class="headerlink" href="#support" title="永久链接至标题">¶</a></h3>
<p>对于Requests，如果你有问题或者建议，可以通过下面几种方法得到支持：</p>
<div class="section" id="stackoverflow">
<h4>StackOverflow<a class="headerlink" href="#stackoverflow" title="永久链接至标题">¶</a></h4>
<p>如果你的问题不包含敏感或私有信息，或者你能将这些信息匿名化，那你就可以在
<a class="reference external" href="https://stackoverflow.com/questions/tagged/python-requests">StackOverflow</a>
上使用 <code class="docutils literal"><span class="pre">python-requests</span></code> 标签提问。</p>
</div>
<div class="section" id="id3">
<h4>发送推文<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h4>
<p>如果你的问题在140个字符内描述，欢迎在 twitter 上发送推文至
<a class="reference external" href="https://twitter.com/kennethreitz">&#64;kennethreitz</a>,
<a class="reference external" href="https://twitter.com/sigmavirus24">&#64;sigmavirus24</a>, 或
<a class="reference external" href="https://twitter.com/lukasaoz">&#64;lukasaoz</a>。</p>
</div>
<div class="section" id="issue">
<h4>提交 issue<a class="headerlink" href="#issue" title="永久链接至标题">¶</a></h4>
<p>如果你在 Requests 中注意到了一些意想不到的行为，或者希望看到一个新的功能支持，请
<a class="reference external" href="https://github.com/kennethreitz/requests/issues">在 GitHub 上提交 issue</a>.</p>
</div>
<div class="section" id="id4">
<h4>邮件<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h4>
<p>我很乐意回答关于 Requests 的个人或者更深入的问题。你可以随时写信至
<a class="reference external" href="mailto:requests&#37;&#52;&#48;kennethreitz&#46;com">requests<span>&#64;</span>kennethreitz<span>&#46;</span>com</a>.</p>
</div>
<div class="section" id="irc">
<h4>IRC<a class="headerlink" href="#irc" title="永久链接至标题">¶</a></h4>
<p>Requests 的官方 Freenode 频道是
<a class="reference external" href="irc://irc.freenode.net/python-requests">#python-requests</a></p>
<p>Requests 的核心开发人员白天会在 IRC 中出没，你可以在 <code class="docutils literal"><span class="pre">#python-requests</span></code> 中找到他们：</p>
<ul class="simple">
<li>kennethreitz</li>
<li>lukasa</li>
<li>sigmavirus24</li>
</ul>
</div>
</div>
<span id="document-community/vulnerabilities"></span><div class="section" id="vulnerability-disclosure">
<h3>Vulnerability Disclosure<a class="headerlink" href="#vulnerability-disclosure" title="永久链接至标题">¶</a></h3>
<p>If you think you have found a potential security vulnerability in requests,
please email <a class="reference external" href="mailto:graffatcolmingov&#37;&#52;&#48;gmail&#46;com">sigmavirus24</a> and
<a class="reference external" href="mailto:cory&#37;&#52;&#48;lukasa&#46;co&#46;uk">Lukasa</a> directly. <strong>Do not file a public issue.</strong></p>
<p>Our PGP Key fingerprints are:</p>
<ul class="simple">
<li>0161 BB7E B208 B5E0 4FDC  9F81 D9DA 0A04 9113 F853 (&#64;sigmavirus24)</li>
<li>90DC AE40 FEA7 4B14 9B70  662D F25F 2144 EEC1 373D (&#64;lukasa)</li>
</ul>
<p>If English is not your first language, please try to describe the problem and
its impact to the best of your ability. For greater detail, please use your
native language and we will try our best to translate it using online services.</p>
<p>Please also include the code you used to find the problem and the shortest
amount of code necessary to reproduce it.</p>
<p>Please do not disclose this to anyone else. We will retrieve a CVE identifier
if necessary and give you full credit under whatever name or alias you provide.
We will only request an identifier when we have a fix and can publish it in a
release.</p>
<p>We will respect your privacy and will only publicize your involvement if you
grant us permission.</p>
<div class="section" id="process">
<h4>Process<a class="headerlink" href="#process" title="永久链接至标题">¶</a></h4>
<p>This following information discusses the process the requests project follows
in response to vulnerability disclosures. If you are disclosing a
vulnerability, this section of the documentation lets you know how we will
respond to your disclosure.</p>
<div class="section" id="timeline">
<h5>Timeline<a class="headerlink" href="#timeline" title="永久链接至标题">¶</a></h5>
<p>When you report an issue, one of the project members will respond to you within
two days <em>at the outside</em>. In most cases responses will be faster, usually
within 12 hours. This initial response will at the very least confirm receipt
of the report.</p>
<p>If we were able to rapidly reproduce the issue, the initial response will also
contain confirmation of the issue. If we are not, we will often ask for more
information about the reproduction scenario.</p>
<p>Our goal is to have a fix for any vulnerability released within two weeks of
the initial disclosure. This may potentially involve shipping an interim
release that simply disables function while a more mature fix can be prepared,
but will in the vast majority of cases mean shipping a complete release as soon
as possible.</p>
<p>Throughout the fix process we will keep you up to speed with how the fix is
progressing. Once the fix is prepared, we will notify you that we believe we
have a fix. Often we will ask you to confirm the fix resolves the problem in
your environment, especially if we are not confident of our reproduction
scenario.</p>
<p>At this point, we will prepare for the release. We will obtain a CVE number
if one is required, providing you with full credit for the discovery. We will
also decide on a planned release date, and let you know when it is. This
release date will <em>always</em> be on a weekday.</p>
<p>At this point we will reach out to our major downstream packagers to notify
them of an impending security-related patch so they can make arrangements. In
addition, these packagers will be provided with the intended patch ahead of
time, to ensure that they are able to promptly release their downstream
packages. Currently the list of people we actively contact <em>ahead of a public
release</em> is:</p>
<ul class="simple">
<li>Ralph Bean, Red Hat (&#64;ralphbean)</li>
<li>Daniele Tricoli, Debian (&#64;eriol)</li>
</ul>
<p>We will notify these individuals at least a week ahead of our planned release
date to ensure that they have sufficient time to prepare. If you believe you
should be on this list, please let one of the maintainers know at one of the
email addresses at the top of this article.</p>
<p>On release day, we will push the patch to our public repository, along with an
updated changelog that describes the issue and credits you. We will then issue
a PyPI release containing the patch.</p>
<p>At this point, we will publicise the release. This will involve mails to
mailing lists, Tweets, and all other communication mechanisms available to the
core team.</p>
<p>We will also explicitly mention which commits contain the fix to make it easier
for other distributors and users to easily patch their own versions of requests
if upgrading is not an option.</p>
</div>
</div>
<div class="section" id="previous-cves">
<h4>Previous CVEs<a class="headerlink" href="#previous-cves" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>Fixed in 2.6.0<ul>
<li><a class="reference external" href="http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=2015-2296">CVE 2015-2296</a>,
reported by Matthew Daley of <a class="reference external" href="https://bugfuzz.com/">BugFuzz</a>.</li>
</ul>
</li>
<li>Fixed in 2.3.0<ul>
<li><a class="reference external" href="http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=2014-1829">CVE 2014-1829</a></li>
<li><a class="reference external" href="http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=2014-1830">CVE 2014-1830</a></li>
</ul>
</li>
</ul>
</div>
</div>
<span id="document-community/updates"></span><div class="section" id="updates">
<span id="id1"></span><h3>更新<a class="headerlink" href="#updates" title="永久链接至标题">¶</a></h3>
<p>如果你想和社区以及开发版的 Requests 保持最新的联系，
这有几种方式:</p>
<div class="section" id="github">
<h4>GitHub<a class="headerlink" href="#github" title="永久链接至标题">¶</a></h4>
<p>最好的方式是追踪 Requests 开发版本的
<a class="reference external" href="https://github.com/kennethreitz/requests">GitHub 库</a>.</p>
</div>
<div class="section" id="twitter">
<h4>Twitter<a class="headerlink" href="#twitter" title="永久链接至标题">¶</a></h4>
<p>我经常推送关于 Requests 的新功能和新版本.</p>
<p>关注 <a class="reference external" href="https://twitter.com/kennethreitz">&#64;kennethreitz</a> 即可获得更新。</p>
</div>
</div>
<div class="section" id="id3">
<h3>版本历史<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<div class="section" id="release-history">
<h4>Release History<a class="headerlink" href="#release-history" title="永久链接至标题">¶</a></h4>
<div class="section" id="id4">
<h5>2.10.0 (2016-04-29)<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h5>
<p><strong>New Features</strong></p>
<ul class="simple">
<li>SOCKS Proxy Support! (requires PySocks; $ pip install requests[socks])</li>
</ul>
<p><strong>Miscellaneous</strong></p>
<ul class="simple">
<li>Updated bundled urllib3 to 1.15.1.</li>
</ul>
</div>
<div class="section" id="id5">
<h5>2.9.2 (2016-04-29)<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h5>
<p><strong>Improvements</strong></p>
<ul class="simple">
<li>Change built-in CaseInsensitiveDict (used for headers) to use OrderedDict
as its underlying datastore.</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Don't use redirect_cache if allow_redirects=False</li>
<li>When passed objects that throw exceptions from <code class="docutils literal"><span class="pre">tell()</span></code>, send them via
chunked transfer encoding instead of failing.</li>
<li>Raise a ProxyError for proxy related connection issues.</li>
</ul>
</div>
<div class="section" id="id6">
<h5>2.9.1 (2015-12-21)<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h5>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Resolve regression introduced in 2.9.0 that made it impossible to send binary
strings as bodies in Python 3.</li>
<li>Fixed errors when calculating cookie expiration dates in certain locales.</li>
</ul>
<p><strong>Miscellaneous</strong></p>
<ul class="simple">
<li>Updated bundled urllib3 to 1.13.1.</li>
</ul>
</div>
<div class="section" id="id7">
<h5>2.9.0 (2015-12-15)<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h5>
<p><strong>Minor Improvements</strong> (Backwards compatible)</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">verify</span></code> keyword argument now supports being passed a path to a
directory of CA certificates, not just a single-file bundle.</li>
<li>Warnings are now emitted when sending files opened in text mode.</li>
<li>Added the 511 Network Authentication Required status code to the status code
registry.</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>For file-like objects that are not seeked to the very beginning, we now
send the content length for the number of bytes we will actually read, rather
than the total size of the file, allowing partial file uploads.</li>
<li>When uploading file-like objects, if they are empty or have no obvious
content length we set <code class="docutils literal"><span class="pre">Transfer-Encoding:</span> <span class="pre">chunked</span></code> rather than
<code class="docutils literal"><span class="pre">Content-Length:</span> <span class="pre">0</span></code>.</li>
<li>We correctly receive the response in buffered mode when uploading chunked
bodies.</li>
<li>We now handle being passed a query string as a bytestring on Python 3, by
decoding it as UTF-8.</li>
<li>Sessions are now closed in all cases (exceptional and not) when using the
functional API rather than leaking and waiting for the garbage collector to
clean them up.</li>
<li>Correctly handle digest auth headers with a malformed <code class="docutils literal"><span class="pre">qop</span></code> directive that
contains no token, by treating it the same as if no <code class="docutils literal"><span class="pre">qop</span></code> directive was
provided at all.</li>
<li>Minor performance improvements when removing specific cookies by name.</li>
</ul>
<p><strong>Miscellaneous</strong></p>
<ul class="simple">
<li>Updated urllib3 to 1.13.</li>
</ul>
</div>
<div class="section" id="id8">
<h5>2.8.1 (2015-10-13)<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h5>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Update certificate bundle to match <code class="docutils literal"><span class="pre">certifi</span></code> 2015.9.6.2's weak certificate
bundle.</li>
<li>Fix a bug in 2.8.0 where requests would raise <code class="docutils literal"><span class="pre">ConnectTimeout</span></code> instead of
<code class="docutils literal"><span class="pre">ConnectionError</span></code></li>
<li>When using the PreparedRequest flow, requests will now correctly respect the
<code class="docutils literal"><span class="pre">json</span></code> parameter. Broken in 2.8.0.</li>
<li>When using the PreparedRequest flow, requests will now correctly handle a
Unicode-string method name on Python 2. Broken in 2.8.0.</li>
</ul>
</div>
<div class="section" id="id9">
<h5>2.8.0 (2015-10-05)<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h5>
<p><strong>Minor Improvements</strong> (Backwards Compatible)</p>
<ul class="simple">
<li>Requests now supports per-host proxies. This allows the <code class="docutils literal"><span class="pre">proxies</span></code>
dictionary to have entries of the form
<code class="docutils literal"><span class="pre">{'&lt;scheme&gt;://&lt;hostname&gt;':</span> <span class="pre">'&lt;proxy&gt;'}</span></code>. Host-specific proxies will be used
in preference to the previously-supported scheme-specific ones, but the
previous syntax will continue to work.</li>
<li><code class="docutils literal"><span class="pre">Response.raise_for_status</span></code> now prints the URL that failed as part of the
exception message.</li>
<li><code class="docutils literal"><span class="pre">requests.utils.get_netrc_auth</span></code> now takes an <code class="docutils literal"><span class="pre">raise_errors</span></code> kwarg,
defaulting to <code class="docutils literal"><span class="pre">False</span></code>. When <code class="docutils literal"><span class="pre">True</span></code>, errors parsing <code class="docutils literal"><span class="pre">.netrc</span></code> files cause
exceptions to be thrown.</li>
<li>Change to bundled projects import logic to make it easier to unbundle
requests downstream.</li>
<li>Changed the default User-Agent string to avoid leaking data on Linux: now
contains only the requests version.</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">json</span></code> parameter to <code class="docutils literal"><span class="pre">post()</span></code> and friends will now only be used if
neither <code class="docutils literal"><span class="pre">data</span></code> nor <code class="docutils literal"><span class="pre">files</span></code> are present, consistent with the
documentation.</li>
<li>We now ignore empty fields in the <code class="docutils literal"><span class="pre">NO_PROXY</span></code> environment variable.</li>
<li>Fixed problem where <code class="docutils literal"><span class="pre">httplib.BadStatusLine</span></code> would get raised if combining
<code class="docutils literal"><span class="pre">stream=True</span></code> with <code class="docutils literal"><span class="pre">contextlib.closing</span></code>.</li>
<li>Prevented bugs where we would attempt to return the same connection back to
the connection pool twice when sending a Chunked body.</li>
<li>Miscellaneous minor internal changes.</li>
<li>Digest Auth support is now thread safe.</li>
</ul>
<p><strong>Updates</strong></p>
<ul class="simple">
<li>Updated urllib3 to 1.12.</li>
</ul>
</div>
<div class="section" id="id10">
<h5>2.7.0 (2015-05-03)<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h5>
<p>This is the first release that follows our new release process. For more, see
<a class="reference external" href="http://docs.python-requests.org/en/latest/community/release-process/">our documentation</a>.</p>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Updated urllib3 to 1.10.4, resolving several bugs involving chunked transfer
encoding and response framing.</li>
</ul>
</div>
<div class="section" id="id11">
<h5>2.6.2 (2015-04-23)<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h5>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Fix regression where compressed data that was sent as chunked data was not
properly decompressed. (#2561)</li>
</ul>
</div>
<div class="section" id="id12">
<h5>2.6.1 (2015-04-22)<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h5>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Remove VendorAlias import machinery introduced in v2.5.2.</li>
<li>Simplify the PreparedRequest.prepare API: We no longer require the user to
pass an empty list to the hooks keyword argument. (c.f. #2552)</li>
<li>Resolve redirects now receives and forwards all of the original arguments to
the adapter. (#2503)</li>
<li>Handle UnicodeDecodeErrors when trying to deal with a unicode URL that
cannot be encoded in ASCII. (#2540)</li>
<li>Populate the parsed path of the URI field when performing Digest
Authentication. (#2426)</li>
<li>Copy a PreparedRequest's CookieJar more reliably when it is not an instance
of RequestsCookieJar. (#2527)</li>
</ul>
</div>
<div class="section" id="id13">
<h5>2.6.0 (2015-03-14)<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h5>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>CVE-2015-2296: Fix handling of cookies on redirect. Previously a cookie
without a host value set would use the hostname for the redirected URL
exposing requests users to session fixation attacks and potentially cookie
stealing. This was disclosed privately by Matthew Daley of
<a class="reference external" href="https://bugfuzz.com">BugFuzz</a>. This affects all versions of requests from
v2.1.0 to v2.5.3 (inclusive on both ends).</li>
<li>Fix error when requests is an <code class="docutils literal"><span class="pre">install_requires</span></code> dependency and <code class="docutils literal"><span class="pre">python</span>
<span class="pre">setup.py</span> <span class="pre">test</span></code> is run. (#2462)</li>
<li>Fix error when urllib3 is unbundled and requests continues to use the
vendored import location.</li>
<li>Include fixes to <code class="docutils literal"><span class="pre">urllib3</span></code>'s header handling.</li>
<li>Requests' handling of unvendored dependencies is now more restrictive.</li>
</ul>
<p><strong>Features and Improvements</strong></p>
<ul class="simple">
<li>Support bytearrays when passed as parameters in the <code class="docutils literal"><span class="pre">files</span></code> argument.
(#2468)</li>
<li>Avoid data duplication when creating a request with <code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">bytes</span></code>, or
<code class="docutils literal"><span class="pre">bytearray</span></code> input to the <code class="docutils literal"><span class="pre">files</span></code> argument.</li>
</ul>
</div>
<div class="section" id="id14">
<h5>2.5.3 (2015-02-24)<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h5>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Revert changes to our vendored certificate bundle. For more context see
(#2455, #2456, and <a class="reference external" href="http://bugs.python.org/issue23476">http://bugs.python.org/issue23476</a>)</li>
</ul>
</div>
<div class="section" id="id15">
<h5>2.5.2 (2015-02-23)<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h5>
<p><strong>Features and Improvements</strong></p>
<ul class="simple">
<li>Add sha256 fingerprint support. (<a class="reference external" href="https://github.com/shazow/urllib3/pull/540">shazow/urllib3#540</a>)</li>
<li>Improve the performance of headers. (<a class="reference external" href="https://github.com/shazow/urllib3/pull/544">shazow/urllib3#544</a>)</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Copy pip's import machinery. When downstream redistributors remove
requests.packages.urllib3 the import machinery will continue to let those
same symbols work. Example usage in requests' documentation and 3rd-party
libraries relying on the vendored copies of urllib3 will work without having
to fallback to the system urllib3.</li>
<li>Attempt to quote parts of the URL on redirect if unquoting and then quoting
fails. (#2356)</li>
<li>Fix filename type check for multipart form-data uploads. (#2411)</li>
<li>Properly handle the case where a server issuing digest authentication
challenges provides both auth and auth-int qop-values. (#2408)</li>
<li>Fix a socket leak. (<a class="reference external" href="https://github.com/shazow/urllib3/pull/549">shazow/urllib3#549</a>)</li>
<li>Fix multiple <code class="docutils literal"><span class="pre">Set-Cookie</span></code> headers properly. (<a class="reference external" href="https://github.com/shazow/urllib3/pull/534">shazow/urllib3#534</a>)</li>
<li>Disable the built-in hostname verification. (<a class="reference external" href="https://github.com/shazow/urllib3/pull/526">shazow/urllib3#526</a>)</li>
<li>Fix the behaviour of decoding an exhausted stream. (<a class="reference external" href="https://github.com/shazow/urllib3/pull/535">shazow/urllib3#535</a>)</li>
</ul>
<p><strong>Security</strong></p>
<ul class="simple">
<li>Pulled in an updated <code class="docutils literal"><span class="pre">cacert.pem</span></code>.</li>
<li>Drop RC4 from the default cipher list. (<a class="reference external" href="https://github.com/shazow/urllib3/pull/551">shazow/urllib3#551</a>)</li>
</ul>
</div>
<div class="section" id="id16">
<h5>2.5.1 (2014-12-23)<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h5>
<p><strong>Behavioural Changes</strong></p>
<ul class="simple">
<li>Only catch HTTPErrors in raise_for_status (#2382)</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Handle LocationParseError from urllib3 (#2344)</li>
<li>Handle file-like object filenames that are not strings (#2379)</li>
<li>Unbreak HTTPDigestAuth handler. Allow new nonces to be negotiated (#2389)</li>
</ul>
</div>
<div class="section" id="id17">
<h5>2.5.0 (2014-12-01)<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h5>
<p><strong>Improvements</strong></p>
<ul class="simple">
<li>Allow usage of urllib3's Retry object with HTTPAdapters (#2216)</li>
<li>The <code class="docutils literal"><span class="pre">iter_lines</span></code> method on a response now accepts a delimiter with which
to split the content (#2295)</li>
</ul>
<p><strong>Behavioural Changes</strong></p>
<ul class="simple">
<li>Add deprecation warnings to functions in requests.utils that will be removed
in 3.0 (#2309)</li>
<li>Sessions used by the functional API are always closed (#2326)</li>
<li>Restrict requests to HTTP/1.1 and HTTP/1.0 (stop accepting HTTP/0.9) (#2323)</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Only parse the URL once (#2353)</li>
<li>Allow Content-Length header to always be overridden (#2332)</li>
<li>Properly handle files in HTTPDigestAuth (#2333)</li>
<li>Cap redirect_cache size to prevent memory abuse (#2299)</li>
<li>Fix HTTPDigestAuth handling of redirects after authenticating successfully
(#2253)</li>
<li>Fix crash with custom method parameter to Session.request (#2317)</li>
<li>Fix how Link headers are parsed using the regular expression library (#2271)</li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li>Add more references for interlinking (#2348)</li>
<li>Update CSS for theme (#2290)</li>
<li>Update width of buttons and sidebar (#2289)</li>
<li>Replace references of Gittip with Gratipay (#2282)</li>
<li>Add link to changelog in sidebar (#2273)</li>
</ul>
</div>
<div class="section" id="id18">
<h5>2.4.3 (2014-10-06)<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h5>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Unicode URL improvements for Python 2.</li>
<li>Re-order JSON param for backwards compat.</li>
<li>Automatically defrag authentication schemes from host/pass URIs. (<a class="reference external" href="https://github.com/kennethreitz/requests/issues/2249">#2249</a>)</li>
</ul>
</div>
<div class="section" id="id20">
<h5>2.4.2 (2014-10-05)<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h5>
<p><strong>Improvements</strong></p>
<ul class="simple">
<li>FINALLY! Add json parameter for uploads! (<a class="reference external" href="https://github.com/kennethreitz/requests/pull/2258">#2258</a>)</li>
<li>Support for bytestring URLs on Python 3.x (<a class="reference external" href="https://github.com/kennethreitz/requests/pull/2238">#2238</a>)</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Avoid getting stuck in a loop (<a class="reference external" href="https://github.com/kennethreitz/requests/pull/2244">#2244</a>)</li>
<li>Multiple calls to iter* fail with unhelpful error. (<a class="reference external" href="https://github.com/kennethreitz/requests/issues/2240">#2240</a>, <a class="reference external" href="https://github.com/kennethreitz/requests/issues/2241">#2241</a>)</li>
</ul>
<p><strong>Documentation</strong></p>
<ul class="simple">
<li>Correct redirection introduction (<a class="reference external" href="https://github.com/kennethreitz/requests/pull/2245/">#2245</a>)</li>
<li>Added example of how to send multiple files in one request. (<a class="reference external" href="https://github.com/kennethreitz/requests/pull/2227/">#2227</a>)</li>
<li>Clarify how to pass a custom set of CAs (<a class="reference external" href="https://github.com/kennethreitz/requests/pull/2248/">#2248</a>)</li>
</ul>
</div>
<div class="section" id="id29">
<h5>2.4.1 (2014-09-09)<a class="headerlink" href="#id29" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Now has a &quot;security&quot; package extras set, <code class="docutils literal"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">requests[security]</span></code></li>
<li>Requests will now use Certifi if it is available.</li>
<li>Capture and re-raise urllib3 ProtocolError</li>
<li>Bugfix for responses that attempt to redirect to themselves forever (wtf?).</li>
</ul>
</div>
<div class="section" id="id30">
<h5>2.4.0 (2014-08-29)<a class="headerlink" href="#id30" title="永久链接至标题">¶</a></h5>
<p><strong>Behavioral Changes</strong></p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Connection:</span> <span class="pre">keep-alive</span></code> header is now sent automatically.</li>
</ul>
<p><strong>Improvements</strong></p>
<ul class="simple">
<li>Support for connect timeouts! Timeout now accepts a tuple (connect, read) which is used to set individual connect and read timeouts.</li>
<li>Allow copying of PreparedRequests without headers/cookies.</li>
<li>Updated bundled urllib3 version.</li>
<li>Refactored settings loading from environment -- new <cite>Session.merge_environment_settings</cite>.</li>
<li>Handle socket errors in iter_content.</li>
</ul>
</div>
<div class="section" id="id31">
<h5>2.3.0 (2014-05-16)<a class="headerlink" href="#id31" title="永久链接至标题">¶</a></h5>
<p><strong>API Changes</strong></p>
<ul class="simple">
<li>New <code class="docutils literal"><span class="pre">Response</span></code> property <code class="docutils literal"><span class="pre">is_redirect</span></code>, which is true when the
library could have processed this response as a redirection (whether
or not it actually did).</li>
<li>The <code class="docutils literal"><span class="pre">timeout</span></code> parameter now affects requests with both <code class="docutils literal"><span class="pre">stream=True</span></code> and
<code class="docutils literal"><span class="pre">stream=False</span></code> equally.</li>
<li>The change in v2.0.0 to mandate explicit proxy schemes has been reverted.
Proxy schemes now default to <code class="docutils literal"><span class="pre">http://</span></code>.</li>
<li>The <code class="docutils literal"><span class="pre">CaseInsensitiveDict</span></code> used for HTTP headers now behaves like a normal
dictionary when references as string or viewed in the interpreter.</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>No longer expose Authorization or Proxy-Authorization headers on redirect.
Fix CVE-2014-1829 and CVE-2014-1830 respectively.</li>
<li>Authorization is re-evaluated each redirect.</li>
<li>On redirect, pass url as native strings.</li>
<li>Fall-back to autodetected encoding for JSON when Unicode detection fails.</li>
<li>Headers set to <code class="docutils literal"><span class="pre">None</span></code> on the <code class="docutils literal"><span class="pre">Session</span></code> are now correctly not sent.</li>
<li>Correctly honor <code class="docutils literal"><span class="pre">decode_unicode</span></code> even if it wasn't used earlier in the same
response.</li>
<li>Stop advertising <code class="docutils literal"><span class="pre">compress</span></code> as a supported Content-Encoding.</li>
<li>The <code class="docutils literal"><span class="pre">Response.history</span></code> parameter is now always a list.</li>
<li>Many, many <code class="docutils literal"><span class="pre">urllib3</span></code> bugfixes.</li>
</ul>
</div>
<div class="section" id="id32">
<h5>2.2.1 (2014-01-23)<a class="headerlink" href="#id32" title="永久链接至标题">¶</a></h5>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Fixes incorrect parsing of proxy credentials that contain a literal or encoded '#' character.</li>
<li>Assorted urllib3 fixes.</li>
</ul>
</div>
<div class="section" id="id33">
<h5>2.2.0 (2014-01-09)<a class="headerlink" href="#id33" title="永久链接至标题">¶</a></h5>
<p><strong>API Changes</strong></p>
<ul class="simple">
<li>New exception: <code class="docutils literal"><span class="pre">ContentDecodingError</span></code>. Raised instead of <code class="docutils literal"><span class="pre">urllib3</span></code>
<code class="docutils literal"><span class="pre">DecodeError</span></code> exceptions.</li>
</ul>
<p><strong>Bugfixes</strong></p>
<ul class="simple">
<li>Avoid many many exceptions from the buggy implementation of <code class="docutils literal"><span class="pre">proxy_bypass</span></code> on OS X in Python 2.6.</li>
<li>Avoid crashing when attempting to get authentication credentials from ~/.netrc when running as a user without a home directory.</li>
<li>Use the correct pool size for pools of connections to proxies.</li>
<li>Fix iteration of <code class="docutils literal"><span class="pre">CookieJar</span></code> objects.</li>
<li>Ensure that cookies are persisted over redirect.</li>
<li>Switch back to using chardet, since it has merged with charade.</li>
</ul>
</div>
<div class="section" id="id34">
<h5>2.1.0 (2013-12-05)<a class="headerlink" href="#id34" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Updated CA Bundle, of course.</li>
<li>Cookies set on individual Requests through a <code class="docutils literal"><span class="pre">Session</span></code> (e.g. via <code class="docutils literal"><span class="pre">Session.get()</span></code>) are no longer persisted to the <code class="docutils literal"><span class="pre">Session</span></code>.</li>
<li>Clean up connections when we hit problems during chunked upload, rather than leaking them.</li>
<li>Return connections to the pool when a chunked upload is successful, rather than leaking it.</li>
<li>Match the HTTPbis recommendation for HTTP 301 redirects.</li>
<li>Prevent hanging when using streaming uploads and Digest Auth when a 401 is received.</li>
<li>Values of headers set by Requests are now always the native string type.</li>
<li>Fix previously broken SNI support.</li>
<li>Fix accessing HTTP proxies using proxy authentication.</li>
<li>Unencode HTTP Basic usernames and passwords extracted from URLs.</li>
<li>Support for IP address ranges for no_proxy environment variable</li>
<li>Parse headers correctly when users override the default <code class="docutils literal"><span class="pre">Host:</span></code> header.</li>
<li>Avoid munging the URL in case of case-sensitive servers.</li>
<li>Looser URL handling for non-HTTP/HTTPS urls.</li>
<li>Accept unicode methods in Python 2.6 and 2.7.</li>
<li>More resilient cookie handling.</li>
<li>Make <code class="docutils literal"><span class="pre">Response</span></code> objects pickleable.</li>
<li>Actually added MD5-sess to Digest Auth instead of pretending to like last time.</li>
<li>Updated internal urllib3.</li>
<li>Fixed &#64;Lukasa's lack of taste.</li>
</ul>
</div>
<div class="section" id="id35">
<h5>2.0.1 (2013-10-24)<a class="headerlink" href="#id35" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Updated included CA Bundle with new mistrusts and automated process for the future</li>
<li>Added MD5-sess to Digest Auth</li>
<li>Accept per-file headers in multipart file POST messages.</li>
<li>Fixed: Don't send the full URL on CONNECT messages.</li>
<li>Fixed: Correctly lowercase a redirect scheme.</li>
<li>Fixed: Cookies not persisted when set via functional API.</li>
<li>Fixed: Translate urllib3 ProxyError into a requests ProxyError derived from ConnectionError.</li>
<li>Updated internal urllib3 and chardet.</li>
</ul>
</div>
<div class="section" id="id36">
<h5>2.0.0 (2013-09-24)<a class="headerlink" href="#id36" title="永久链接至标题">¶</a></h5>
<p><strong>API Changes:</strong></p>
<ul class="simple">
<li>Keys in the Headers dictionary are now native strings on all Python versions,
i.e. bytestrings on Python 2, unicode on Python 3.</li>
<li>Proxy URLs now <em>must</em> have an explicit scheme. A <code class="docutils literal"><span class="pre">MissingSchema</span></code> exception
will be raised if they don't.</li>
<li>Timeouts now apply to read time if <code class="docutils literal"><span class="pre">Stream=False</span></code>.</li>
<li><code class="docutils literal"><span class="pre">RequestException</span></code> is now a subclass of <code class="docutils literal"><span class="pre">IOError</span></code>, not <code class="docutils literal"><span class="pre">RuntimeError</span></code>.</li>
<li>Added new method to <code class="docutils literal"><span class="pre">PreparedRequest</span></code> objects: <code class="docutils literal"><span class="pre">PreparedRequest.copy()</span></code>.</li>
<li>Added new method to <code class="docutils literal"><span class="pre">Session</span></code> objects: <code class="docutils literal"><span class="pre">Session.update_request()</span></code>. This
method updates a <code class="docutils literal"><span class="pre">Request</span></code> object with the data (e.g. cookies) stored on
the <code class="docutils literal"><span class="pre">Session</span></code>.</li>
<li>Added new method to <code class="docutils literal"><span class="pre">Session</span></code> objects: <code class="docutils literal"><span class="pre">Session.prepare_request()</span></code>. This
method updates and prepares a <code class="docutils literal"><span class="pre">Request</span></code> object, and returns the
corresponding <code class="docutils literal"><span class="pre">PreparedRequest</span></code> object.</li>
<li>Added new method to <code class="docutils literal"><span class="pre">HTTPAdapter</span></code> objects: <code class="docutils literal"><span class="pre">HTTPAdapter.proxy_headers()</span></code>.
This should not be called directly, but improves the subclass interface.</li>
<li><code class="docutils literal"><span class="pre">httplib.IncompleteRead</span></code> exceptions caused by incorrect chunked encoding
will now raise a Requests <code class="docutils literal"><span class="pre">ChunkedEncodingError</span></code> instead.</li>
<li>Invalid percent-escape sequences now cause a Requests <code class="docutils literal"><span class="pre">InvalidURL</span></code>
exception to be raised.</li>
<li>HTTP 208 no longer uses reason phrase <code class="docutils literal"><span class="pre">&quot;im_used&quot;</span></code>. Correctly uses
<code class="docutils literal"><span class="pre">&quot;already_reported&quot;</span></code>.</li>
<li>HTTP 226 reason added (<code class="docutils literal"><span class="pre">&quot;im_used&quot;</span></code>).</li>
</ul>
<p><strong>Bugfixes:</strong></p>
<ul class="simple">
<li>Vastly improved proxy support, including the CONNECT verb. Special thanks to
the many contributors who worked towards this improvement.</li>
<li>Cookies are now properly managed when 401 authentication responses are
received.</li>
<li>Chunked encoding fixes.</li>
<li>Support for mixed case schemes.</li>
<li>Better handling of streaming downloads.</li>
<li>Retrieve environment proxies from more locations.</li>
<li>Minor cookies fixes.</li>
<li>Improved redirect behaviour.</li>
<li>Improved streaming behaviour, particularly for compressed data.</li>
<li>Miscellaneous small Python 3 text encoding bugs.</li>
<li><code class="docutils literal"><span class="pre">.netrc</span></code> no longer overrides explicit auth.</li>
<li>Cookies set by hooks are now correctly persisted on Sessions.</li>
<li>Fix problem with cookies that specify port numbers in their host field.</li>
<li><code class="docutils literal"><span class="pre">BytesIO</span></code> can be used to perform streaming uploads.</li>
<li>More generous parsing of the <code class="docutils literal"><span class="pre">no_proxy</span></code> environment variable.</li>
<li>Non-string objects can be passed in data values alongside files.</li>
</ul>
</div>
<div class="section" id="id37">
<h5>1.2.3 (2013-05-25)<a class="headerlink" href="#id37" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Simple packaging fix</li>
</ul>
</div>
<div class="section" id="id38">
<h5>1.2.2 (2013-05-23)<a class="headerlink" href="#id38" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Simple packaging fix</li>
</ul>
</div>
<div class="section" id="id39">
<h5>1.2.1 (2013-05-20)<a class="headerlink" href="#id39" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>301 and 302 redirects now change the verb to GET for all verbs, not just
POST, improving browser compatibility.</li>
<li>Python 3.3.2 compatibility</li>
<li>Always percent-encode location headers</li>
<li>Fix connection adapter matching to be most-specific first</li>
<li>new argument to the default connection adapter for passing a block argument</li>
<li>prevent a KeyError when there's no link headers</li>
</ul>
</div>
<div class="section" id="id40">
<h5>1.2.0 (2013-03-31)<a class="headerlink" href="#id40" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Fixed cookies on sessions and on requests</li>
<li>Significantly change how hooks are dispatched - hooks now receive all the
arguments specified by the user when making a request so hooks can make a
secondary request with the same parameters. This is especially necessary for
authentication handler authors</li>
<li>certifi support was removed</li>
<li>Fixed bug where using OAuth 1 with body <code class="docutils literal"><span class="pre">signature_type</span></code> sent no data</li>
<li>Major proxy work thanks to &#64;Lukasa including parsing of proxy authentication
from the proxy url</li>
<li>Fix DigestAuth handling too many 401s</li>
<li>Update vendored urllib3 to include SSL bug fixes</li>
<li>Allow keyword arguments to be passed to <code class="docutils literal"><span class="pre">json.loads()</span></code> via the
<code class="docutils literal"><span class="pre">Response.json()</span></code> method</li>
<li>Don't send <code class="docutils literal"><span class="pre">Content-Length</span></code> header by default on <code class="docutils literal"><span class="pre">GET</span></code> or <code class="docutils literal"><span class="pre">HEAD</span></code>
requests</li>
<li>Add <code class="docutils literal"><span class="pre">elapsed</span></code> attribute to <code class="docutils literal"><span class="pre">Response</span></code> objects to time how long a request
took.</li>
<li>Fix <code class="docutils literal"><span class="pre">RequestsCookieJar</span></code></li>
<li>Sessions and Adapters are now picklable, i.e., can be used with the
multiprocessing library</li>
<li>Update charade to version 1.0.3</li>
</ul>
<p>The change in how hooks are dispatched will likely cause a great deal of
issues.</p>
</div>
<div class="section" id="id41">
<h5>1.1.0 (2013-01-10)<a class="headerlink" href="#id41" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>CHUNKED REQUESTS</li>
<li>Support for iterable response bodies</li>
<li>Assume servers persist redirect params</li>
<li>Allow explicit content types to be specified for file data</li>
<li>Make merge_kwargs case-insensitive when looking up keys</li>
</ul>
</div>
<div class="section" id="id42">
<h5>1.0.3 (2012-12-18)<a class="headerlink" href="#id42" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Fix file upload encoding bug</li>
<li>Fix cookie behavior</li>
</ul>
</div>
<div class="section" id="id43">
<h5>1.0.2 (2012-12-17)<a class="headerlink" href="#id43" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Proxy fix for HTTPAdapter.</li>
</ul>
</div>
<div class="section" id="id44">
<h5>1.0.1 (2012-12-17)<a class="headerlink" href="#id44" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Cert verification exception bug.</li>
<li>Proxy fix for HTTPAdapter.</li>
</ul>
</div>
<div class="section" id="id45">
<h5>1.0.0 (2012-12-17)<a class="headerlink" href="#id45" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Massive Refactor and Simplification</li>
<li>Switch to Apache 2.0 license</li>
<li>Swappable Connection Adapters</li>
<li>Mountable Connection Adapters</li>
<li>Mutable ProcessedRequest chain</li>
<li>/s/prefetch/stream</li>
<li>Removal of all configuration</li>
<li>Standard library logging</li>
<li>Make Response.json() callable, not property.</li>
<li>Usage of new charade project, which provides python 2 and 3 simultaneous chardet.</li>
<li>Removal of all hooks except 'response'</li>
<li>Removal of all authentication helpers (OAuth, Kerberos)</li>
</ul>
<p>This is not a backwards compatible change.</p>
</div>
<div class="section" id="id46">
<h5>0.14.2 (2012-10-27)<a class="headerlink" href="#id46" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Improved mime-compatible JSON handling</li>
<li>Proxy fixes</li>
<li>Path hack fixes</li>
<li>Case-Insensitive Content-Encoding headers</li>
<li>Support for CJK parameters in form posts</li>
</ul>
</div>
<div class="section" id="id47">
<h5>0.14.1 (2012-10-01)<a class="headerlink" href="#id47" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Python 3.3 Compatibility</li>
<li>Simply default accept-encoding</li>
<li>Bugfixes</li>
</ul>
</div>
<div class="section" id="id48">
<h5>0.14.0 (2012-09-02)<a class="headerlink" href="#id48" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>No more iter_content errors if already downloaded.</li>
</ul>
</div>
<div class="section" id="id49">
<h5>0.13.9 (2012-08-25)<a class="headerlink" href="#id49" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Fix for OAuth + POSTs</li>
<li>Remove exception eating from dispatch_hook</li>
<li>General bugfixes</li>
</ul>
</div>
<div class="section" id="id50">
<h5>0.13.8 (2012-08-21)<a class="headerlink" href="#id50" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Incredible Link header support :)</li>
</ul>
</div>
<div class="section" id="id51">
<h5>0.13.7 (2012-08-19)<a class="headerlink" href="#id51" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Support for (key, value) lists everywhere.</li>
<li>Digest Authentication improvements.</li>
<li>Ensure proxy exclusions work properly.</li>
<li>Clearer UnicodeError exceptions.</li>
<li>Automatic casting of URLs to strings (fURL and such)</li>
<li>Bugfixes.</li>
</ul>
</div>
<div class="section" id="id52">
<h5>0.13.6 (2012-08-06)<a class="headerlink" href="#id52" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Long awaited fix for hanging connections!</li>
</ul>
</div>
<div class="section" id="id53">
<h5>0.13.5 (2012-07-27)<a class="headerlink" href="#id53" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Packaging fix</li>
</ul>
</div>
<div class="section" id="id54">
<h5>0.13.4 (2012-07-27)<a class="headerlink" href="#id54" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>GSSAPI/Kerberos authentication!</li>
<li>App Engine 2.7 Fixes!</li>
<li>Fix leaking connections (from urllib3 update)</li>
<li>OAuthlib path hack fix</li>
<li>OAuthlib URL parameters fix.</li>
</ul>
</div>
<div class="section" id="id55">
<h5>0.13.3 (2012-07-12)<a class="headerlink" href="#id55" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Use simplejson if available.</li>
<li>Do not hide SSLErrors behind Timeouts.</li>
<li>Fixed param handling with urls containing fragments.</li>
<li>Significantly improved information in User Agent.</li>
<li>client certificates are ignored when verify=False</li>
</ul>
</div>
<div class="section" id="id56">
<h5>0.13.2 (2012-06-28)<a class="headerlink" href="#id56" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Zero dependencies (once again)!</li>
<li>New: Response.reason</li>
<li>Sign querystring parameters in OAuth 1.0</li>
<li>Client certificates no longer ignored when verify=False</li>
<li>Add openSUSE certificate support</li>
</ul>
</div>
<div class="section" id="id57">
<h5>0.13.1 (2012-06-07)<a class="headerlink" href="#id57" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Allow passing a file or file-like object as data.</li>
<li>Allow hooks to return responses that indicate errors.</li>
<li>Fix Response.text and Response.json for body-less responses.</li>
</ul>
</div>
<div class="section" id="id58">
<h5>0.13.0 (2012-05-29)<a class="headerlink" href="#id58" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Removal of Requests.async in favor of <a class="reference external" href="https://github.com/kennethreitz/grequests">grequests</a></li>
<li>Allow disabling of cookie persistence.</li>
<li>New implementation of safe_mode</li>
<li>cookies.get now supports default argument</li>
<li>Session cookies not saved when Session.request is called with return_response=False</li>
<li>Env: no_proxy support.</li>
<li>RequestsCookieJar improvements.</li>
<li>Various bug fixes.</li>
</ul>
</div>
<div class="section" id="id59">
<h5>0.12.1 (2012-05-08)<a class="headerlink" href="#id59" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>New <code class="docutils literal"><span class="pre">Response.json</span></code> property.</li>
<li>Ability to add string file uploads.</li>
<li>Fix out-of-range issue with iter_lines.</li>
<li>Fix iter_content default size.</li>
<li>Fix POST redirects containing files.</li>
</ul>
</div>
<div class="section" id="id60">
<h5>0.12.0 (2012-05-02)<a class="headerlink" href="#id60" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>EXPERIMENTAL OAUTH SUPPORT!</li>
<li>Proper CookieJar-backed cookies interface with awesome dict-like interface.</li>
<li>Speed fix for non-iterated content chunks.</li>
<li>Move <code class="docutils literal"><span class="pre">pre_request</span></code> to a more usable place.</li>
<li>New <code class="docutils literal"><span class="pre">pre_send</span></code> hook.</li>
<li>Lazily encode data, params, files.</li>
<li>Load system Certificate Bundle if <code class="docutils literal"><span class="pre">certify</span></code> isn't available.</li>
<li>Cleanups, fixes.</li>
</ul>
</div>
<div class="section" id="id61">
<h5>0.11.2 (2012-04-22)<a class="headerlink" href="#id61" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Attempt to use the OS's certificate bundle if <code class="docutils literal"><span class="pre">certifi</span></code> isn't available.</li>
<li>Infinite digest auth redirect fix.</li>
<li>Multi-part file upload improvements.</li>
<li>Fix decoding of invalid %encodings in URLs.</li>
<li>If there is no content in a response don't throw an error the second time that content is attempted to be read.</li>
<li>Upload data on redirects.</li>
</ul>
</div>
<div class="section" id="id62">
<h5>0.11.1 (2012-03-30)<a class="headerlink" href="#id62" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>POST redirects now break RFC to do what browsers do: Follow up with a GET.</li>
<li>New <code class="docutils literal"><span class="pre">strict_mode</span></code> configuration to disable new redirect behavior.</li>
</ul>
</div>
<div class="section" id="id63">
<h5>0.11.0 (2012-03-14)<a class="headerlink" href="#id63" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Private SSL Certificate support</li>
<li>Remove select.poll from Gevent monkeypatching</li>
<li>Remove redundant generator for chunked transfer encoding</li>
<li>Fix: Response.ok raises Timeout Exception in safe_mode</li>
</ul>
</div>
<div class="section" id="id64">
<h5>0.10.8 (2012-03-09)<a class="headerlink" href="#id64" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Generate chunked ValueError fix</li>
<li>Proxy configuration by environment variables</li>
<li>Simplification of iter_lines.</li>
<li>New <cite>trust_env</cite> configuration for disabling system/environment hints.</li>
<li>Suppress cookie errors.</li>
</ul>
</div>
<div class="section" id="id65">
<h5>0.10.7 (2012-03-07)<a class="headerlink" href="#id65" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li><cite>encode_uri</cite> = False</li>
</ul>
</div>
<div class="section" id="id66">
<h5>0.10.6 (2012-02-25)<a class="headerlink" href="#id66" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Allow '=' in cookies.</li>
</ul>
</div>
<div class="section" id="id67">
<h5>0.10.5 (2012-02-25)<a class="headerlink" href="#id67" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Response body with 0 content-length fix.</li>
<li>New async.imap.</li>
<li>Don't fail on netrc.</li>
</ul>
</div>
<div class="section" id="id68">
<h5>0.10.4 (2012-02-20)<a class="headerlink" href="#id68" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Honor netrc.</li>
</ul>
</div>
<div class="section" id="id69">
<h5>0.10.3 (2012-02-20)<a class="headerlink" href="#id69" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>HEAD requests don't follow redirects anymore.</li>
<li>raise_for_status() doesn't raise for 3xx anymore.</li>
<li>Make Session objects picklable.</li>
<li>ValueError for invalid schema URLs.</li>
</ul>
</div>
<div class="section" id="id70">
<h5>0.10.2 (2012-01-15)<a class="headerlink" href="#id70" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Vastly improved URL quoting.</li>
<li>Additional allowed cookie key values.</li>
<li>Attempted fix for &quot;Too many open files&quot; Error</li>
<li>Replace unicode errors on first pass, no need for second pass.</li>
<li>Append '/' to bare-domain urls before query insertion.</li>
<li>Exceptions now inherit from RuntimeError.</li>
<li>Binary uploads + auth fix.</li>
<li>Bugfixes.</li>
</ul>
</div>
<div class="section" id="id71">
<h5>0.10.1 (2012-01-23)<a class="headerlink" href="#id71" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>PYTHON 3 SUPPORT!</li>
<li>Dropped 2.5 Support. (<em>Backwards Incompatible</em>)</li>
</ul>
</div>
<div class="section" id="id72">
<h5>0.10.0 (2012-01-21)<a class="headerlink" href="#id72" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Response.content</span></code> is now bytes-only. (<em>Backwards Incompatible</em>)</li>
<li>New <code class="docutils literal"><span class="pre">Response.text</span></code> is unicode-only.</li>
<li>If no <code class="docutils literal"><span class="pre">Response.encoding</span></code> is specified and <code class="docutils literal"><span class="pre">chardet</span></code> is available, <code class="docutils literal"><span class="pre">Response.text</span></code> will guess an encoding.</li>
<li>Default to ISO-8859-1 (Western) encoding for &quot;text&quot; subtypes.</li>
<li>Removal of <cite>decode_unicode</cite>. (<em>Backwards Incompatible</em>)</li>
<li>New multiple-hooks system.</li>
<li>New <code class="docutils literal"><span class="pre">Response.register_hook</span></code> for registering hooks within the pipeline.</li>
<li><code class="docutils literal"><span class="pre">Response.url</span></code> is now Unicode.</li>
</ul>
</div>
<div class="section" id="id73">
<h5>0.9.3 (2012-01-18)<a class="headerlink" href="#id73" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>SSL verify=False bugfix (apparent on windows machines).</li>
</ul>
</div>
<div class="section" id="id74">
<h5>0.9.2 (2012-01-18)<a class="headerlink" href="#id74" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Asynchronous async.send method.</li>
<li>Support for proper chunk streams with boundaries.</li>
<li>session argument for Session classes.</li>
<li>Print entire hook tracebacks, not just exception instance.</li>
<li>Fix response.iter_lines from pending next line.</li>
<li>Fix but in HTTP-digest auth w/ URI having query strings.</li>
<li>Fix in Event Hooks section.</li>
<li>Urllib3 update.</li>
</ul>
</div>
<div class="section" id="id75">
<h5>0.9.1 (2012-01-06)<a class="headerlink" href="#id75" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>danger_mode for automatic Response.raise_for_status()</li>
<li>Response.iter_lines refactor</li>
</ul>
</div>
<div class="section" id="id76">
<h5>0.9.0 (2011-12-28)<a class="headerlink" href="#id76" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>verify ssl is default.</li>
</ul>
</div>
<div class="section" id="id77">
<h5>0.8.9 (2011-12-28)<a class="headerlink" href="#id77" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Packaging fix.</li>
</ul>
</div>
<div class="section" id="id78">
<h5>0.8.8 (2011-12-28)<a class="headerlink" href="#id78" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>SSL CERT VERIFICATION!</li>
<li>Release of Cerifi: Mozilla's cert list.</li>
<li>New 'verify' argument for SSL requests.</li>
<li>Urllib3 update.</li>
</ul>
</div>
<div class="section" id="id79">
<h5>0.8.7 (2011-12-24)<a class="headerlink" href="#id79" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>iter_lines last-line truncation fix</li>
<li>Force safe_mode for async requests</li>
<li>Handle safe_mode exceptions more consistently</li>
<li>Fix iteration on null responses in safe_mode</li>
</ul>
</div>
<div class="section" id="id80">
<h5>0.8.6 (2011-12-18)<a class="headerlink" href="#id80" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Socket timeout fixes.</li>
<li>Proxy Authorization support.</li>
</ul>
</div>
<div class="section" id="id81">
<h5>0.8.5 (2011-12-14)<a class="headerlink" href="#id81" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Response.iter_lines!</li>
</ul>
</div>
<div class="section" id="id82">
<h5>0.8.4 (2011-12-11)<a class="headerlink" href="#id82" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Prefetch bugfix.</li>
<li>Added license to installed version.</li>
</ul>
</div>
<div class="section" id="id83">
<h5>0.8.3 (2011-11-27)<a class="headerlink" href="#id83" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Converted auth system to use simpler callable objects.</li>
<li>New session parameter to API methods.</li>
<li>Display full URL while logging.</li>
</ul>
</div>
<div class="section" id="id84">
<h5>0.8.2 (2011-11-19)<a class="headerlink" href="#id84" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>New Unicode decoding system, based on over-ridable <cite>Response.encoding</cite>.</li>
<li>Proper URL slash-quote handling.</li>
<li>Cookies with <code class="docutils literal"><span class="pre">[</span></code>, <code class="docutils literal"><span class="pre">]</span></code>, and <code class="docutils literal"><span class="pre">_</span></code> allowed.</li>
</ul>
</div>
<div class="section" id="id85">
<h5>0.8.1 (2011-11-15)<a class="headerlink" href="#id85" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>URL Request path fix</li>
<li>Proxy fix.</li>
<li>Timeouts fix.</li>
</ul>
</div>
<div class="section" id="id86">
<h5>0.8.0 (2011-11-13)<a class="headerlink" href="#id86" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Keep-alive support!</li>
<li>Complete removal of Urllib2</li>
<li>Complete removal of Poster</li>
<li>Complete removal of CookieJars</li>
<li>New ConnectionError raising</li>
<li>Safe_mode for error catching</li>
<li>prefetch parameter for request methods</li>
<li>OPTION method</li>
<li>Async pool size throttling</li>
<li>File uploads send real names</li>
<li>Vendored in urllib3</li>
</ul>
</div>
<div class="section" id="id87">
<h5>0.7.6 (2011-11-07)<a class="headerlink" href="#id87" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Digest authentication bugfix (attach query data to path)</li>
</ul>
</div>
<div class="section" id="id88">
<h5>0.7.5 (2011-11-04)<a class="headerlink" href="#id88" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Response.content = None if there was an invalid response.</li>
<li>Redirection auth handling.</li>
</ul>
</div>
<div class="section" id="id89">
<h5>0.7.4 (2011-10-26)<a class="headerlink" href="#id89" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Session Hooks fix.</li>
</ul>
</div>
<div class="section" id="id90">
<h5>0.7.3 (2011-10-23)<a class="headerlink" href="#id90" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Digest Auth fix.</li>
</ul>
</div>
<div class="section" id="id91">
<h5>0.7.2 (2011-10-23)<a class="headerlink" href="#id91" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>PATCH Fix.</li>
</ul>
</div>
<div class="section" id="id92">
<h5>0.7.1 (2011-10-23)<a class="headerlink" href="#id92" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Move away from urllib2 authentication handling.</li>
<li>Fully Remove AuthManager, AuthObject, &amp;c.</li>
<li>New tuple-based auth system with handler callbacks.</li>
</ul>
</div>
<div class="section" id="id93">
<h5>0.7.0 (2011-10-22)<a class="headerlink" href="#id93" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Sessions are now the primary interface.</li>
<li>Deprecated InvalidMethodException.</li>
<li>PATCH fix.</li>
<li>New config system (no more global settings).</li>
</ul>
</div>
<div class="section" id="id94">
<h5>0.6.6 (2011-10-19)<a class="headerlink" href="#id94" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Session parameter bugfix (params merging).</li>
</ul>
</div>
<div class="section" id="id95">
<h5>0.6.5 (2011-10-18)<a class="headerlink" href="#id95" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Offline (fast) test suite.</li>
<li>Session dictionary argument merging.</li>
</ul>
</div>
<div class="section" id="id96">
<h5>0.6.4 (2011-10-13)<a class="headerlink" href="#id96" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Automatic decoding of unicode, based on HTTP Headers.</li>
<li>New <code class="docutils literal"><span class="pre">decode_unicode</span></code> setting.</li>
<li>Removal of <code class="docutils literal"><span class="pre">r.read/close</span></code> methods.</li>
<li>New <code class="docutils literal"><span class="pre">r.faw</span></code> interface for advanced response usage.*</li>
<li>Automatic expansion of parameterized headers.</li>
</ul>
</div>
<div class="section" id="id97">
<h5>0.6.3 (2011-10-13)<a class="headerlink" href="#id97" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Beautiful <code class="docutils literal"><span class="pre">requests.async</span></code> module, for making async requests w/ gevent.</li>
</ul>
</div>
<div class="section" id="id98">
<h5>0.6.2 (2011-10-09)<a class="headerlink" href="#id98" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>GET/HEAD obeys allow_redirects=False.</li>
</ul>
</div>
<div class="section" id="id99">
<h5>0.6.1 (2011-08-20)<a class="headerlink" href="#id99" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Enhanced status codes experience <code class="docutils literal"><span class="pre">\o/</span></code></li>
<li>Set a maximum number of redirects (<code class="docutils literal"><span class="pre">settings.max_redirects</span></code>)</li>
<li>Full Unicode URL support</li>
<li>Support for protocol-less redirects.</li>
<li>Allow for arbitrary request types.</li>
<li>Bugfixes</li>
</ul>
</div>
<div class="section" id="id100">
<h5>0.6.0 (2011-08-17)<a class="headerlink" href="#id100" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>New callback hook system</li>
<li>New persistent sessions object and context manager</li>
<li>Transparent Dict-cookie handling</li>
<li>Status code reference object</li>
<li>Removed Response.cached</li>
<li>Added Response.request</li>
<li>All args are kwargs</li>
<li>Relative redirect support</li>
<li>HTTPError handling improvements</li>
<li>Improved https testing</li>
<li>Bugfixes</li>
</ul>
</div>
<div class="section" id="id101">
<h5>0.5.1 (2011-07-23)<a class="headerlink" href="#id101" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>International Domain Name Support!</li>
<li>Access headers without fetching entire body (<code class="docutils literal"><span class="pre">read()</span></code>)</li>
<li>Use lists as dicts for parameters</li>
<li>Add Forced Basic Authentication</li>
<li>Forced Basic is default authentication type</li>
<li><code class="docutils literal"><span class="pre">python-requests.org</span></code> default User-Agent header</li>
<li>CaseInsensitiveDict lower-case caching</li>
<li>Response.history bugfix</li>
</ul>
</div>
<div class="section" id="id102">
<h5>0.5.0 (2011-06-21)<a class="headerlink" href="#id102" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>PATCH Support</li>
<li>Support for Proxies</li>
<li>HTTPBin Test Suite</li>
<li>Redirect Fixes</li>
<li>settings.verbose stream writing</li>
<li>Querystrings for all methods</li>
<li>URLErrors (Connection Refused, Timeout, Invalid URLs) are treated as explicitly raised
<code class="docutils literal"><span class="pre">r.requests.get('hwe://blah');</span> <span class="pre">r.raise_for_status()</span></code></li>
</ul>
</div>
<div class="section" id="id103">
<h5>0.4.1 (2011-05-22)<a class="headerlink" href="#id103" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Improved Redirection Handling</li>
<li>New 'allow_redirects' param for following non-GET/HEAD Redirects</li>
<li>Settings module refactoring</li>
</ul>
</div>
<div class="section" id="id104">
<h5>0.4.0 (2011-05-15)<a class="headerlink" href="#id104" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Response.history: list of redirected responses</li>
<li>Case-Insensitive Header Dictionaries!</li>
<li>Unicode URLs</li>
</ul>
</div>
<div class="section" id="id105">
<h5>0.3.4 (2011-05-14)<a class="headerlink" href="#id105" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Urllib2 HTTPAuthentication Recursion fix (Basic/Digest)</li>
<li>Internal Refactor</li>
<li>Bytes data upload Bugfix</li>
</ul>
</div>
<div class="section" id="id106">
<h5>0.3.3 (2011-05-12)<a class="headerlink" href="#id106" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Request timeouts</li>
<li>Unicode url-encoded data</li>
<li>Settings context manager and module</li>
</ul>
</div>
<div class="section" id="id107">
<h5>0.3.2 (2011-04-15)<a class="headerlink" href="#id107" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Automatic Decompression of GZip Encoded Content</li>
<li>AutoAuth Support for Tupled HTTP Auth</li>
</ul>
</div>
<div class="section" id="id108">
<h5>0.3.1 (2011-04-01)<a class="headerlink" href="#id108" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Cookie Changes</li>
<li>Response.read()</li>
<li>Poster fix</li>
</ul>
</div>
<div class="section" id="id109">
<h5>0.3.0 (2011-02-25)<a class="headerlink" href="#id109" title="永久链接至标题">¶</a></h5>
<ul>
<li><p class="first">Automatic Authentication API Change</p>
</li>
<li><p class="first">Smarter Query URL Parameterization</p>
</li>
<li><p class="first">Allow file uploads and POST data together</p>
</li>
<li><dl class="first docutils">
<dt>New Authentication Manager System</dt>
<dd><ul class="first last simple">
<li>Simpler Basic HTTP System</li>
<li>Supports all build-in urllib2 Auths</li>
<li>Allows for custom Auth Handlers</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id110">
<h5>0.2.4 (2011-02-19)<a class="headerlink" href="#id110" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Python 2.5 Support</li>
<li>PyPy-c v1.4 Support</li>
<li>Auto-Authentication tests</li>
<li>Improved Request object constructor</li>
</ul>
</div>
<div class="section" id="id111">
<h5>0.2.3 (2011-02-15)<a class="headerlink" href="#id111" title="永久链接至标题">¶</a></h5>
<ul>
<li><dl class="first docutils">
<dt>New HTTPHandling Methods</dt>
<dd><ul class="first last simple">
<li>Response.__nonzero__ (false if bad HTTP Status)</li>
<li>Response.ok (True if expected HTTP Status)</li>
<li>Response.error (Logged HTTPError if bad HTTP Status)</li>
<li>Response.raise_for_status() (Raises stored HTTPError)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="id112">
<h5>0.2.2 (2011-02-14)<a class="headerlink" href="#id112" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Still handles request in the event of an HTTPError. (Issue #2)</li>
<li>Eventlet and Gevent Monkeypatch support.</li>
<li>Cookie Support (Issue #1)</li>
</ul>
</div>
<div class="section" id="id113">
<h5>0.2.1 (2011-02-14)<a class="headerlink" href="#id113" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Added file attribute to POST and PUT requests for multipart-encode file uploads.</li>
<li>Added Request.url attribute for context and redirects</li>
</ul>
</div>
<div class="section" id="id114">
<h5>0.2.0 (2011-02-14)<a class="headerlink" href="#id114" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Birth!</li>
</ul>
</div>
<div class="section" id="id115">
<h5>0.0.1 (2011-02-13)<a class="headerlink" href="#id115" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li>Frustration</li>
<li>Conception</li>
</ul>
</div>
</div>
</div>
<span id="document-community/release-process"></span><div class="section" id="release-process-and-rules">
<h3>Release Process and Rules<a class="headerlink" href="#release-process-and-rules" title="永久链接至标题">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">v2.6.2 新版功能.</span></p>
</div>
<p>Starting with the version to be released after <code class="docutils literal"><span class="pre">v2.6.2</span></code>, the following rules
will govern and describe how the Requests core team produces a new release.</p>
<div class="section" id="major-releases">
<h4>Major Releases<a class="headerlink" href="#major-releases" title="永久链接至标题">¶</a></h4>
<p>A major release will include breaking changes. When it is versioned, it will
be versioned as <code class="docutils literal"><span class="pre">vX.0.0</span></code>. For example, if the previous release was
<code class="docutils literal"><span class="pre">v10.2.7</span></code> the next version will be <code class="docutils literal"><span class="pre">v11.0.0</span></code>.</p>
<p>Breaking changes are changes that break backwards compatibility with prior
versions. If the project were to change the <code class="docutils literal"><span class="pre">text</span></code> attribute on a
<code class="docutils literal"><span class="pre">Response</span></code> object to a method, that would only happen in a Major release.</p>
<p>Major releases may also include miscellaneous bug fixes and upgrades to
vendored packages. The core developers of Requests are committed to providing
a good user experience. This means we're also committed to preserving
backwards compatibility as much as possible. Major releases will be infrequent
and will need strong justifications before they are considered.</p>
</div>
<div class="section" id="minor-releases">
<h4>Minor Releases<a class="headerlink" href="#minor-releases" title="永久链接至标题">¶</a></h4>
<p>A minor release will not include breaking changes but may include
miscellaneous bug fixes and upgrades to vendored packages. If the previous
version of Requests released was <code class="docutils literal"><span class="pre">v10.2.7</span></code> a minor release would be
versioned as <code class="docutils literal"><span class="pre">v10.3.0</span></code>.</p>
<p>Minor releases will be backwards compatible with releases that have the same
major version number. In other words, all versions that would start with
<code class="docutils literal"><span class="pre">v10.</span></code> should be compatible with each other.</p>
</div>
<div class="section" id="hotfix-releases">
<h4>Hotfix Releases<a class="headerlink" href="#hotfix-releases" title="永久链接至标题">¶</a></h4>
<p>A hotfix release will only include bug fixes that were missed when the project
released the previous version. If the previous version of Requests released
<code class="docutils literal"><span class="pre">v10.2.7</span></code> the hotfix release would be versioned as <code class="docutils literal"><span class="pre">v10.2.8</span></code>.</p>
<p>Hotfixes will <strong>not</strong> include upgrades to vendored dependences after
<code class="docutils literal"><span class="pre">v2.6.2</span></code></p>
</div>
<div class="section" id="reasoning">
<h4>Reasoning<a class="headerlink" href="#reasoning" title="永久链接至标题">¶</a></h4>
<p>In the 2.5 and 2.6 release series, the Requests core team upgraded vendored
dependencies and caused a great deal of headaches for both users and the core
team. To reduce this pain, we're forming a concrete set of procedures so
expectations will be properly set.</p>
</div>
</div>
</div>
</div>
<div class="section" id="api">
<h2>API 文档/指南<a class="headerlink" href="#api" title="永久链接至标题">¶</a></h2>
<p>如果你要了解具体的函数、类、方法，这部分文档就是为你准备的。</p>
<div class="toctree-wrapper compound">
<span id="document-api"></span><div class="section" id="module-requests">
<span id="id1"></span><span id="api"></span><h3>开发接口<a class="headerlink" href="#module-requests" title="永久链接至标题">¶</a></h3>
<p>这部分文档包含了 Requests 所有的接口。对于 Requests 依赖的外部库部分，我们在这里介绍最重要的部分，并提供了规范文档的链接。</p>
<div class="section" id="id2">
<h4>主要接口<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h4>
<p>Requests 所有的功能都可以通过以下 7 个方法访问。它们全部都会返回一个
<a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> 对象的实例。</p>
<dl class="function">
<dt id="requests.request">
<code class="descclassname">requests.</code><code class="descname">request</code><span class="sig-paren">(</span><em>method</em>, <em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/api.html#request"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.request" title="永久链接至目标">¶</a></dt>
<dd><p>Constructs and sends a <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>method</strong> -- method for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>params</strong> -- (optional) Dictionary or bytes to be sent in the query string for the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>data</strong> -- (optional) Dictionary, bytes, or file-like object to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>json</strong> -- (optional) json data to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>headers</strong> -- (optional) Dictionary of HTTP Headers to send with the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>cookies</strong> -- (optional) Dict or CookieJar object to send with the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>files</strong> -- (optional) Dictionary of <code class="docutils literal"><span class="pre">'name':</span> <span class="pre">file-like-objects</span></code> (or <code class="docutils literal"><span class="pre">{'name':</span> <span class="pre">file-tuple}</span></code>) for multipart encoding upload.
<code class="docutils literal"><span class="pre">file-tuple</span></code> can be a 2-tuple <code class="docutils literal"><span class="pre">('filename',</span> <span class="pre">fileobj)</span></code>, 3-tuple <code class="docutils literal"><span class="pre">('filename',</span> <span class="pre">fileobj,</span> <span class="pre">'content_type')</span></code>
or a 4-tuple <code class="docutils literal"><span class="pre">('filename',</span> <span class="pre">fileobj,</span> <span class="pre">'content_type',</span> <span class="pre">custom_headers)</span></code>, where <code class="docutils literal"><span class="pre">'content-type'</span></code> is a string
defining the content type of the given file and <code class="docutils literal"><span class="pre">custom_headers</span></code> a dict-like object containing additional headers
to add for the file.</li>
<li><strong>auth</strong> -- (optional) Auth tuple to enable Basic/Digest/Custom HTTP Auth.</li>
<li><strong>timeout</strong> (<em>float or tuple</em>) -- (optional) How long to wait for the server to send data
before giving up, as a float, or a <a class="reference internal" href="index.html#timeouts"><span>(connect timeout, read
timeout)</span></a> tuple.</li>
<li><strong>allow_redirects</strong> (<em>bool</em>) -- (optional) Boolean. Set to True if POST/PUT/DELETE redirect following is allowed.</li>
<li><strong>proxies</strong> -- (optional) Dictionary mapping protocol to the URL of the proxy.</li>
<li><strong>verify</strong> -- (optional) whether the SSL cert will be verified. A CA_BUNDLE path can also be provided. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>stream</strong> -- (optional) if <code class="docutils literal"><span class="pre">False</span></code>, the response content will be immediately downloaded.</li>
<li><strong>cert</strong> -- (optional) if String, path to ssl client cert file (.pem). If Tuple, ('cert', 'key') pair.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last"><a class="reference internal" href="index.html#requests.Response" title="requests.Response">requests.Response</a></p>
</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;http://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="requests.head">
<code class="descclassname">requests.</code><code class="descname">head</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/api.html#head"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.head" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a HEAD request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last"><a class="reference internal" href="index.html#requests.Response" title="requests.Response">requests.Response</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.get">
<code class="descclassname">requests.</code><code class="descname">get</code><span class="sig-paren">(</span><em>url</em>, <em>params=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/api.html#get"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.get" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a GET request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>params</strong> -- (optional) Dictionary or bytes to be sent in the query string for the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last"><a class="reference internal" href="index.html#requests.Response" title="requests.Response">requests.Response</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.post">
<code class="descclassname">requests.</code><code class="descname">post</code><span class="sig-paren">(</span><em>url</em>, <em>data=None</em>, <em>json=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/api.html#post"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.post" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a POST request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>data</strong> -- (optional) Dictionary, bytes, or file-like object to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>json</strong> -- (optional) json data to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last"><a class="reference internal" href="index.html#requests.Response" title="requests.Response">requests.Response</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.put">
<code class="descclassname">requests.</code><code class="descname">put</code><span class="sig-paren">(</span><em>url</em>, <em>data=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/api.html#put"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.put" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a PUT request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>data</strong> -- (optional) Dictionary, bytes, or file-like object to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last"><a class="reference internal" href="index.html#requests.Response" title="requests.Response">requests.Response</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.patch">
<code class="descclassname">requests.</code><code class="descname">patch</code><span class="sig-paren">(</span><em>url</em>, <em>data=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/api.html#patch"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.patch" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a PATCH request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>data</strong> -- (optional) Dictionary, bytes, or file-like object to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last"><a class="reference internal" href="index.html#requests.Response" title="requests.Response">requests.Response</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.delete">
<code class="descclassname">requests.</code><code class="descname">delete</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/api.html#delete"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.delete" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a DELETE request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last"><a class="reference internal" href="index.html#requests.Response" title="requests.Response">requests.Response</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id3">
<h4>异常<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h4>
<dl class="exception">
<dt id="requests.RequestException">
<em class="property">exception </em><code class="descclassname">requests.</code><code class="descname">RequestException</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/exceptions.html#RequestException"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.RequestException" title="永久链接至目标">¶</a></dt>
<dd><p>There was an ambiguous exception that occurred while handling your
request.</p>
</dd></dl>

<dl class="exception">
<dt id="requests.ConnectionError">
<em class="property">exception </em><code class="descclassname">requests.</code><code class="descname">ConnectionError</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/exceptions.html#ConnectionError"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.ConnectionError" title="永久链接至目标">¶</a></dt>
<dd><p>A Connection error occurred.</p>
</dd></dl>

<dl class="exception">
<dt id="requests.HTTPError">
<em class="property">exception </em><code class="descclassname">requests.</code><code class="descname">HTTPError</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/exceptions.html#HTTPError"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.HTTPError" title="永久链接至目标">¶</a></dt>
<dd><p>An HTTP error occurred.</p>
</dd></dl>

<dl class="exception">
<dt id="requests.URLRequired">
<em class="property">exception </em><code class="descclassname">requests.</code><code class="descname">URLRequired</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/exceptions.html#URLRequired"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.URLRequired" title="永久链接至目标">¶</a></dt>
<dd><p>A valid URL is required to make a request.</p>
</dd></dl>

<dl class="exception">
<dt id="requests.TooManyRedirects">
<em class="property">exception </em><code class="descclassname">requests.</code><code class="descname">TooManyRedirects</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/exceptions.html#TooManyRedirects"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.TooManyRedirects" title="永久链接至目标">¶</a></dt>
<dd><p>Too many redirects.</p>
</dd></dl>

<dl class="exception">
<dt id="requests.ConnectTimeout">
<em class="property">exception </em><code class="descclassname">requests.</code><code class="descname">ConnectTimeout</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/exceptions.html#ConnectTimeout"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.ConnectTimeout" title="永久链接至目标">¶</a></dt>
<dd><p>The request timed out while trying to connect to the remote server.</p>
<p>Requests that produced this error are safe to retry.</p>
</dd></dl>

<dl class="exception">
<dt id="requests.ReadTimeout">
<em class="property">exception </em><code class="descclassname">requests.</code><code class="descname">ReadTimeout</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/exceptions.html#ReadTimeout"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.ReadTimeout" title="永久链接至目标">¶</a></dt>
<dd><p>The server did not send any data in the allotted amount of time.</p>
</dd></dl>

<dl class="exception">
<dt id="requests.Timeout">
<em class="property">exception </em><code class="descclassname">requests.</code><code class="descname">Timeout</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/exceptions.html#Timeout"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Timeout" title="永久链接至目标">¶</a></dt>
<dd><p>The request timed out.</p>
<p>Catching this error will catch both
<code class="xref py py-exc docutils literal"><span class="pre">ConnectTimeout</span></code> and
<code class="xref py py-exc docutils literal"><span class="pre">ReadTimeout</span></code> errors.</p>
</dd></dl>

</div>
<div class="section" id="id4">
<h4>请求会话<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h4>
<span class="target" id="sessionapi"></span><dl class="class">
<dt id="requests.Session">
<em class="property">class </em><code class="descclassname">requests.</code><code class="descname">Session</code><a class="reference internal" href="_modules/requests/sessions.html#Session"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session" title="永久链接至目标">¶</a></dt>
<dd><p>A Requests session.</p>
<p>Provides cookie persistence, connection-pooling, and configuration.</p>
<p>Basic Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<p>Or as a context manager:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="requests.Session.auth">
<code class="descname">auth</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.auth" title="永久链接至目标">¶</a></dt>
<dd><p>Default Authentication tuple or object to attach to
<a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.cert">
<code class="descname">cert</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.cert" title="永久链接至目标">¶</a></dt>
<dd><p>SSL certificate default.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.close"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.close" title="永久链接至目标">¶</a></dt>
<dd><p>Closes all adapters and as such the session</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.cookies">
<code class="descname">cookies</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.cookies" title="永久链接至目标">¶</a></dt>
<dd><p>A CookieJar containing all currently outstanding cookies set on this
session. By default it is a
<a class="reference internal" href="#requests.cookies.RequestsCookieJar" title="requests.cookies.RequestsCookieJar"><code class="xref py py-class docutils literal"><span class="pre">RequestsCookieJar</span></code></a>, but
may be any other <code class="docutils literal"><span class="pre">cookielib.CookieJar</span></code> compatible object.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.delete"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.delete" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a DELETE request. Returns <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.Session.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.get"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.get" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a GET request. Returns <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.Session.get_adapter">
<code class="descname">get_adapter</code><span class="sig-paren">(</span><em>url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.get_adapter"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.get_adapter" title="永久链接至目标">¶</a></dt>
<dd><p>Returns the appropriate connection adapter for the given URL.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.head">
<code class="descname">head</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.head"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.head" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a HEAD request. Returns <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.headers">
<code class="descname">headers</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.headers" title="永久链接至目标">¶</a></dt>
<dd><p>A case-insensitive dictionary of headers to be sent on each
<a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> sent from this
<a class="reference internal" href="#requests.Session" title="requests.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.hooks">
<code class="descname">hooks</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.hooks" title="永久链接至目标">¶</a></dt>
<dd><p>Event-handling hooks.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.max_redirects">
<code class="descname">max_redirects</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.max_redirects" title="永久链接至目标">¶</a></dt>
<dd><p>Maximum number of redirects allowed. If the request exceeds this
limit, a <a class="reference internal" href="#requests.TooManyRedirects" title="requests.TooManyRedirects"><code class="xref py py-class docutils literal"><span class="pre">TooManyRedirects</span></code></a> exception is raised.
This defaults to requests.models.DEFAULT_REDIRECT_LIMIT, which is
30.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.merge_environment_settings">
<code class="descname">merge_environment_settings</code><span class="sig-paren">(</span><em>url</em>, <em>proxies</em>, <em>stream</em>, <em>verify</em>, <em>cert</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.merge_environment_settings"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.merge_environment_settings" title="永久链接至目标">¶</a></dt>
<dd><p>Check the environment and merge it with some settings.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.mount">
<code class="descname">mount</code><span class="sig-paren">(</span><em>prefix</em>, <em>adapter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.mount"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.mount" title="永久链接至目标">¶</a></dt>
<dd><p>Registers a connection adapter to a prefix.</p>
<p>Adapters are sorted in descending order by key length.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.options">
<code class="descname">options</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.options"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.options" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a OPTIONS request. Returns <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.params">
<code class="descname">params</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.params" title="永久链接至目标">¶</a></dt>
<dd><p>Dictionary of querystring data to attach to each
<a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>. The dictionary values may be lists for
representing multivalued query parameters.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><em>url</em>, <em>data=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.patch"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.patch" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a PATCH request. Returns <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>data</strong> -- (optional) Dictionary, bytes, or file-like object to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.Session.post">
<code class="descname">post</code><span class="sig-paren">(</span><em>url</em>, <em>data=None</em>, <em>json=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.post"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.post" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a POST request. Returns <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>data</strong> -- (optional) Dictionary, bytes, or file-like object to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>json</strong> -- (optional) json to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.Session.prepare_request">
<code class="descname">prepare_request</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.prepare_request"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.prepare_request" title="永久链接至目标">¶</a></dt>
<dd><p>Constructs a <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> for
transmission and returns it. The <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> has settings
merged from the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> instance and those of the
<a class="reference internal" href="#requests.Session" title="requests.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>request</strong> -- <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> instance to prepare with this
session's settings.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.proxies">
<code class="descname">proxies</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.proxies" title="永久链接至目标">¶</a></dt>
<dd><p>Dictionary mapping protocol or protocol and host to the URL of the proxy
(e.g. {'http': 'foo.bar:3128', 'http://host.name': 'foo.bar:4012'}) to
be used on each <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.put">
<code class="descname">put</code><span class="sig-paren">(</span><em>url</em>, <em>data=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.put"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.put" title="永久链接至目标">¶</a></dt>
<dd><p>Sends a PUT request. Returns <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>data</strong> -- (optional) Dictionary, bytes, or file-like object to send in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">request</span></code> takes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.Session.rebuild_auth">
<code class="descname">rebuild_auth</code><span class="sig-paren">(</span><em>prepared_request</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.Session.rebuild_auth" title="永久链接至目标">¶</a></dt>
<dd><p>When being redirected we may want to strip authentication from the
request to avoid leaking credentials. This method intelligently removes
and reapplies authentication where possible to avoid credential loss.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.rebuild_method">
<code class="descname">rebuild_method</code><span class="sig-paren">(</span><em>prepared_request</em>, <em>response</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.Session.rebuild_method" title="永久链接至目标">¶</a></dt>
<dd><p>When being redirected we may want to change the method of the request
based on certain specs or browser behavior.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.rebuild_proxies">
<code class="descname">rebuild_proxies</code><span class="sig-paren">(</span><em>prepared_request</em>, <em>proxies</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.Session.rebuild_proxies" title="永久链接至目标">¶</a></dt>
<dd><p>This method re-evaluates the proxy configuration by considering the
environment variables. If we are redirected to a URL covered by
NO_PROXY, we strip the proxy configuration. Otherwise, we set missing
proxy keys for this URL (in case they were stripped by a previous
redirect).</p>
<p>This method also replaces the Proxy-Authorization header where
necessary.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.request">
<code class="descname">request</code><span class="sig-paren">(</span><em>method</em>, <em>url</em>, <em>params=None</em>, <em>data=None</em>, <em>headers=None</em>, <em>cookies=None</em>, <em>files=None</em>, <em>auth=None</em>, <em>timeout=None</em>, <em>allow_redirects=True</em>, <em>proxies=None</em>, <em>hooks=None</em>, <em>stream=None</em>, <em>verify=None</em>, <em>cert=None</em>, <em>json=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.request"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.request" title="永久链接至目标">¶</a></dt>
<dd><p>Constructs a <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>, prepares it and sends it.
Returns <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>method</strong> -- method for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>url</strong> -- URL for the new <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</li>
<li><strong>params</strong> -- (optional) Dictionary or bytes to be sent in the query
string for the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>data</strong> -- (optional) Dictionary, bytes, or file-like object to send
in the body of the <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>json</strong> -- (optional) json to send in the body of the
<a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>headers</strong> -- (optional) Dictionary of HTTP Headers to send with the
<a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>cookies</strong> -- (optional) Dict or CookieJar object to send with the
<a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>.</li>
<li><strong>files</strong> -- (optional) Dictionary of <code class="docutils literal"><span class="pre">'filename':</span> <span class="pre">file-like-objects</span></code>
for multipart encoding upload.</li>
<li><strong>auth</strong> -- (optional) Auth tuple or callable to enable
Basic/Digest/Custom HTTP Auth.</li>
<li><strong>timeout</strong> (<em>float or tuple</em>) -- (optional) How long to wait for the server to send
data before giving up, as a float, or a <a class="reference internal" href="index.html#timeouts"><span>(connect timeout,
read timeout)</span></a> tuple.</li>
<li><strong>allow_redirects</strong> (<em>bool</em>) -- (optional) Set to True by default.</li>
<li><strong>proxies</strong> -- (optional) Dictionary mapping protocol or protocol and
hostname to the URL of the proxy.</li>
<li><strong>stream</strong> -- (optional) whether to immediately download the response
content. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>verify</strong> -- (optional) whether the SSL cert will be verified.
A CA_BUNDLE path can also be provided. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>cert</strong> -- (optional) if String, path to ssl client cert file (.pem).
If Tuple, ('cert', 'key') pair.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回类型:</th><td class="field-body"><p class="first last"><a class="reference internal" href="index.html#requests.Response" title="requests.Response">requests.Response</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.Session.resolve_redirects">
<code class="descname">resolve_redirects</code><span class="sig-paren">(</span><em>resp</em>, <em>req</em>, <em>stream=False</em>, <em>timeout=None</em>, <em>verify=True</em>, <em>cert=None</em>, <em>proxies=None</em>, <em>**adapter_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.Session.resolve_redirects" title="永久链接至目标">¶</a></dt>
<dd><p>Receives a Response. Returns a generator of Responses.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Session.send">
<code class="descname">send</code><span class="sig-paren">(</span><em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/sessions.html#Session.send"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Session.send" title="永久链接至目标">¶</a></dt>
<dd><p>Send a given PreparedRequest.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.stream">
<code class="descname">stream</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.stream" title="永久链接至目标">¶</a></dt>
<dd><p>Stream response content default.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.trust_env">
<code class="descname">trust_env</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.trust_env" title="永久链接至目标">¶</a></dt>
<dd><p>Trust environment settings for proxy configuration, default
authentication and similar.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Session.verify">
<code class="descname">verify</code><em class="property"> = None</em><a class="headerlink" href="#requests.Session.verify" title="永久链接至目标">¶</a></dt>
<dd><p>SSL Verification default.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id5">
<h4>低级类<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h4>
<dl class="class">
<dt id="requests.Request">
<em class="property">class </em><code class="descclassname">requests.</code><code class="descname">Request</code><span class="sig-paren">(</span><em>method=None</em>, <em>url=None</em>, <em>headers=None</em>, <em>files=None</em>, <em>data=None</em>, <em>params=None</em>, <em>auth=None</em>, <em>cookies=None</em>, <em>hooks=None</em>, <em>json=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Request"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Request" title="永久链接至目标">¶</a></dt>
<dd><p>A user-created <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</p>
<p>Used to prepare a <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a>, which is sent to the server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>method</strong> -- HTTP method to use.</li>
<li><strong>url</strong> -- URL to send.</li>
<li><strong>headers</strong> -- dictionary of headers to send.</li>
<li><strong>files</strong> -- dictionary of {filename: fileobject} files to multipart upload.</li>
<li><strong>data</strong> -- the body to attach to the request. If a dictionary is provided, form-encoding will take place.</li>
<li><strong>json</strong> -- json for the body to attach to the request (if files or data is not specified).</li>
<li><strong>params</strong> -- dictionary of URL parameters to append to the URL.</li>
<li><strong>auth</strong> -- Auth handler or (user, pass) tuple.</li>
<li><strong>cookies</strong> -- dictionary or CookieJar of cookies to attach to this request.</li>
<li><strong>hooks</strong> -- dictionary of callback hooks, for internal usage.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;http://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
<span class="go">&lt;PreparedRequest [GET]&gt;</span>
</pre></div>
</div>
<dl class="method">
<dt id="requests.Request.deregister_hook">
<code class="descname">deregister_hook</code><span class="sig-paren">(</span><em>event</em>, <em>hook</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.Request.deregister_hook" title="永久链接至目标">¶</a></dt>
<dd><p>Deregister a previously registered hook.
Returns True if the hook existed, False if not.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Request.prepare">
<code class="descname">prepare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Request.prepare"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Request.prepare" title="永久链接至目标">¶</a></dt>
<dd><p>Constructs a <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> for transmission and returns it.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Request.register_hook">
<code class="descname">register_hook</code><span class="sig-paren">(</span><em>event</em>, <em>hook</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.Request.register_hook" title="永久链接至目标">¶</a></dt>
<dd><p>Properly register a hook.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="requests.Response">
<em class="property">class </em><code class="descclassname">requests.</code><code class="descname">Response</code><a class="reference internal" href="_modules/requests/models.html#Response"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Response" title="永久链接至目标">¶</a></dt>
<dd><p>The <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object, which contains a
server's response to an HTTP request.</p>
<dl class="attribute">
<dt id="requests.Response.apparent_encoding">
<code class="descname">apparent_encoding</code><a class="headerlink" href="#requests.Response.apparent_encoding" title="永久链接至目标">¶</a></dt>
<dd><p>The apparent encoding, provided by the chardet library</p>
</dd></dl>

<dl class="method">
<dt id="requests.Response.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.close"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Response.close" title="永久链接至目标">¶</a></dt>
<dd><p>Releases the connection back to the pool. Once this method has been
called the underlying <code class="docutils literal"><span class="pre">raw</span></code> object must not be accessed again.</p>
<p><em>Note: Should not normally need to be called explicitly.</em></p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.content">
<code class="descname">content</code><a class="headerlink" href="#requests.Response.content" title="永久链接至目标">¶</a></dt>
<dd><p>Content of the response, in bytes.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.cookies">
<code class="descname">cookies</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.cookies" title="永久链接至目标">¶</a></dt>
<dd><p>A CookieJar of Cookies the server sent back.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.elapsed">
<code class="descname">elapsed</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.elapsed" title="永久链接至目标">¶</a></dt>
<dd><p>The amount of time elapsed between sending the request
and the arrival of the response (as a timedelta).
This property specifically measures the time taken between sending
the first byte of the request and finishing parsing the headers. It
is therefore unaffected by consuming the response content or the
value of the <code class="docutils literal"><span class="pre">stream</span></code> keyword argument.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.encoding">
<code class="descname">encoding</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.encoding" title="永久链接至目标">¶</a></dt>
<dd><p>Encoding to decode with when accessing r.text.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.headers">
<code class="descname">headers</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.headers" title="永久链接至目标">¶</a></dt>
<dd><p>Case-insensitive Dictionary of Response Headers.
For example, <code class="docutils literal"><span class="pre">headers['content-encoding']</span></code> will return the
value of a <code class="docutils literal"><span class="pre">'Content-Encoding'</span></code> response header.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.history">
<code class="descname">history</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.history" title="永久链接至目标">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> objects from
the history of the Request. Any redirect responses will end
up here. The list is sorted from the oldest to the most recent request.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.is_permanent_redirect">
<code class="descname">is_permanent_redirect</code><a class="headerlink" href="#requests.Response.is_permanent_redirect" title="永久链接至目标">¶</a></dt>
<dd><p>True if this Response one of the permanent versions of redirect</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.is_redirect">
<code class="descname">is_redirect</code><a class="headerlink" href="#requests.Response.is_redirect" title="永久链接至目标">¶</a></dt>
<dd><p>True if this Response is a well-formed HTTP redirect that could have
been processed automatically (by <a class="reference internal" href="#requests.Session.resolve_redirects" title="requests.Session.resolve_redirects"><code class="xref py py-meth docutils literal"><span class="pre">Session.resolve_redirects</span></code></a>).</p>
</dd></dl>

<dl class="method">
<dt id="requests.Response.iter_content">
<code class="descname">iter_content</code><span class="sig-paren">(</span><em>chunk_size=1</em>, <em>decode_unicode=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.iter_content"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Response.iter_content" title="永久链接至目标">¶</a></dt>
<dd><p>Iterates over the response data.  When stream=True is set on the
request, this avoids reading the content at once into memory for
large responses.  The chunk size is the number of bytes it should
read into memory.  This is not necessarily the length of each item
returned as decoding can take place.</p>
<p>chunk_size must be of type int or None. A value of None will
function differently depending on the value of <cite>stream</cite>.
stream=True will read data as it arrives in whatever size the
chunks are recieved. If stream=False, data is returned as
a single chunk.</p>
<p>If decode_unicode is True, content will be decoded using the best
available encoding based on the response.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Response.iter_lines">
<code class="descname">iter_lines</code><span class="sig-paren">(</span><em>chunk_size=512</em>, <em>decode_unicode=None</em>, <em>delimiter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.iter_lines"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Response.iter_lines" title="永久链接至目标">¶</a></dt>
<dd><p>Iterates over the response data, one line at a time.  When
stream=True is set on the request, this avoids reading the
content at once into memory for large responses.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">This method is not reentrant safe.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="requests.Response.json">
<code class="descname">json</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.json"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Response.json" title="永久链接至目标">¶</a></dt>
<dd><p>Returns the json-encoded content of a response, if any.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">json.loads</span></code> takes.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.links">
<code class="descname">links</code><a class="headerlink" href="#requests.Response.links" title="永久链接至目标">¶</a></dt>
<dd><p>Returns the parsed header links of the response, if any.</p>
</dd></dl>

<dl class="method">
<dt id="requests.Response.raise_for_status">
<code class="descname">raise_for_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.raise_for_status"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.Response.raise_for_status" title="永久链接至目标">¶</a></dt>
<dd><p>Raises stored <a class="reference internal" href="#requests.HTTPError" title="requests.HTTPError"><code class="xref py py-class docutils literal"><span class="pre">HTTPError</span></code></a>, if one occurred.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.raw">
<code class="descname">raw</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.raw" title="永久链接至目标">¶</a></dt>
<dd><p>File-like object representation of response (for advanced usage).
Use of <code class="docutils literal"><span class="pre">raw</span></code> requires that <code class="docutils literal"><span class="pre">stream=True</span></code> be set on the request.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.reason">
<code class="descname">reason</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.reason" title="永久链接至目标">¶</a></dt>
<dd><p>Textual reason of responded HTTP Status, e.g. &quot;Not Found&quot; or &quot;OK&quot;.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.request">
<code class="descname">request</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.request" title="永久链接至目标">¶</a></dt>
<dd><p>The <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> object to which this
is a response.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.status_code">
<code class="descname">status_code</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.status_code" title="永久链接至目标">¶</a></dt>
<dd><p>Integer Code of responded HTTP Status, e.g. 404 or 200.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.text">
<code class="descname">text</code><a class="headerlink" href="#requests.Response.text" title="永久链接至目标">¶</a></dt>
<dd><p>Content of the response, in unicode.</p>
<p>If Response.encoding is None, encoding will be guessed using
<code class="docutils literal"><span class="pre">chardet</span></code>.</p>
<p>The encoding of the response content is determined based solely on HTTP
headers, following RFC 2616 to the letter. If you can take advantage of
non-HTTP knowledge to make a better guess at the encoding, you should
set <code class="docutils literal"><span class="pre">r.encoding</span></code> appropriately before accessing this property.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.Response.url">
<code class="descname">url</code><em class="property"> = None</em><a class="headerlink" href="#requests.Response.url" title="永久链接至目标">¶</a></dt>
<dd><p>Final URL location of Response.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id6">
<h4>更低级的类<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h4>
<dl class="class">
<dt id="requests.PreparedRequest">
<em class="property">class </em><code class="descclassname">requests.</code><code class="descname">PreparedRequest</code><a class="reference internal" href="_modules/requests/models.html#PreparedRequest"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest" title="永久链接至目标">¶</a></dt>
<dd><p>The fully mutable <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> object,
containing the exact bytes that will be sent to the server.</p>
<p>Generated from either a <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object or manually.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;http://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
<span class="go">&lt;PreparedRequest [GET]&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="requests.PreparedRequest.body">
<code class="descname">body</code><em class="property"> = None</em><a class="headerlink" href="#requests.PreparedRequest.body" title="永久链接至目标">¶</a></dt>
<dd><p>request body to send to the server.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.deregister_hook">
<code class="descname">deregister_hook</code><span class="sig-paren">(</span><em>event</em>, <em>hook</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.PreparedRequest.deregister_hook" title="永久链接至目标">¶</a></dt>
<dd><p>Deregister a previously registered hook.
Returns True if the hook existed, False if not.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.PreparedRequest.headers">
<code class="descname">headers</code><em class="property"> = None</em><a class="headerlink" href="#requests.PreparedRequest.headers" title="永久链接至目标">¶</a></dt>
<dd><p>dictionary of HTTP headers.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.PreparedRequest.hooks">
<code class="descname">hooks</code><em class="property"> = None</em><a class="headerlink" href="#requests.PreparedRequest.hooks" title="永久链接至目标">¶</a></dt>
<dd><p>dictionary of callback hooks, for internal usage.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.PreparedRequest.method">
<code class="descname">method</code><em class="property"> = None</em><a class="headerlink" href="#requests.PreparedRequest.method" title="永久链接至目标">¶</a></dt>
<dd><p>HTTP verb to send to the server.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.PreparedRequest.path_url">
<code class="descname">path_url</code><a class="headerlink" href="#requests.PreparedRequest.path_url" title="永久链接至目标">¶</a></dt>
<dd><p>Build the path URL to use.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.prepare">
<code class="descname">prepare</code><span class="sig-paren">(</span><em>method=None</em>, <em>url=None</em>, <em>headers=None</em>, <em>files=None</em>, <em>data=None</em>, <em>params=None</em>, <em>auth=None</em>, <em>cookies=None</em>, <em>hooks=None</em>, <em>json=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#PreparedRequest.prepare"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest.prepare" title="永久链接至目标">¶</a></dt>
<dd><p>Prepares the entire request with the given parameters.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.prepare_auth">
<code class="descname">prepare_auth</code><span class="sig-paren">(</span><em>auth</em>, <em>url=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#PreparedRequest.prepare_auth"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest.prepare_auth" title="永久链接至目标">¶</a></dt>
<dd><p>Prepares the given HTTP auth data.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.prepare_body">
<code class="descname">prepare_body</code><span class="sig-paren">(</span><em>data</em>, <em>files</em>, <em>json=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#PreparedRequest.prepare_body"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest.prepare_body" title="永久链接至目标">¶</a></dt>
<dd><p>Prepares the given HTTP body data.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.prepare_cookies">
<code class="descname">prepare_cookies</code><span class="sig-paren">(</span><em>cookies</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#PreparedRequest.prepare_cookies"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest.prepare_cookies" title="永久链接至目标">¶</a></dt>
<dd><p>Prepares the given HTTP cookie data.</p>
<p>This function eventually generates a <code class="docutils literal"><span class="pre">Cookie</span></code> header from the
given cookies using cookielib. Due to cookielib's design, the header
will not be regenerated if it already exists, meaning this function
can only be called once for the life of the
<a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> object. Any subsequent calls
to <code class="docutils literal"><span class="pre">prepare_cookies</span></code> will have no actual effect, unless the &quot;Cookie&quot;
header is removed beforehand.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.prepare_headers">
<code class="descname">prepare_headers</code><span class="sig-paren">(</span><em>headers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#PreparedRequest.prepare_headers"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest.prepare_headers" title="永久链接至目标">¶</a></dt>
<dd><p>Prepares the given HTTP headers.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.prepare_hooks">
<code class="descname">prepare_hooks</code><span class="sig-paren">(</span><em>hooks</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#PreparedRequest.prepare_hooks"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest.prepare_hooks" title="永久链接至目标">¶</a></dt>
<dd><p>Prepares the given hooks.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.prepare_method">
<code class="descname">prepare_method</code><span class="sig-paren">(</span><em>method</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#PreparedRequest.prepare_method"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest.prepare_method" title="永久链接至目标">¶</a></dt>
<dd><p>Prepares the given HTTP method.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.prepare_url">
<code class="descname">prepare_url</code><span class="sig-paren">(</span><em>url</em>, <em>params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#PreparedRequest.prepare_url"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.PreparedRequest.prepare_url" title="永久链接至目标">¶</a></dt>
<dd><p>Prepares the given HTTP URL.</p>
</dd></dl>

<dl class="method">
<dt id="requests.PreparedRequest.register_hook">
<code class="descname">register_hook</code><span class="sig-paren">(</span><em>event</em>, <em>hook</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.PreparedRequest.register_hook" title="永久链接至目标">¶</a></dt>
<dd><p>Properly register a hook.</p>
</dd></dl>

<dl class="attribute">
<dt id="requests.PreparedRequest.url">
<code class="descname">url</code><em class="property"> = None</em><a class="headerlink" href="#requests.PreparedRequest.url" title="永久链接至目标">¶</a></dt>
<dd><p>HTTP URL to send the request to.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="requests.adapters.HTTPAdapter">
<em class="property">class </em><code class="descclassname">requests.adapters.</code><code class="descname">HTTPAdapter</code><span class="sig-paren">(</span><em>pool_connections=10</em>, <em>pool_maxsize=10</em>, <em>max_retries=0</em>, <em>pool_block=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter" title="永久链接至目标">¶</a></dt>
<dd><p>The built-in HTTP Adapter for urllib3.</p>
<p>Provides a general-case interface for Requests sessions to contact HTTP and
HTTPS urls by implementing the Transport Adapter interface. This class will
usually be created by the <a class="reference internal" href="#requests.Session" title="requests.Session"><code class="xref py py-class docutils literal"><span class="pre">Session</span></code></a> class under the
covers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>pool_connections</strong> -- The number of urllib3 connection pools to cache.</li>
<li><strong>pool_maxsize</strong> -- The maximum number of connections to save in the pool.</li>
<li><strong>max_retries</strong> -- The maximum number of retries each connection
should attempt. Note, this applies only to failed DNS lookups, socket
connections and connection timeouts, never to requests where data has
made it to the server. By default, Requests does not retry failed
connections. If you need granular control over the conditions under
which we retry a request, import urllib3's <code class="docutils literal"><span class="pre">Retry</span></code> class and pass
that instead.</li>
<li><strong>pool_block</strong> -- Whether the connection pool should block for connections.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">adapters</span><span class="o">.</span><span class="n">HTTPAdapter</span><span class="p">(</span><span class="n">max_retries</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;http://&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="requests.adapters.HTTPAdapter.add_headers">
<code class="descname">add_headers</code><span class="sig-paren">(</span><em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.add_headers"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.add_headers" title="永久链接至目标">¶</a></dt>
<dd><p>Add any headers needed by the connection. As of v2.0 this does
nothing by default, but is left for overriding by users that subclass
the <a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>.</p>
<p>This should not be called from user code, and is only exposed for use
when subclassing the
<a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>request</strong> -- The <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> to add headers to.</li>
<li><strong>kwargs</strong> -- The keyword arguments from the call to send().</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.build_response">
<code class="descname">build_response</code><span class="sig-paren">(</span><em>req</em>, <em>resp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.build_response"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.build_response" title="永久链接至目标">¶</a></dt>
<dd><p>Builds a <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object from a urllib3
response. This should not be called from user code, and is only exposed
for use when subclassing the
<a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>req</strong> -- The <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> used to generate the response.</li>
<li><strong>resp</strong> -- The urllib3 response object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.cert_verify">
<code class="descname">cert_verify</code><span class="sig-paren">(</span><em>conn</em>, <em>url</em>, <em>verify</em>, <em>cert</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.cert_verify"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.cert_verify" title="永久链接至目标">¶</a></dt>
<dd><p>Verify a SSL certificate. This method should not be called from user
code, and is only exposed for use when subclassing the
<a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>conn</strong> -- The urllib3 connection object associated with the cert.</li>
<li><strong>url</strong> -- The requested URL.</li>
<li><strong>verify</strong> -- Whether we should actually verify the certificate.</li>
<li><strong>cert</strong> -- The SSL certificate to verify.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.close"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.close" title="永久链接至目标">¶</a></dt>
<dd><p>Disposes of any internal state.</p>
<p>Currently, this closes the PoolManager and any active ProxyManager,
which closes any pooled connections.</p>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.get_connection">
<code class="descname">get_connection</code><span class="sig-paren">(</span><em>url</em>, <em>proxies=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.get_connection"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.get_connection" title="永久链接至目标">¶</a></dt>
<dd><p>Returns a urllib3 connection for the given URL. This should not be
called from user code, and is only exposed for use when subclassing the
<a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> -- The URL to connect to.</li>
<li><strong>proxies</strong> -- (optional) A Requests-style dictionary of proxies used on this request.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.init_poolmanager">
<code class="descname">init_poolmanager</code><span class="sig-paren">(</span><em>connections</em>, <em>maxsize</em>, <em>block=False</em>, <em>**pool_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.init_poolmanager"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.init_poolmanager" title="永久链接至目标">¶</a></dt>
<dd><p>Initializes a urllib3 PoolManager.</p>
<p>This method should not be called from user code, and is only
exposed for use when subclassing the
<a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>connections</strong> -- The number of urllib3 connection pools to cache.</li>
<li><strong>maxsize</strong> -- The maximum number of connections to save in the pool.</li>
<li><strong>block</strong> -- Block when no free connections are available.</li>
<li><strong>pool_kwargs</strong> -- Extra keyword arguments used to initialize the Pool Manager.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.proxy_headers">
<code class="descname">proxy_headers</code><span class="sig-paren">(</span><em>proxy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.proxy_headers"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.proxy_headers" title="永久链接至目标">¶</a></dt>
<dd><p>Returns a dictionary of the headers to add to any request sent
through a proxy. This works with urllib3 magic to ensure that they are
correctly sent to the proxy, rather than in a tunnelled request if
CONNECT is being used.</p>
<p>This should not be called from user code, and is only exposed for use
when subclassing the
<a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>proxies</strong> -- The url of the proxy being used for this request.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.proxy_manager_for">
<code class="descname">proxy_manager_for</code><span class="sig-paren">(</span><em>proxy</em>, <em>**proxy_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.proxy_manager_for"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.proxy_manager_for" title="永久链接至目标">¶</a></dt>
<dd><p>Return urllib3 ProxyManager for the given proxy.</p>
<p>This method should not be called from user code, and is only
exposed for use when subclassing the
<a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>proxy</strong> -- The proxy to return a urllib3 ProxyManager for.</li>
<li><strong>proxy_kwargs</strong> -- Extra keyword arguments used to configure the Proxy Manager.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first last">ProxyManager</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.request_url">
<code class="descname">request_url</code><span class="sig-paren">(</span><em>request</em>, <em>proxies</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.request_url"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.request_url" title="永久链接至目标">¶</a></dt>
<dd><p>Obtain the url to use when making the final request.</p>
<p>If the message is being sent through a HTTP proxy, the full URL has to
be used. Otherwise, we should only use the path portion of the URL.</p>
<p>This should not be called from user code, and is only exposed for use
when subclassing the
<a class="reference internal" href="#requests.adapters.HTTPAdapter" title="requests.adapters.HTTPAdapter"><code class="xref py py-class docutils literal"><span class="pre">HTTPAdapter</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>request</strong> -- The <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> being sent.</li>
<li><strong>proxies</strong> -- A dictionary of schemes or schemes and hosts to proxy URLs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="requests.adapters.HTTPAdapter.send">
<code class="descname">send</code><span class="sig-paren">(</span><em>request</em>, <em>stream=False</em>, <em>timeout=None</em>, <em>verify=True</em>, <em>cert=None</em>, <em>proxies=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/adapters.html#HTTPAdapter.send"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.adapters.HTTPAdapter.send" title="永久链接至目标">¶</a></dt>
<dd><p>Sends PreparedRequest object. Returns Response object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>request</strong> -- The <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> being sent.</li>
<li><strong>stream</strong> -- (optional) Whether to stream the request content.</li>
<li><strong>timeout</strong> (<em>float or tuple</em>) -- (optional) How long to wait for the server to send
data before giving up, as a float, or a <a class="reference internal" href="index.html#timeouts"><span>(connect timeout,
read timeout)</span></a> tuple.</li>
<li><strong>verify</strong> -- (optional) Whether to verify SSL certificates.</li>
<li><strong>cert</strong> -- (optional) Any user-provided SSL certificate to be trusted.</li>
<li><strong>proxies</strong> -- (optional) The proxies dictionary to apply to the request.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id7">
<h4>身份验证<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h4>
<dl class="class">
<dt id="requests.auth.AuthBase">
<em class="property">class </em><code class="descclassname">requests.auth.</code><code class="descname">AuthBase</code><a class="reference internal" href="_modules/requests/auth.html#AuthBase"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.auth.AuthBase" title="永久链接至目标">¶</a></dt>
<dd><p>Base class that all auth implementations derive from</p>
</dd></dl>

<dl class="class">
<dt id="requests.auth.HTTPBasicAuth">
<em class="property">class </em><code class="descclassname">requests.auth.</code><code class="descname">HTTPBasicAuth</code><span class="sig-paren">(</span><em>username</em>, <em>password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/auth.html#HTTPBasicAuth"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.auth.HTTPBasicAuth" title="永久链接至目标">¶</a></dt>
<dd><p>Attaches HTTP Basic Authentication to the given Request object.</p>
</dd></dl>

<dl class="class">
<dt id="requests.auth.HTTPProxyAuth">
<em class="property">class </em><code class="descclassname">requests.auth.</code><code class="descname">HTTPProxyAuth</code><span class="sig-paren">(</span><em>username</em>, <em>password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/auth.html#HTTPProxyAuth"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.auth.HTTPProxyAuth" title="永久链接至目标">¶</a></dt>
<dd><p>Attaches HTTP Proxy Authentication to a given Request object.</p>
</dd></dl>

<dl class="class">
<dt id="requests.auth.HTTPDigestAuth">
<em class="property">class </em><code class="descclassname">requests.auth.</code><code class="descname">HTTPDigestAuth</code><span class="sig-paren">(</span><em>username</em>, <em>password</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/auth.html#HTTPDigestAuth"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.auth.HTTPDigestAuth" title="永久链接至目标">¶</a></dt>
<dd><p>Attaches HTTP Digest Authentication to the given Request object.</p>
</dd></dl>

</div>
<div class="section" id="id8">
<h4>编码<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="requests.utils.get_encodings_from_content">
<code class="descclassname">requests.utils.</code><code class="descname">get_encodings_from_content</code><span class="sig-paren">(</span><em>content</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/utils.html#get_encodings_from_content"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.utils.get_encodings_from_content" title="永久链接至目标">¶</a></dt>
<dd><p>Returns encodings from given content string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>content</strong> -- bytestring to extract encodings from.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.utils.get_encoding_from_headers">
<code class="descclassname">requests.utils.</code><code class="descname">get_encoding_from_headers</code><span class="sig-paren">(</span><em>headers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/utils.html#get_encoding_from_headers"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.utils.get_encoding_from_headers" title="永久链接至目标">¶</a></dt>
<dd><p>Returns encodings from given HTTP Header Dict.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>headers</strong> -- dictionary to extract encoding from.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.utils.get_unicode_from_response">
<code class="descclassname">requests.utils.</code><code class="descname">get_unicode_from_response</code><span class="sig-paren">(</span><em>r</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/utils.html#get_unicode_from_response"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.utils.get_unicode_from_response" title="永久链接至目标">¶</a></dt>
<dd><p>Returns the requested content back in unicode.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>r</strong> -- Response object to get unicode content from.</td>
</tr>
</tbody>
</table>
<p>Tried:</p>
<ol class="arabic simple">
<li>charset from content-type</li>
<li>fall back and replace all unicode characters</li>
</ol>
</dd></dl>

</div>
<div class="section" id="cookie">
<span id="api-cookies"></span><h4>Cookie<a class="headerlink" href="#cookie" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="requests.utils.dict_from_cookiejar">
<code class="descclassname">requests.utils.</code><code class="descname">dict_from_cookiejar</code><span class="sig-paren">(</span><em>cj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/utils.html#dict_from_cookiejar"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.utils.dict_from_cookiejar" title="永久链接至目标">¶</a></dt>
<dd><p>Returns a key/value dictionary from a CookieJar.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>cj</strong> -- CookieJar object to extract cookies from.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.utils.cookiejar_from_dict">
<code class="descclassname">requests.utils.</code><code class="descname">cookiejar_from_dict</code><span class="sig-paren">(</span><em>cookie_dict</em>, <em>cookiejar=None</em>, <em>overwrite=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#cookiejar_from_dict"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.utils.cookiejar_from_dict" title="永久链接至目标">¶</a></dt>
<dd><p>Returns a CookieJar from a key/value dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>cookie_dict</strong> -- Dict of key/values to insert into CookieJar.</li>
<li><strong>cookiejar</strong> -- (optional) A cookiejar to add the cookies to.</li>
<li><strong>overwrite</strong> -- (optional) If False, will not replace cookies
already in the jar with new ones.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requests.utils.add_dict_to_cookiejar">
<code class="descclassname">requests.utils.</code><code class="descname">add_dict_to_cookiejar</code><span class="sig-paren">(</span><em>cj</em>, <em>cookie_dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/utils.html#add_dict_to_cookiejar"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.utils.add_dict_to_cookiejar" title="永久链接至目标">¶</a></dt>
<dd><p>Returns a CookieJar from a key/value dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>cj</strong> -- CookieJar to insert cookies into.</li>
<li><strong>cookie_dict</strong> -- Dict of key/values to insert into CookieJar.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="requests.cookies.RequestsCookieJar">
<em class="property">class </em><code class="descclassname">requests.cookies.</code><code class="descname">RequestsCookieJar</code><span class="sig-paren">(</span><em>policy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar" title="永久链接至目标">¶</a></dt>
<dd><p>Compatibility class; is a cookielib.CookieJar, but exposes a dict
interface.</p>
<p>This is the CookieJar we create by default for requests and sessions that
don't specify one, since some clients may expect response.cookies and
session.cookies to support dict operations.</p>
<p>Requests does not use the dict interface internally; it's just for
compatibility with external client code. All requests code should work
out of the box with externally provided instances of <code class="docutils literal"><span class="pre">CookieJar</span></code>, e.g.
<code class="docutils literal"><span class="pre">LWPCookieJar</span></code> and <code class="docutils literal"><span class="pre">FileCookieJar</span></code>.</p>
<p>Unlike a regular CookieJar, this class is pickleable.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">dictionary operations that are normally O(1) may be O(n).</p>
</div>
<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.add_cookie_header">
<code class="descname">add_cookie_header</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.cookies.RequestsCookieJar.add_cookie_header" title="永久链接至目标">¶</a></dt>
<dd><p>Add correct Cookie: header to request (urllib2.Request object).</p>
<p>The Cookie2 header is also added unless policy.hide_cookie2 is true.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><em>domain=None</em>, <em>path=None</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.cookies.RequestsCookieJar.clear" title="永久链接至目标">¶</a></dt>
<dd><p>Clear some cookies.</p>
<p>Invoking this method without arguments will clear all cookies.  If
given a single argument, only cookies belonging to that domain will be
removed.  If given two arguments, cookies belonging to the specified
path within that domain are removed.  If given three arguments, then
the cookie with the specified name, path and domain is removed.</p>
<p>Raises KeyError if no matching cookie exists.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.clear_expired_cookies">
<code class="descname">clear_expired_cookies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#requests.cookies.RequestsCookieJar.clear_expired_cookies" title="永久链接至目标">¶</a></dt>
<dd><p>Discard all expired cookies.</p>
<p>You probably don't need to call this method: expired cookies are never
sent back to the server (provided you're using DefaultCookiePolicy),
this method is called by CookieJar itself every so often, and the
.save() method won't save expired cookies anyway (unless you ask
otherwise by passing a true ignore_expires argument).</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.clear_session_cookies">
<code class="descname">clear_session_cookies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#requests.cookies.RequestsCookieJar.clear_session_cookies" title="永久链接至目标">¶</a></dt>
<dd><p>Discard all session cookies.</p>
<p>Note that the .save() method won't save session cookies anyway, unless
you ask otherwise by passing a true ignore_discard argument.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.copy"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.copy" title="永久链接至目标">¶</a></dt>
<dd><p>Return a copy of this RequestsCookieJar.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.extract_cookies">
<code class="descname">extract_cookies</code><span class="sig-paren">(</span><em>response</em>, <em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.cookies.RequestsCookieJar.extract_cookies" title="永久链接至目标">¶</a></dt>
<dd><p>Extract cookies from response, where allowable given the request.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>name</em>, <em>default=None</em>, <em>domain=None</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.get"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.get" title="永久链接至目标">¶</a></dt>
<dd><p>Dict-like get() that also supports optional domain and path args in
order to resolve naming collisions from using one cookie jar over
multiple domains.</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">operation is O(n), not O(1).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.get_dict">
<code class="descname">get_dict</code><span class="sig-paren">(</span><em>domain=None</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.get_dict"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.get_dict" title="永久链接至目标">¶</a></dt>
<dd><p>Takes as an argument an optional domain and path and returns a plain
old Python dict of name-value pairs of cookies that meet the
requirements.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.items"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.items" title="永久链接至目标">¶</a></dt>
<dd><p>Dict-like items() that returns a list of name-value tuples from the
jar. See keys() and values(). Allows client-code to call
<code class="docutils literal"><span class="pre">dict(RequestsCookieJar)</span></code> and get a vanilla python dict of key value
pairs.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.iteritems">
<code class="descname">iteritems</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.iteritems"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.iteritems" title="永久链接至目标">¶</a></dt>
<dd><p>Dict-like iteritems() that returns an iterator of name-value tuples
from the jar. See iterkeys() and itervalues().</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.iterkeys">
<code class="descname">iterkeys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.iterkeys"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.iterkeys" title="永久链接至目标">¶</a></dt>
<dd><p>Dict-like iterkeys() that returns an iterator of names of cookies
from the jar. See itervalues() and iteritems().</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.itervalues">
<code class="descname">itervalues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.itervalues"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.itervalues" title="永久链接至目标">¶</a></dt>
<dd><p>Dict-like itervalues() that returns an iterator of values of cookies
from the jar. See iterkeys() and iteritems().</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.keys"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.keys" title="永久链接至目标">¶</a></dt>
<dd><p>Dict-like keys() that returns a list of names of cookies from the
jar. See values() and items().</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.list_domains">
<code class="descname">list_domains</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.list_domains"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.list_domains" title="永久链接至目标">¶</a></dt>
<dd><p>Utility method to list all the domains in the jar.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.list_paths">
<code class="descname">list_paths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.list_paths"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.list_paths" title="永久链接至目标">¶</a></dt>
<dd><p>Utility method to list all the paths in the jar.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.make_cookies">
<code class="descname">make_cookies</code><span class="sig-paren">(</span><em>response</em>, <em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.cookies.RequestsCookieJar.make_cookies" title="永久链接至目标">¶</a></dt>
<dd><p>Return sequence of Cookie objects extracted from response object.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.multiple_domains">
<code class="descname">multiple_domains</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.multiple_domains"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.multiple_domains" title="永久链接至目标">¶</a></dt>
<dd><p>Returns True if there are multiple domains in the jar.
Returns False otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><span class="sig-paren">)</span> &rarr; v, remove specified key and return the corresponding value.<a class="headerlink" href="#requests.cookies.RequestsCookieJar.pop" title="永久链接至目标">¶</a></dt>
<dd><p>If key is not found, d is returned if given, otherwise KeyError is raised.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.popitem">
<code class="descname">popitem</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; (k, v), remove and return some (key, value) pair<a class="headerlink" href="#requests.cookies.RequestsCookieJar.popitem" title="永久链接至目标">¶</a></dt>
<dd><p>as a 2-tuple; but raise KeyError if D is empty.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>name</em>, <em>value</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.set"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.set" title="永久链接至目标">¶</a></dt>
<dd><p>Dict-like set() that also supports optional domain and path args in
order to resolve naming collisions from using one cookie jar over
multiple domains.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.set_cookie_if_ok">
<code class="descname">set_cookie_if_ok</code><span class="sig-paren">(</span><em>cookie</em>, <em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#requests.cookies.RequestsCookieJar.set_cookie_if_ok" title="永久链接至目标">¶</a></dt>
<dd><p>Set a cookie if policy says it's OK to do so.</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.setdefault">
<code class="descname">setdefault</code><span class="sig-paren">(</span><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><span class="sig-paren">)</span> &rarr; D.get(k,d), also set D[k]=d if k not in D<a class="headerlink" href="#requests.cookies.RequestsCookieJar.setdefault" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.update"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.update" title="永久链接至目标">¶</a></dt>
<dd><p>Updates this jar with cookies from another CookieJar or dict-like</p>
</dd></dl>

<dl class="method">
<dt id="requests.cookies.RequestsCookieJar.values">
<code class="descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/cookies.html#RequestsCookieJar.values"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.RequestsCookieJar.values" title="永久链接至目标">¶</a></dt>
<dd><p>Dict-like values() that returns a list of values of cookies from the
jar. See keys() and items().</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="requests.cookies.CookieConflictError">
<em class="property">class </em><code class="descclassname">requests.cookies.</code><code class="descname">CookieConflictError</code><a class="reference internal" href="_modules/requests/cookies.html#CookieConflictError"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#requests.cookies.CookieConflictError" title="永久链接至目标">¶</a></dt>
<dd><p>There are two cookies that meet the criteria specified in the cookie jar.
Use .get and .set and include domain and path args in order to be more specific.</p>
</dd></dl>

</div>
<div class="section" id="id9">
<h4>状态码查询<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h4>
<dl class="attribute">
<dt id="requests.codes">
<code class="descclassname">requests.</code><code class="descname">codes</code><a class="headerlink" href="#requests.codes" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="s1">&#39;temporary_redirect&#39;</span><span class="p">]</span>
<span class="go">307</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">teapot</span>
<span class="go">418</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="s1">&#39;\o/&#39;</span><span class="p">]</span>
<span class="go">200</span>
</pre></div>
</div>
<hr class="docutils" />
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">requests.</code><code class="descname">Request</code><span class="sig-paren">(</span><em>method=None</em>, <em>url=None</em>, <em>headers=None</em>, <em>files=None</em>, <em>data=None</em>, <em>params=None</em>, <em>auth=None</em>, <em>cookies=None</em>, <em>hooks=None</em>, <em>json=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Request"><span class="viewcode-link">[源代码]</span></a></dt>
<dd><p>A user-created <a class="reference internal" href="#requests.Request" title="requests.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> object.</p>
<p>Used to prepare a <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a>, which is sent to the server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>method</strong> -- HTTP method to use.</li>
<li><strong>url</strong> -- URL to send.</li>
<li><strong>headers</strong> -- dictionary of headers to send.</li>
<li><strong>files</strong> -- dictionary of {filename: fileobject} files to multipart upload.</li>
<li><strong>data</strong> -- the body to attach to the request. If a dictionary is provided, form-encoding will take place.</li>
<li><strong>json</strong> -- json for the body to attach to the request (if files or data is not specified).</li>
<li><strong>params</strong> -- dictionary of URL parameters to append to the URL.</li>
<li><strong>auth</strong> -- Auth handler or (user, pass) tuple.</li>
<li><strong>cookies</strong> -- dictionary or CookieJar of cookies to attach to this request.</li>
<li><strong>hooks</strong> -- dictionary of callback hooks, for internal usage.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;http://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">req</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
<span class="go">&lt;PreparedRequest [GET]&gt;</span>
</pre></div>
</div>
<dl class="method">
<dt>
<code class="descname">deregister_hook</code><span class="sig-paren">(</span><em>event</em>, <em>hook</em><span class="sig-paren">)</span></dt>
<dd><p>Deregister a previously registered hook.
Returns True if the hook existed, False if not.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">prepare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Request.prepare"><span class="viewcode-link">[源代码]</span></a></dt>
<dd><p>Constructs a <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> for transmission and returns it.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">register_hook</code><span class="sig-paren">(</span><em>event</em>, <em>hook</em><span class="sig-paren">)</span></dt>
<dd><p>Properly register a hook.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">requests.</code><code class="descname">Response</code><a class="reference internal" href="_modules/requests/models.html#Response"><span class="viewcode-link">[源代码]</span></a></dt>
<dd><p>The <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> object, which contains a
server's response to an HTTP request.</p>
<dl class="attribute">
<dt>
<code class="descname">apparent_encoding</code></dt>
<dd><p>The apparent encoding, provided by the chardet library</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.close"><span class="viewcode-link">[源代码]</span></a></dt>
<dd><p>Releases the connection back to the pool. Once this method has been
called the underlying <code class="docutils literal"><span class="pre">raw</span></code> object must not be accessed again.</p>
<p><em>Note: Should not normally need to be called explicitly.</em></p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">content</code></dt>
<dd><p>Content of the response, in bytes.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">cookies</code><em class="property"> = None</em></dt>
<dd><p>A CookieJar of Cookies the server sent back.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">elapsed</code><em class="property"> = None</em></dt>
<dd><p>The amount of time elapsed between sending the request
and the arrival of the response (as a timedelta).
This property specifically measures the time taken between sending
the first byte of the request and finishing parsing the headers. It
is therefore unaffected by consuming the response content or the
value of the <code class="docutils literal"><span class="pre">stream</span></code> keyword argument.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">encoding</code><em class="property"> = None</em></dt>
<dd><p>Encoding to decode with when accessing r.text.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">headers</code><em class="property"> = None</em></dt>
<dd><p>Case-insensitive Dictionary of Response Headers.
For example, <code class="docutils literal"><span class="pre">headers['content-encoding']</span></code> will return the
value of a <code class="docutils literal"><span class="pre">'Content-Encoding'</span></code> response header.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">history</code><em class="property"> = None</em></dt>
<dd><p>A list of <a class="reference internal" href="#requests.Response" title="requests.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> objects from
the history of the Request. Any redirect responses will end
up here. The list is sorted from the oldest to the most recent request.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">is_permanent_redirect</code></dt>
<dd><p>True if this Response one of the permanent versions of redirect</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">is_redirect</code></dt>
<dd><p>True if this Response is a well-formed HTTP redirect that could have
been processed automatically (by <a class="reference internal" href="#requests.Session.resolve_redirects" title="requests.Session.resolve_redirects"><code class="xref py py-meth docutils literal"><span class="pre">Session.resolve_redirects</span></code></a>).</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">iter_content</code><span class="sig-paren">(</span><em>chunk_size=1</em>, <em>decode_unicode=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.iter_content"><span class="viewcode-link">[源代码]</span></a></dt>
<dd><p>Iterates over the response data.  When stream=True is set on the
request, this avoids reading the content at once into memory for
large responses.  The chunk size is the number of bytes it should
read into memory.  This is not necessarily the length of each item
returned as decoding can take place.</p>
<p>chunk_size must be of type int or None. A value of None will
function differently depending on the value of <cite>stream</cite>.
stream=True will read data as it arrives in whatever size the
chunks are recieved. If stream=False, data is returned as
a single chunk.</p>
<p>If decode_unicode is True, content will be decoded using the best
available encoding based on the response.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">iter_lines</code><span class="sig-paren">(</span><em>chunk_size=512</em>, <em>decode_unicode=None</em>, <em>delimiter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.iter_lines"><span class="viewcode-link">[源代码]</span></a></dt>
<dd><p>Iterates over the response data, one line at a time.  When
stream=True is set on the request, this avoids reading the
content at once into memory for large responses.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">This method is not reentrant safe.</p>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">json</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.json"><span class="viewcode-link">[源代码]</span></a></dt>
<dd><p>Returns the json-encoded content of a response, if any.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>**kwargs</strong> -- Optional arguments that <code class="docutils literal"><span class="pre">json.loads</span></code> takes.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">links</code></dt>
<dd><p>Returns the parsed header links of the response, if any.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">raise_for_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/requests/models.html#Response.raise_for_status"><span class="viewcode-link">[源代码]</span></a></dt>
<dd><p>Raises stored <a class="reference internal" href="#requests.HTTPError" title="requests.HTTPError"><code class="xref py py-class docutils literal"><span class="pre">HTTPError</span></code></a>, if one occurred.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">raw</code><em class="property"> = None</em></dt>
<dd><p>File-like object representation of response (for advanced usage).
Use of <code class="docutils literal"><span class="pre">raw</span></code> requires that <code class="docutils literal"><span class="pre">stream=True</span></code> be set on the request.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">reason</code><em class="property"> = None</em></dt>
<dd><p>Textual reason of responded HTTP Status, e.g. &quot;Not Found&quot; or &quot;OK&quot;.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">request</code><em class="property"> = None</em></dt>
<dd><p>The <a class="reference internal" href="#requests.PreparedRequest" title="requests.PreparedRequest"><code class="xref py py-class docutils literal"><span class="pre">PreparedRequest</span></code></a> object to which this
is a response.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">status_code</code><em class="property"> = None</em></dt>
<dd><p>Integer Code of responded HTTP Status, e.g. 404 or 200.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">text</code></dt>
<dd><p>Content of the response, in unicode.</p>
<p>If Response.encoding is None, encoding will be guessed using
<code class="docutils literal"><span class="pre">chardet</span></code>.</p>
<p>The encoding of the response content is determined based solely on HTTP
headers, following RFC 2616 to the letter. If you can take advantage of
non-HTTP knowledge to make a better guess at the encoding, you should
set <code class="docutils literal"><span class="pre">r.encoding</span></code> appropriately before accessing this property.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">url</code><em class="property"> = None</em></dt>
<dd><p>Final URL location of Response.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="x">
<h4>迁移到 1.x<a class="headerlink" href="#x" title="永久链接至标题">¶</a></h4>
<p>本节详细介绍 0.x 和 1.x 的主要区别，减少升级带来的一些不便。</p>
<div class="section" id="id10">
<h5>API 变化<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h5>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">Response.json</span></code> 现在是可调用的并且不再是响应体的属性。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com/timeline.json&#39;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>   <span class="c1"># 如果 JSON 解码失败，该调用会引发异常。</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Session</span></code> API 也发生了变化. Sessions 对象不再需要参数了。
<code class="docutils literal"><span class="pre">Session</span></code> 现在是大写的了，但为了向后兼容，它仍然能被小写的 <code class="docutils literal"><span class="pre">session</span></code> 实例化。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>    <span class="c1"># 过去会话需要接收参数</span>
<span class="n">s</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="n">auth</span>
<span class="n">s</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/headers&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">除了'response'，所有的请求挂钩已被移除。</p>
</li>
<li><p class="first">认证助手已经被分解成单独的模块了. 参见
<a class="reference external" href="https://github.com/requests/requests-oauthlib">requests-oauthlib</a> and <a class="reference external" href="https://github.com/requests/requests-kerberos">requests-kerberos</a>.</p>
</li>
</ul>
<ul>
<li><p class="first">流请求的参数已从 <code class="docutils literal"><span class="pre">prefetch</span></code> 改变到 <code class="docutils literal"><span class="pre">stream</span></code> ，并且逻辑也被颠倒。除此之外，
<code class="docutils literal"><span class="pre">stream</span></code> 现在对于原始响应读取也是必需的。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># 在 0.x 中，传入 prefetch=False 会达到同样的结果</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://github.com/timeline.json&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="mi">8192</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p class="first">requests 方法的 <code class="docutils literal"><span class="pre">config</span></code> 参数已全部删除。 现在配置这些选项都在 <code class="docutils literal"><span class="pre">Session</span></code> ，比如
keep-alive 和最大数目的重定向。 详细程度选项应当由配置日志来处理。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># 启用调试于 http.client 级别 (requests-&gt;urllib3-&gt;http.client)</span>
<span class="c1"># 你将能看到 REQUEST，包括 HEADERS 和 DATA，以及包含 HEADERS 但不包含 DATA 的 RESPONSE。</span>
<span class="c1"># 唯一缺少的是 response.body，它不会被 log 记录。</span>
<span class="k">try</span><span class="p">:</span> <span class="c1"># for Python 3</span>
    <span class="kn">from</span> <span class="nn">http.client</span> <span class="kn">import</span> <span class="n">HTTPConnection</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">httplib</span> <span class="kn">import</span> <span class="n">HTTPConnection</span>
<span class="n">HTTPConnection</span><span class="o">.</span><span class="n">debuglevel</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">()</span> <span class="c1"># 初始化 logging，否则不会看到任何 requests 的输出。</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">requests_log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;requests.packages.urllib3&quot;</span><span class="p">)</span>
<span class="n">requests_log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">requests_log</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://httpbin.org/headers&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id11">
<h5>许可<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h5>
<p>有一个关键的与 API 无关的区别是开放许可从 <a class="reference external" href="http://opensource.org/licenses/ISC">ISC</a> 许可 变更到 <a class="reference external" href="http://opensource.org/licenses/Apache-2.0">Apache 2.0</a> 许可.  Apache 2.0
license 确保了对于 Requests 的贡献也被涵盖在 Apache 2.0 许可内.</p>
</div>
</div>
<div class="section" id="id12">
<h4>迁移到 2.x<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h4>
<p>和 1.0 发布版相比，破坏向后兼容的更改比较少。不过在这个主发布版本中，依然还有一些应该注意的问题。</p>
<p>更多关于变更的细节，包括 API，以及相关的 GitHub Issue 和部分 bug 修复，请参阅 Cory <a class="reference external" href="http://lukasa.co.uk/2013/09/Requests_20/">blog</a>
中的相关主题。</p>
<div class="section" id="id13">
<h5>API 变化<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h5>
<ul>
<li><p class="first">Requests 处理异常的行为有部分更改。 <code class="docutils literal"><span class="pre">RequestException</span></code> 现在是 <code class="docutils literal"><span class="pre">IOError</span></code>
的子类，而非 <code class="docutils literal"><span class="pre">RuntimeError</span></code> 的子类，新的归类更为合理。此外，无效的 URL
转义序列现在会引发 <code class="docutils literal"><span class="pre">RequestException</span></code> 的一个子类，而非一个 <code class="docutils literal"><span class="pre">ValueError</span></code>。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://%zz/&#39;</span><span class="p">)</span>   <span class="c1"># raises requests.exceptions.InvalidURL</span>
</pre></div>
</div>
<p>最后， 错误分块导致的 <code class="docutils literal"><span class="pre">httplib.IncompleteRead</span></code> 异常现在变成了 <code class="docutils literal"><span class="pre">ChunkedEncodingError</span></code>。</p>
</li>
<li><p class="first">代理 API 略有改动，现在需要提供代理 URL 的 scheme。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">proxies</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;http&quot;</span><span class="p">:</span> <span class="s2">&quot;10.10.1.10:3128&quot;</span><span class="p">,</span>    <span class="c1"># 需使用 http://10.10.1.10:3128</span>
<span class="p">}</span>

<span class="c1"># requests 1.x 中有效， requests 2.x 中会引发 requests.exceptions.MissingSchema</span>

<span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://example.org&quot;</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="n">proxies</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id14">
<h5>行为变化<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">headers</span></code> 字典中的 key 现在都是原生字符串，在所有版本的 Python
中都是如此。也就是说，Python 2 中是 bytestring，Python 3 中是 unicode。
如果 key 不是原声字符串（Python 2 中 unicode，或 Python 3 中 bytestring）
它们会被以 UTF-8 编码转成原生字符串。</li>
<li><code class="docutils literal"><span class="pre">headers</span></code> 字典中的 value 应该都是字符串。在 1.0 版之前该项目就是要求这样做的，只不过最近（v2.11.0之后）这条变成了强制条款。建议在可能的情况下，避免让 header 值使用 unicode 编码。</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="id5">
<h2>贡献指南<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>如果你要为项目做出贡献，请参考这部分文档。</p>
<div class="toctree-wrapper compound">
<span id="document-dev/contributing"></span><div class="section" id="contributor-s-guide">
<span id="contributing"></span><h3>Contributor's Guide<a class="headerlink" href="#contributor-s-guide" title="永久链接至标题">¶</a></h3>
<p>If you're reading this, you're probably interested in contributing to Requests.
Thank you very much! Open source projects live-and-die based on the support
they receive from others, and the fact that you're even considering
contributing to the Requests project is <em>very</em> generous of you.</p>
<p>This document lays out guidelines and advice for contributing to this project.
If you're thinking of contributing, please start by reading this document and
getting a feel for how contributing to this project works. If you have any
questions, feel free to reach out to either <a class="reference external" href="http://www.coglib.com/~icordasc/">Ian Cordasco</a> or <a class="reference external" href="https://lukasa.co.uk/about">Cory Benfield</a>,
the primary maintainers.</p>
<p>If you have non-technical feedback, philosophical ponderings, crazy ideas, or
other general thoughts about Requests or its position within the Python
ecosystem, the BDFL, <a class="reference external" href="mailto:me&#37;&#52;&#48;kennethreitz&#46;org">Kenneth Reitz</a>, would love to hear from you.</p>
<p>The guide is split into sections based on the type of contribution you're
thinking of making, with a section that covers general guidelines for all
contributors.</p>
<div class="section" id="be-cordial">
<h4>Be Cordial<a class="headerlink" href="#be-cordial" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><strong>Be cordial or be on your way</strong>. <em>—Kenneth Reitz</em></div></blockquote>
<p>Requests has one very important rule governing all forms of contribution,
including reporting bugs or requesting features. This golden rule is
&quot;<a class="reference external" href="http://kennethreitz.org/be-cordial-or-be-on-your-way/">be cordial or be on your way</a>&quot;.</p>
<p><strong>All contributions are welcome</strong>, as long as
everyone involved is treated with respect.</p>
</div>
<div class="section" id="get-early-feedback">
<span id="early-feedback"></span><h4>Get Early Feedback<a class="headerlink" href="#get-early-feedback" title="永久链接至标题">¶</a></h4>
<p>If you are contributing, do not feel the need to sit on your contribution until
it is perfectly polished and complete. It helps everyone involved for you to
seek feedback as early as you possibly can. Submitting an early, unfinished
version of your contribution for feedback in no way prejudices your chances of
getting that contribution accepted, and can save you from putting a lot of work
into a contribution that is not suitable for the project.</p>
</div>
<div class="section" id="contribution-suitability">
<h4>Contribution Suitability<a class="headerlink" href="#contribution-suitability" title="永久链接至标题">¶</a></h4>
<p>Our project maintainers have the last word on whether or not a contribution is
suitable for Requests. All contributions will be considered carefully, but from
time to time, contributions will be rejected because they do not suit the
current goals or needs of the project.</p>
<p>If your contribution is rejected, don't despair! As long as you followed these
guidelines, you will have a much better chance of getting your next
contribution accepted.</p>
</div>
<div class="section" id="code-contributions">
<h4>Code Contributions<a class="headerlink" href="#code-contributions" title="永久链接至标题">¶</a></h4>
<div class="section" id="steps-for-submitting-code">
<h5>Steps for Submitting Code<a class="headerlink" href="#steps-for-submitting-code" title="永久链接至标题">¶</a></h5>
<p>When contributing code, you'll want to follow this checklist:</p>
<ol class="arabic simple">
<li>Fork the repository on GitHub.</li>
<li>Run the tests to confirm they all pass on your system. If they don't, you'll
need to investigate why they fail. If you're unable to diagnose this
yourself, raise it as a bug report by following the guidelines in this
document: <a class="reference internal" href="#bug-reports"><span>Bug Reports</span></a>.</li>
<li>Write tests that demonstrate your bug or feature. Ensure that they fail.</li>
<li>Make your change.</li>
<li>Run the entire test suite again, confirming that all tests pass <em>including
the ones you just added</em>.</li>
<li>Send a GitHub Pull Request to the main repository's <code class="docutils literal"><span class="pre">master</span></code> branch.
GitHub Pull Requests are the expected method of code collaboration on this
project.</li>
</ol>
<p>The following sub-sections go into more detail on some of the points above.</p>
</div>
<div class="section" id="code-review">
<h5>Code Review<a class="headerlink" href="#code-review" title="永久链接至标题">¶</a></h5>
<p>Contributions will not be merged until they've been code reviewed. You should
implement any code review feedback unless you strongly object to it. In the
event that you object to the code review feedback, you should make your case
clearly and calmly. If, after doing so, the feedback is judged to still apply,
you must either apply the feedback or withdraw your contribution.</p>
</div>
<div class="section" id="new-contributors">
<h5>New Contributors<a class="headerlink" href="#new-contributors" title="永久链接至标题">¶</a></h5>
<p>If you are new or relatively new to Open Source, welcome! Requests aims to
be a gentle introduction to the world of Open Source. If you're concerned about
how best to contribute, please consider mailing a maintainer (listed above) and
asking for help.</p>
<p>Please also check the <a class="reference internal" href="#early-feedback"><span>Get Early Feedback</span></a> section.</p>
</div>
<div class="section" id="kenneth-reitz-s-code-style">
<h5>Kenneth Reitz's Code Style™<a class="headerlink" href="#kenneth-reitz-s-code-style" title="永久链接至标题">¶</a></h5>
<p>The Requests codebase uses the <a class="reference external" href="http://pep8.org">PEP 8</a> code style.</p>
<p>In addition to the standards outlined in PEP 8, we have a few guidelines:</p>
<ul class="simple">
<li>Line-length can exceed 79 characters, to 100, when convenient.</li>
<li>Line-length can exceed 100 characters, when doing otherwise would be <em>terribly</em> inconvenient.</li>
<li>Always use single-quoted strings (e.g. <code class="docutils literal"><span class="pre">'#flatearth'</span></code>), unless a single-quote occurs within the string.</li>
</ul>
<p>Additionally, one of the styles that PEP8 recommends for <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#indentation">line continuations</a>
completely lacks all sense of taste, and is not to be permitted within
the Requests codebase:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Aligned with opening delimiter.</span>
<span class="n">foo</span> <span class="o">=</span> <span class="n">long_function_name</span><span class="p">(</span><span class="n">var_one</span><span class="p">,</span> <span class="n">var_two</span><span class="p">,</span>
                         <span class="n">var_three</span><span class="p">,</span> <span class="n">var_four</span><span class="p">)</span>
</pre></div>
</div>
<p>No. Just don't. Please.</p>
<p>Docstrings are to follow the following syntaxes:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">the_earth_is_flat</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;NASA divided up the seas into thirty-three degrees.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci_spiral_tool</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;With my feet upon the ground I lose myself / between the sounds</span>
<span class="sd">    and open wide to suck it in. / I feel it move across my skin. / I&#39;m</span>
<span class="sd">    reaching up and reaching out. / I&#39;m reaching for the random or</span>
<span class="sd">    whatever will bewilder me. / Whatever will bewilder me. / And</span>
<span class="sd">    following our will and wind we may just go where no one&#39;s been. /</span>
<span class="sd">    We&#39;ll ride the spiral to the end and may just go where no one&#39;s</span>
<span class="sd">    been.</span>

<span class="sd">    Spiral out. Keep going...</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>All functions, methods, and classes are to contain docstrings. Object data
model methods (e.g. <code class="docutils literal"><span class="pre">__repr__</span></code>) are typically the exception to this rule.</p>
<p>Thanks for helping to make the world a better place!</p>
</div>
</div>
<div class="section" id="documentation-contributions">
<h4>Documentation Contributions<a class="headerlink" href="#documentation-contributions" title="永久链接至标题">¶</a></h4>
<p>Documentation improvements are always welcome! The documentation files live in
the <code class="docutils literal"><span class="pre">docs/</span></code> directory of the codebase. They're written in
<a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a>, and use <a class="reference external" href="http://sphinx-doc.org/index.html">Sphinx</a> to generate the full suite of
documentation.</p>
<p>When contributing documentation, please do your best to follow the style of the
documentation files. This means a soft-limit of 79 characters wide in your text
files and a semi-formal, yet friendly and approachable, prose style.</p>
<p>When presenting Python code, use single-quoted strings (<code class="docutils literal"><span class="pre">'hello'</span></code> instead of
<code class="docutils literal"><span class="pre">&quot;hello&quot;</span></code>).</p>
</div>
<div class="section" id="bug-reports">
<span id="id1"></span><h4>Bug Reports<a class="headerlink" href="#bug-reports" title="永久链接至标题">¶</a></h4>
<p>Bug reports are hugely important! Before you raise one, though, please check
through the <a class="reference external" href="https://github.com/kennethreitz/requests/issues">GitHub issues</a>, <strong>both open and closed</strong>, to confirm that the bug
hasn't been reported before. Duplicate bug reports are a huge drain on the time
of other contributors, and should be avoided as much as possible.</p>
</div>
<div class="section" id="feature-requests">
<h4>Feature Requests<a class="headerlink" href="#feature-requests" title="永久链接至标题">¶</a></h4>
<p>Requests is in a perpetual feature freeze, only the BDFL can add or approve of
new features. The maintainers believe that Requests is a feature-complete
piece of software at this time.</p>
<p>One of the most important skills to have while maintaining a largely-used
open source project is learning the ability to say &quot;no&quot; to suggested changes,
while keeping an open ear and mind.</p>
<p>If you believe there is a feature missing, feel free to raise a feature
request, but please do be aware that the overwhelming likelihood is that your
feature request will not be accepted.</p>
</div>
</div>
<span id="document-dev/philosophy"></span><div class="section" id="development-philosophy">
<h3>Development Philosophy<a class="headerlink" href="#development-philosophy" title="永久链接至标题">¶</a></h3>
<p>Requests is an open but opinionated library, created by an open but opinionated developer.</p>
<div class="section" id="management-style">
<h4>Management Style<a class="headerlink" href="#management-style" title="永久链接至标题">¶</a></h4>
<p><a class="reference external" href="http://kennethreitz.org">Kenneth Reitz</a> is the BDFL. He has final say in any decision related to the Requests project. Kenneth is responsible for the direction and form of the library. In addition to making decisions based on technical merit, he is responsible for making decisions based on the development philosophy of Requests. Only Kenneth may merge code into Requests.</p>
<p><a class="reference external" href="http://www.coglib.com/~icordasc/">Ian Cordasco</a> and <a class="reference external" href="https://lukasa.co.uk/about/">Cory Benfield</a> are the core contributors. They are responsible for triaging bug reports, reviewing pull requests and ensuring that Kenneth is kept up to speed with developments around the library. The day-to-day managing of the project is done by the core contributors. They are responsible for making judgements about whether or not a feature request is likely to be accepted by Kenneth. They do not have the authority to change code or merge code changes, though they may change documentation. Their word is not final.</p>
</div>
<div class="section" id="values">
<h4>Values<a class="headerlink" href="#values" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>Simplicity is always better than functionality.</li>
<li>Listen to everyone, then disregard it.</li>
<li>The API is all that matters. Everything else is secondary.</li>
<li>Fit the 90% use-case. Ignore the nay-sayers.</li>
</ul>
</div>
<div class="section" id="semantic-versioning">
<h4>Semantic Versioning<a class="headerlink" href="#semantic-versioning" title="永久链接至标题">¶</a></h4>
<p>For many years, the open source community has been plagued with version number dystonia. Numbers vary so greatly from project to project, they are practically meaningless.</p>
<p>Requests uses <a class="reference external" href="http://semver.org">Semantic Versioning</a>. This specification seeks to put an end to this madness with a small set of practical guidelines for you and your colleagues to use in your next project.</p>
</div>
<div class="section" id="standard-library">
<h4>Standard Library?<a class="headerlink" href="#standard-library" title="永久链接至标题">¶</a></h4>
<p>Requests has no <em>active</em> plans to be included in the standard library. This decision has been discussed at length with Guido as well as numerous core developers.</p>
<p>Essentially, the standard library is where a library goes to die. It is appropriate for a module to be included when active development is no longer necessary.</p>
</div>
<div class="section" id="linux-distro-packages">
<h4>Linux Distro Packages<a class="headerlink" href="#linux-distro-packages" title="永久链接至标题">¶</a></h4>
<p>Distributions have been made for many Linux repositories, including: Ubuntu, Debian, RHEL, and Arch.</p>
<p>These distributions are sometimes divergent forks, or are otherwise not kept up-to-date with the latest code and bugfixes. PyPI (and its mirrors) and GitHub are the official distribution sources; alternatives are not supported by the Requests project.</p>
</div>
</div>
<span id="document-dev/todo"></span><div class="section" id="how-to-help">
<h3>How to Help<a class="headerlink" href="#how-to-help" title="永久链接至标题">¶</a></h3>
<p>Requests is under active development, and contributions are more than welcome!</p>
<ol class="arabic simple">
<li>Check for open issues or open a fresh issue to start a discussion around a bug.
There is a Contributor Friendly tag for issues that should be ideal for people who are not very
familiar with the codebase yet.</li>
<li>Fork <a class="reference external" href="https://github.com/kennethreitz/requests">the repository</a> on GitHub and start making your
changes to a new branch.</li>
<li>Write a test which shows that the bug was fixed.</li>
<li>Send a pull request and bug the maintainer until it gets merged and published. :)
Make sure to add yourself to <a class="reference external" href="https://github.com/kennethreitz/requests/blob/master/AUTHORS.rst">AUTHORS</a>.</li>
</ol>
<div class="section" id="feature-freeze">
<h4>Feature Freeze<a class="headerlink" href="#feature-freeze" title="永久链接至标题">¶</a></h4>
<p>As of v1.0.0, Requests has now entered a feature freeze. Requests for new
features and Pull Requests implementing those features will not be accepted.</p>
</div>
<div class="section" id="development-dependencies">
<h4>Development Dependencies<a class="headerlink" href="#development-dependencies" title="永久链接至标题">¶</a></h4>
<p>You'll need to install py.test in order to run the Requests' test suite:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ pip install -r requirements.txt
$ py.test
platform darwin -- Python 2.7.3 -- pytest-2.3.4
collected 25 items

test_requests.py .........................
25 passed in 3.50 seconds
</pre></div>
</div>
</div>
<div class="section" id="runtime-environments">
<h4>Runtime Environments<a class="headerlink" href="#runtime-environments" title="永久链接至标题">¶</a></h4>
<p>Requests currently supports the following versions of Python:</p>
<ul class="simple">
<li>Python 2.6</li>
<li>Python 2.7</li>
<li>Python 3.3</li>
<li>Python 3.4</li>
<li>Python 3.5</li>
<li>PyPy 1.9</li>
</ul>
<p>Google AppEngine is not officially supported although support is available
with the <a class="reference external" href="http://toolbelt.readthedocs.io/">Requests-Toolbelt</a>.</p>
</div>
<div class="section" id="are-you-crazy">
<h4>Are you crazy?<a class="headerlink" href="#are-you-crazy" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>SPDY support would be awesome. No C extensions.</li>
</ul>
</div>
<div class="section" id="downstream-repackaging">
<h4>Downstream Repackaging<a class="headerlink" href="#downstream-repackaging" title="永久链接至标题">¶</a></h4>
<p>If you are repackaging Requests, please note that you must also redistribute the <code class="docutils literal"><span class="pre">cacerts.pem</span></code> file in order to get correct SSL functionality.</p>
</div>
</div>
<span id="document-dev/authors"></span><div class="section" id="id1">
<h3>贡献者<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h3>
<p>Requests is written and maintained by Kenneth Reitz and
various contributors:</p>
<div class="section" id="keepers-of-the-three-crystals">
<h4>Keepers of the Three Crystals<a class="headerlink" href="#keepers-of-the-three-crystals" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>Kenneth Reitz &lt;<a class="reference external" href="mailto:me&#37;&#52;&#48;kennethreitz&#46;org">me<span>&#64;</span>kennethreitz<span>&#46;</span>org</a>&gt; <a class="reference external" href="https://github.com/kennethreitz">&#64;kennethreitz</a>, Keeper of the Master Crystal.</li>
<li>Cory Benfield &lt;<a class="reference external" href="mailto:cory&#37;&#52;&#48;lukasa&#46;co&#46;uk">cory<span>&#64;</span>lukasa<span>&#46;</span>co<span>&#46;</span>uk</a>&gt; <a class="reference external" href="https://github.com/lukasa">&#64;lukasa</a></li>
<li>Ian Cordasco &lt;<a class="reference external" href="mailto:graffatcolmingov&#37;&#52;&#48;gmail&#46;com">graffatcolmingov<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; <a class="reference external" href="https://github.com/sigmavirus24">&#64;sigmavirus24</a></li>
</ul>
</div>
<div class="section" id="urllib3">
<h4>Urllib3<a class="headerlink" href="#urllib3" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>Andrey Petrov &lt;<a class="reference external" href="mailto:andrey&#46;petrov&#37;&#52;&#48;shazow&#46;net">andrey<span>&#46;</span>petrov<span>&#64;</span>shazow<span>&#46;</span>net</a>&gt;</li>
</ul>
</div>
<div class="section" id="patches-and-suggestions">
<h4>Patches and Suggestions<a class="headerlink" href="#patches-and-suggestions" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li>Various Pocoo Members</li>
<li>Chris Adams</li>
<li>Flavio Percoco Premoli</li>
<li>Dj Gilcrease</li>
<li>Justin Murphy</li>
<li>Rob Madole</li>
<li>Aram Dulyan</li>
<li>Johannes Gorset</li>
<li>村山めがね (Megane Murayama)</li>
<li>James Rowe</li>
<li>Daniel Schauenberg</li>
<li>Zbigniew Siciarz</li>
<li>Daniele Tricoli 'Eriol'</li>
<li>Richard Boulton</li>
<li>Miguel Olivares &lt;<a class="reference external" href="mailto:miguel&#37;&#52;&#48;moliware&#46;com">miguel<span>&#64;</span>moliware<span>&#46;</span>com</a>&gt;</li>
<li>Alberto Paro</li>
<li>Jérémy Bethmont</li>
<li>潘旭 (Xu Pan)</li>
<li>Tamás Gulácsi</li>
<li>Rubén Abad</li>
<li>Peter Manser</li>
<li>Jeremy Selier</li>
<li>Jens Diemer</li>
<li>Alex (<a class="reference external" href="https://github.com/alopatin">&#64;alopatin</a>)</li>
<li>Tom Hogans &lt;<a class="reference external" href="mailto:tomhsx&#37;&#52;&#48;gmail&#46;com">tomhsx<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Armin Ronacher</li>
<li>Shrikant Sharat Kandula</li>
<li>Mikko Ohtamaa</li>
<li>Den Shabalin</li>
<li>Daniel Miller &lt;<a class="reference external" href="mailto:danielm&#37;&#52;&#48;vs-networks&#46;com">danielm<span>&#64;</span>vs-networks<span>&#46;</span>com</a>&gt;</li>
<li>Alejandro Giacometti</li>
<li>Rick Mak</li>
<li>Johan Bergström</li>
<li>Josselin Jacquard</li>
<li>Travis N. Vaught</li>
<li>Fredrik Möllerstrand</li>
<li>Daniel Hengeveld</li>
<li>Dan Head</li>
<li>Bruno Renié</li>
<li>David Fischer</li>
<li>Joseph McCullough</li>
<li>Juergen Brendel</li>
<li>Juan Riaza</li>
<li>Ryan Kelly</li>
<li>Rolando Espinoza La fuente</li>
<li>Robert Gieseke</li>
<li>Idan Gazit</li>
<li>Ed Summers</li>
<li>Chris Van Horne</li>
<li>Christopher Davis</li>
<li>Ori Livneh</li>
<li>Jason Emerick</li>
<li>Bryan Helmig</li>
<li>Jonas Obrist</li>
<li>Lucian Ursu</li>
<li>Tom Moertel</li>
<li>Frank Kumro Jr</li>
<li>Chase Sterling</li>
<li>Marty Alchin</li>
<li>takluyver</li>
<li>Ben Toews (<a class="reference external" href="https://github.com/mastahyeti">&#64;mastahyeti</a>)</li>
<li>David Kemp</li>
<li>Brendon Crawford</li>
<li>Denis (<a class="reference external" href="https://github.com/Telofy">&#64;Telofy</a>)</li>
<li>Matt Giuca</li>
<li>Adam Tauber</li>
<li>Honza Javorek</li>
<li>Brendan Maguire &lt;<a class="reference external" href="mailto:maguire&#46;brendan&#37;&#52;&#48;gmail&#46;com">maguire<span>&#46;</span>brendan<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Chris Dary</li>
<li>Danver Braganza &lt;<a class="reference external" href="mailto:danverbraganza&#37;&#52;&#48;gmail&#46;com">danverbraganza<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Max Countryman</li>
<li>Nick Chadwick</li>
<li>Jonathan Drosdeck</li>
<li>Jiri Machalek</li>
<li>Steve Pulec</li>
<li>Michael Kelly</li>
<li>Michael Newman &lt;<a class="reference external" href="mailto:newmaniese&#37;&#52;&#48;gmail&#46;com">newmaniese<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Jonty Wareing &lt;<a class="reference external" href="mailto:jonty&#37;&#52;&#48;jonty&#46;co&#46;uk">jonty<span>&#64;</span>jonty<span>&#46;</span>co<span>&#46;</span>uk</a>&gt;</li>
<li>Shivaram Lingamneni</li>
<li>Miguel Turner</li>
<li>Rohan Jain (<a class="reference external" href="https://github.com/crodjer">&#64;crodjer</a>)</li>
<li>Justin Barber &lt;<a class="reference external" href="mailto:barber&#46;justin&#37;&#52;&#48;gmail&#46;com">barber<span>&#46;</span>justin<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Roman Haritonov (<a class="reference external" href="https://github.com/reclosedev">&#64;reclosedev</a>)</li>
<li>Josh Imhoff &lt;<a class="reference external" href="mailto:joshimhoff13&#37;&#52;&#48;gmail&#46;com">joshimhoff13<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Arup Malakar &lt;<a class="reference external" href="mailto:amalakar&#37;&#52;&#48;gmail&#46;com">amalakar<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Danilo Bargen (<a class="reference external" href="https://github.com/dbrgn">&#64;dbrgn</a>)</li>
<li>Torsten Landschoff</li>
<li>Michael Holler (<a class="reference external" href="https://github.com/apotheos">&#64;apotheos</a>)</li>
<li>Timnit Gebru</li>
<li>Sarah Gonzalez</li>
<li>Victoria Mo</li>
<li>Leila Muhtasib</li>
<li>Matthias Rahlf &lt;<a class="reference external" href="mailto:matthias&#37;&#52;&#48;webding&#46;de">matthias<span>&#64;</span>webding<span>&#46;</span>de</a>&gt;</li>
<li>Jakub Roztocil &lt;<a class="reference external" href="mailto:jakub&#37;&#52;&#48;roztocil&#46;name">jakub<span>&#64;</span>roztocil<span>&#46;</span>name</a>&gt;</li>
<li>Rhys Elsmore</li>
<li>André Graf (<a class="reference external" href="https://github.com/dergraf">&#64;dergraf</a>)</li>
<li>Stephen Zhuang (<a class="reference external" href="https://github.com/everbird">&#64;everbird</a>)</li>
<li>Martijn Pieters</li>
<li>Jonatan Heyman</li>
<li>David Bonner &lt;<a class="reference external" href="mailto:dbonner&#37;&#52;&#48;gmail&#46;com">dbonner<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/rascalking">&#64;rascalking</a>)</li>
<li>Vinod Chandru</li>
<li>Johnny Goodnow &lt;<a class="reference external" href="mailto:j&#46;goodnow29&#37;&#52;&#48;gmail&#46;com">j<span>&#46;</span>goodnow29<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Denis Ryzhkov &lt;<a class="reference external" href="mailto:denisr&#37;&#52;&#48;denisr&#46;com">denisr<span>&#64;</span>denisr<span>&#46;</span>com</a>&gt;</li>
<li>Wilfred Hughes &lt;<a class="reference external" href="mailto:me&#37;&#52;&#48;wilfred&#46;me&#46;uk">me<span>&#64;</span>wilfred<span>&#46;</span>me<span>&#46;</span>uk</a>&gt;</li>
<li>Dmitry Medvinsky &lt;<a class="reference external" href="mailto:me&#37;&#52;&#48;dmedvinsky&#46;name">me<span>&#64;</span>dmedvinsky<span>&#46;</span>name</a>&gt;</li>
<li>Bryce Boe &lt;<a class="reference external" href="mailto:bbzbryce&#37;&#52;&#48;gmail&#46;com">bbzbryce<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/bboe">&#64;bboe</a>)</li>
<li>Colin Dunklau &lt;<a class="reference external" href="mailto:colin&#46;dunklau&#37;&#52;&#48;gmail&#46;com">colin<span>&#46;</span>dunklau<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/cdunklau">&#64;cdunklau</a>)</li>
<li>Bob Carroll &lt;<a class="reference external" href="mailto:bob&#46;carroll&#37;&#52;&#48;alum&#46;rit&#46;edu">bob<span>&#46;</span>carroll<span>&#64;</span>alum<span>&#46;</span>rit<span>&#46;</span>edu</a>&gt; (<a class="reference external" href="https://github.com/rcarz">&#64;rcarz</a>)</li>
<li>Hugo Osvaldo Barrera &lt;<a class="reference external" href="mailto:hugo&#37;&#52;&#48;osvaldobarrera&#46;com&#46;ar">hugo<span>&#64;</span>osvaldobarrera<span>&#46;</span>com<span>&#46;</span>ar</a>&gt; (<a class="reference external" href="https://github.com/hobarrera">&#64;hobarrera</a>)</li>
<li>Łukasz Langa &lt;<a class="reference external" href="mailto:lukasz&#37;&#52;&#48;langa&#46;pl">lukasz<span>&#64;</span>langa<span>&#46;</span>pl</a>&gt;</li>
<li>Dave Shawley &lt;<a class="reference external" href="mailto:daveshawley&#37;&#52;&#48;gmail&#46;com">daveshawley<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>James Clarke (<a class="reference external" href="https://github.com/jam">&#64;jam</a>)</li>
<li>Kevin Burke &lt;<a class="reference external" href="mailto:kev&#37;&#52;&#48;inburke&#46;com">kev<span>&#64;</span>inburke<span>&#46;</span>com</a>&gt;</li>
<li>Flavio Curella</li>
<li>David Pursehouse &lt;<a class="reference external" href="mailto:david&#46;pursehouse&#37;&#52;&#48;gmail&#46;com">david<span>&#46;</span>pursehouse<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/dpursehouse">&#64;dpursehouse</a>)</li>
<li>Jon Parise (<a class="reference external" href="https://github.com/jparise">&#64;jparise</a>)</li>
<li>Alexander Karpinsky (<a class="reference external" href="https://twitter.com/homm86">&#64;homm86</a>)</li>
<li>Marc Schlaich (<a class="reference external" href="https://github.com/schlamar">&#64;schlamar</a>)</li>
<li>Park Ilsu &lt;<a class="reference external" href="mailto:daftonshady&#37;&#52;&#48;gmail&#46;com">daftonshady<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/daftshady">&#64;daftshady</a>)</li>
<li>Matt Spitz (<a class="reference external" href="https://github.com/mattspitz">&#64;mattspitz</a>)</li>
<li>Vikram Oberoi (<a class="reference external" href="https://github.com/voberoi">&#64;voberoi</a>)</li>
<li>Can Ibanoglu &lt;<a class="reference external" href="mailto:can&#46;ibanoglu&#37;&#52;&#48;gmail&#46;com">can<span>&#46;</span>ibanoglu<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/canibanoglu">&#64;canibanoglu</a>)</li>
<li>Thomas Weißschuh &lt;<a class="reference external" href="mailto:thomas&#37;&#52;&#48;t-8ch&#46;de">thomas<span>&#64;</span>t-8ch<span>&#46;</span>de</a>&gt; (<a class="reference external" href="https://github.com/t-8ch">&#64;t-8ch</a>)</li>
<li>Jayson Vantuyl &lt;<a class="reference external" href="mailto:jayson&#37;&#52;&#48;aggressive&#46;ly">jayson<span>&#64;</span>aggressive<span>&#46;</span>ly</a>&gt;</li>
<li>Pengfei.X &lt;<a class="reference external" href="mailto:pengphy&#37;&#52;&#48;gmail&#46;com">pengphy<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Kamil Madac &lt;<a class="reference external" href="mailto:kamil&#46;madac&#37;&#52;&#48;gmail&#46;com">kamil<span>&#46;</span>madac<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Michael Becker &lt;<a class="reference external" href="mailto:mike&#37;&#52;&#48;beckerfuffle&#46;com">mike<span>&#64;</span>beckerfuffle<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://twitter.com/beckerfuffle">&#64;beckerfuffle</a>)</li>
<li>Erik Wickstrom &lt;<a class="reference external" href="mailto:erik&#37;&#52;&#48;erikwickstrom&#46;com">erik<span>&#64;</span>erikwickstrom<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/erikwickstrom">&#64;erikwickstrom</a>)</li>
<li>Константин Подшумок (<a class="reference external" href="https://github.com/podshumok">&#64;podshumok</a>)</li>
<li>Ben Bass (<a class="reference external" href="https://github.com/codedstructure">&#64;codedstructure</a>)</li>
<li>Jonathan Wong &lt;<a class="reference external" href="mailto:evolutionace&#37;&#52;&#48;gmail&#46;com">evolutionace<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/ContinuousFunction">&#64;ContinuousFunction</a>)</li>
<li>Martin Jul (<a class="reference external" href="https://github.com/mjul">&#64;mjul</a>)</li>
<li>Joe Alcorn (<a class="reference external" href="https://github.com/buttscicles">&#64;buttscicles</a>)</li>
<li>Syed Suhail Ahmed &lt;<a class="reference external" href="mailto:ssuhail&#46;ahmed93&#37;&#52;&#48;gmail&#46;com">ssuhail<span>&#46;</span>ahmed93<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/syedsuhail">&#64;syedsuhail</a>)</li>
<li>Scott Sadler (<a class="reference external" href="https://github.com/ssadler">&#64;ssadler</a>)</li>
<li>Arthur Darcet (<a class="reference external" href="https://github.com/arthurdarcet">&#64;arthurdarcet</a>)</li>
<li>Ulrich Petri (<a class="reference external" href="https://github.com/ulope">&#64;ulope</a>)</li>
<li>Muhammad Yasoob Ullah Khalid &lt;<a class="reference external" href="mailto:yasoob&#46;khld&#37;&#52;&#48;gmail&#46;com">yasoob<span>&#46;</span>khld<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/yasoob">&#64;yasoob</a>)</li>
<li>Paul van der Linden (<a class="reference external" href="https://github.com/pvanderlinden">&#64;pvanderlinden</a>)</li>
<li>Colin Dickson (<a class="reference external" href="https://github.com/colindickson">&#64;colindickson</a>)</li>
<li>Smiley Barry (<a class="reference external" href="https://github.com/smiley">&#64;smiley</a>)</li>
<li>Shagun Sodhani (<a class="reference external" href="https://github.com/shagunsodhani">&#64;shagunsodhani</a>)</li>
<li>Robin Linderborg (<a class="reference external" href="https://github.com/vienno">&#64;vienno</a>)</li>
<li>Brian Samek (<a class="reference external" href="https://github.com/bsamek">&#64;bsamek</a>)</li>
<li>Dmitry Dygalo (<a class="reference external" href="https://github.com/Stranger6667">&#64;Stranger6667</a>)</li>
<li>piotrjurkiewicz</li>
<li>Jesse Shapiro &lt;<a class="reference external" href="mailto:jesse&#37;&#52;&#48;jesseshapiro&#46;net">jesse<span>&#64;</span>jesseshapiro<span>&#46;</span>net</a>&gt; (<a class="reference external" href="https://github.com/haikuginger">&#64;haikuginger</a>)</li>
<li>Nate Prewitt &lt;<a class="reference external" href="mailto:nate&#46;prewitt&#37;&#52;&#48;gmail&#46;com">nate<span>&#46;</span>prewitt<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt; (<a class="reference external" href="https://github.com/nateprewitt">&#64;nateprewitt</a>)</li>
</ul>
</div>
</div>
</div>
<p>没有别的指南了，你现在要靠自己了。</p>
<p>祝你好运。</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="index.html#document-index">
    <img class="logo" src="_static/requests-sidebar.png" title="Rezzy the Requests Sea Turtle"/>
  </a>
</p>

<p>
  <iframe src="http://ghbtns.com/github-btn.html?user=kennethreitz&repo=requests&type=watch&count=true&size=large"
    allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>

<p>
  Requests is an elegant and simple HTTP library for Python, built for
  human beings.
</p>

<h3>Stay Informed</h3>
<p>Receive updates on new releases and upcoming projects.</p>

<p><iframe src="http://ghbtns.com/github-btn.html?user=kennethreitz&type=follow&count=false"
  allowtransparency="true" frameborder="0" scrolling="0" width="200" height="20"></iframe></p>

<p><a href="https://twitter.com/kennethreitz" class="twitter-follow-button" data-show-count="false">Follow @kennethreitz</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>

<p><a href="http://tinyletter.com/kennethreitz">Join Mailing List</a>.</p>

<h3>Other Projects</h3>

<p>More <a href="http://kennethreitz.org/">Kenneth Reitz</a> projects:</p>
<ul>
    <li><a href="http://pep8.org/">pep8.org</a></li>
    <li><a href="http://httpbin.org/">httpbin.org</a></li>
    <li><a href="http://python-guide.org">The Python Guide</a></li>
    <li><a href="https://github.com/kennethreitz/records">Records: SQL for Humans</a></li>
    <li><a href="http://www.git-legit.org">Legit: Git for Humans</a></li>
    <li><a href="http://docs.python-tablib.org/en/latest/">Tablib: Tabular Datasets</a></li>
    <li><a href="http://markdownplease.com">Markdown, Please!</a></li>
</ul>


<h3>Useful Links</h3>
<ul>
  <li><a href="http://docs.python-requests.org/en/latest/community/recommended/">Recommended Packages and Extensions</a></li>

  <p></p>

  <li><a href="http://github.com/kennethreitz/requests">Requests @ GitHub</a></li>
  <li><a href="http://pypi.python.org/pypi/requests">Requests @ PyPI</a></li>
  <li><a href="http://github.com/kennethreitz/requests/issues">Issue Tracker</a></li>
  <li><a href="http://docs.python-requests.org/en/latest/community/updates/#software-updates">Release History</a></li>
</ul>


<h3>Translations</h3>

<ul>
  <li><a href="http://docs.python-requests.org/">English</a></li>
  <li><a href="http://fr.python-requests.org/">French</a></li>
  <li><a href="http://de.python-requests.org/">German</a></li>
  <li><a href="http://jp.python-requests.org/">Japanese</a></li>
  <li><a href="http://cn.python-requests.org/">Chinese</a></li>
  <li><a href="http://pt.python-requests.org/">Portuguese</a></li>
  <li><a href="http://it.python-requests.org/">Italian</a></li>
  <li><a href="http://es.python-requests.org/">Spanish</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    输入相关的术语，模块，类或者函数名称进行搜索
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><!-- Alabaster (krTheme++) Hacks -->

<!-- CSS Adjustments (I'm very picky.) -->
<style type="text/css">

  /* Rezzy requires precise alignment. */
  img.logo {margin-left: -20px!important;}

  /* "Quick Search" should be capitalized. */
  div#searchbox h3 {text-transform: capitalize;}

  /* Make the document a little wider, less code is cut-off. */
  div.document {width: 1008px;}

  /* Much-improved spacing around code blocks. */
  div.highlight pre {padding: 11px 14px;}

  /* Remain Responsive! */
  @media screen and (max-width: 1008px) {
    div.sphinxsidebar {display: none;}
    div.document {width: 100%!important;}

    /* Have code blocks escape the document right-margin. */
    div.highlight pre {margin-right: -30px;}
  }

</style>

<!-- Analytics tracking for Kenneth. -->
<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '56ca7a57c88d9011080024dd');
    t.setAttribute('data-track-path', 'https://track.gaug.es/track.gif');
    t.src = 'https://d36ee2fcip1434.cloudfront.net/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>

<!-- There are no more hacks. -->
<!--         இڿڰۣ-ڰۣ—         -->
<!--   Love, Kenneth Reitz    -->

<script src="_static//konami.js"></script>
<script>
  var easter_egg = new Konami('http://fortunes.herokuapp.com/random/raw');
</script>

<!-- That was not a hack. That was art. -->
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016. A <a href="http://kennethreitz.com/pages/open-projects.html">Kenneth Reitz</a> Project.
      
    </div>

    
    <a href="https://github.com/kennethreitz/requests" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>